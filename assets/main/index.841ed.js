window.__require=function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return o(e[s][1][t]||t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({Circle:[function(t,e,n){"use strict";var i;cc._RF.push(e,"7831frc3TxHaZdUCBVlkjJk","Circle");var o=n;function r(t,e,n,i){this._centerX=t,this._centerY=e,this._radius=n,this._runRadius=i}Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(r.prototype,"centerX",{get:function(){return this._centerX},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"centerY",{get:function(){return this._centerY},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this._radius},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runRadius",{get:function(){return this._runRadius},enumerable:!1,configurable:!0}),r.prototype.xxxx=function(){},r.prototype.calculateDistanceToLine=function(t,e,n,i,o,r){var s,a=e-(s=Math.abs(n-t)<1e-5?1e5:(i-e)/(n-t))*t;return Math.abs((s*o-r+a)/Math.sqrt(s*s+1))},r.prototype.calculateSlope=function(t,e,n,i){return(e-i)/(t-n)},r.prototype.calculateDistanceToSegment=function(t,e,n,i,o,r,s){var a=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2)),c=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)),l=Math.sqrt(Math.pow(t-o,2)+Math.pow(e-r,2)),u=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-i,2));return l-c>s/2||u-c>s/2?u:l<s?l:u<s?u:this.calculateDistanceToLine(t,e,n,i,o,r)},i=r,o.default=i,cc._RF.pop()},{}],CryptoJS:[function(t,e){"use strict";var n,i;cc._RF.push(e,"8e011iB1k1HFIpackv49GQ+","CryptoJS");var o=o||function(t){var e={},n=e.lib={},i=function(){},o=n.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var o=0;o<t;o++)e[i+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(i+o)%4*8;else if(n.length>65535)for(o=0;o<t;o+=4)e[i+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],i=0;i<e;i+=4)n.push(4294967296*t.random()|0);return new r.init(n,e)}}),s=e.enc={},a=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new r.init(n,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++)n.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new r.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s);if(e=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,o=t.min(4*e,o),e){for(var c=0;c<e;c+=s)this._doProcessBlock(i,c);c=i.splice(0,e),n.sigBytes-=o}return new r.init(c,o)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=u.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}});var h=e.algo={};return e}(Math);i=(n=o).lib.WordArray,n.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp(),t=[];for(var o=0;o<n;o+=3)for(var r=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)t.push(i.charAt(r>>>6*(3-s)&63));if(e=i.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,n=this._map;(o=n.charAt(64))&&-1!=(o=t.indexOf(o))&&(e=o);for(var o=[],r=0,s=0;s<e;s++)if(s%4){var a=n.indexOf(t.charAt(s-1))<<s%4*2,c=n.indexOf(t.charAt(s))>>>6-s%4*2;o[r>>>2]|=(a|c)<<24-r%4*8,r++}return i.create(o,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t){function e(t,e,n,i,o,r,s){return((t=t+(e&n|~e&i)+o+s)<<r|t>>>32-r)+e}function n(t,e,n,i,o,r,s){return((t=t+(e&i|n&~i)+o+s)<<r|t>>>32-r)+e}function i(t,e,n,i,o,r,s){return((t=t+(e^n^i)+o+s)<<r|t>>>32-r)+e}function r(t,e,n,i,o,r,s){return((t=t+(n^(e|~i))+o+s)<<r|t>>>32-r)+e}for(var s=o,a=(l=s.lib).WordArray,c=l.Hasher,l=s.algo,u=[],h=0;h<64;h++)u[h]=4294967296*t.abs(t.sin(h+1))|0;l=l.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,o){for(var s=0;s<16;s++){var a=t[c=o+s];t[c]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}s=this._hash.words;var c=t[o+0];a=t[o+1];var l=t[o+2],h=t[o+3],p=t[o+4],d=t[o+5],f=t[o+6],v=t[o+7],g=t[o+8],y=t[o+9],m=t[o+10],_=t[o+11],P=t[o+12],b=t[o+13],C=t[o+14],A=t[o+15],w=e(w=s[0],S=s[1],N=s[2],x=s[3],c,7,u[0]),x=e(x,w,S,N,a,12,u[1]),N=e(N,x,w,S,l,17,u[2]),S=e(S,N,x,w,h,22,u[3]);w=e(w,S,N,x,p,7,u[4]),x=e(x,w,S,N,d,12,u[5]),N=e(N,x,w,S,f,17,u[6]),S=e(S,N,x,w,v,22,u[7]),w=e(w,S,N,x,g,7,u[8]),x=e(x,w,S,N,y,12,u[9]),N=e(N,x,w,S,m,17,u[10]),S=e(S,N,x,w,_,22,u[11]),w=e(w,S,N,x,P,7,u[12]),x=e(x,w,S,N,b,12,u[13]),N=e(N,x,w,S,C,17,u[14]),w=n(w,S=e(S,N,x,w,A,22,u[15]),N,x,a,5,u[16]),x=n(x,w,S,N,f,9,u[17]),N=n(N,x,w,S,_,14,u[18]),S=n(S,N,x,w,c,20,u[19]),w=n(w,S,N,x,d,5,u[20]),x=n(x,w,S,N,m,9,u[21]),N=n(N,x,w,S,A,14,u[22]),S=n(S,N,x,w,p,20,u[23]),w=n(w,S,N,x,y,5,u[24]),x=n(x,w,S,N,C,9,u[25]),N=n(N,x,w,S,h,14,u[26]),S=n(S,N,x,w,g,20,u[27]),w=n(w,S,N,x,b,5,u[28]),x=n(x,w,S,N,l,9,u[29]),N=n(N,x,w,S,v,14,u[30]),w=i(w,S=n(S,N,x,w,P,20,u[31]),N,x,d,4,u[32]),x=i(x,w,S,N,g,11,u[33]),N=i(N,x,w,S,_,16,u[34]),S=i(S,N,x,w,C,23,u[35]),w=i(w,S,N,x,a,4,u[36]),x=i(x,w,S,N,p,11,u[37]),N=i(N,x,w,S,v,16,u[38]),S=i(S,N,x,w,m,23,u[39]),w=i(w,S,N,x,b,4,u[40]),x=i(x,w,S,N,c,11,u[41]),N=i(N,x,w,S,h,16,u[42]),S=i(S,N,x,w,f,23,u[43]),w=i(w,S,N,x,y,4,u[44]),x=i(x,w,S,N,P,11,u[45]),N=i(N,x,w,S,A,16,u[46]),w=r(w,S=i(S,N,x,w,l,23,u[47]),N,x,c,6,u[48]),x=r(x,w,S,N,v,10,u[49]),N=r(N,x,w,S,C,15,u[50]),S=r(S,N,x,w,d,21,u[51]),w=r(w,S,N,x,P,6,u[52]),x=r(x,w,S,N,h,10,u[53]),N=r(N,x,w,S,m,15,u[54]),S=r(S,N,x,w,a,21,u[55]),w=r(w,S,N,x,g,6,u[56]),x=r(x,w,S,N,A,10,u[57]),N=r(N,x,w,S,f,15,u[58]),S=r(S,N,x,w,b,21,u[59]),w=r(w,S,N,x,p,6,u[60]),x=r(x,w,S,N,_,10,u[61]),N=r(N,x,w,S,l,15,u[62]),S=r(S,N,x,w,y,21,u[63]),s[0]=s[0]+w|0,s[1]=s[1]+S|0,s[2]=s[2]+N|0,s[3]=s[3]+x|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var r=t.floor(i/4294967296);for(n[15+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process(),n=(e=this._hash).words,i=0;i<4;i++)o=n[i],n[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=c._createHelper(l),s.HmacMD5=c._createHmacHelper(l)}(Math),function(){var t,e=o,n=(t=e.lib).Base,i=t.WordArray,r=(t=e.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=(a=this.cfg).hasher.create(),o=i.create(),r=o.words,s=a.keySize,a=a.iterations;r.length<s;){c&&n.update(c);var c=n.update(t).finalize(e);n.reset();for(var l=1;l<a;l++)c=n.finalize(c),n.reset();o.concat(c)}return o.sigBytes=4*s,o}});e.EvpKDF=function(t,e,n){return r.create(n).compute(t,e)}}(),o.lib.Cipher||function(){var t=(d=o).lib,e=t.Base,n=t.WordArray,i=t.BufferedBlockAlgorithm,r=d.enc.Base64,s=d.algo.EvpKDF,a=t.Cipher=i.extend({cfg:e.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,i){return("string"==typeof n?f:p).encrypt(t,e,n,i)},decrypt:function(e,n,i){return("string"==typeof n?f:p).decrypt(t,e,n,i)}}}});t.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=d.mode={},l=function(t,e,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var o=0;o<n;o++)t[e+o]^=i[o]},u=(t.BlockCipherMode=e.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();u.Encryptor=u.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize;l.call(this,t,e,i),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),u.Decryptor=u.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=t.slice(e,e+i);n.decryptBlock(t,e),l.call(this,t,e,i),this._prevBlock=o}}),c=c.CBC=u,u=(d.pad={}).Pkcs7={pad:function(t,e){for(var i,o=(i=(i=4*e)-t.sigBytes%i)<<24|i<<16|i<<8|i,r=[],s=0;s<i;s+=4)r.push(o);i=n.create(r,i),t.concat(i)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},t.BlockCipher=a.extend({cfg:a.cfg.extend({mode:c,padding:u}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=t.CipherParams=e.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}});c=(d.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?n.create([1398893684,1701076831]).concat(t).concat(e):e).toString(r)},parse:function(t){var e=(t=r.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var i=n.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:i})}};var p=t.SerializableCipher=e.extend({cfg:e.extend({format:c}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var o=t.createEncryptor(n,i);return e=o.finalize(e),o=o.cfg,h.create({ciphertext:e,key:n,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),d=(d.kdf={}).OpenSSL={execute:function(t,e,i,o){return o||(o=n.random(8)),t=s.create({keySize:e+i}).compute(t,o),i=n.create(t.words.slice(e),4*i),t.sigBytes=4*e,h.create({key:t,iv:i,salt:o})}},f=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:d}),encrypt:function(t,e,n,i){return n=(i=this.cfg.extend(i)).kdf.execute(n,t.keySize,t.ivSize),i.iv=n.iv,(t=p.encrypt.call(this,t,e,n.key,i)).mixIn(n),t},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),n=i.kdf.execute(n,t.keySize,t.ivSize,e.salt),i.iv=n.iv,p.decrypt.call(this,t,e,n.key,i)}})}(),function(){for(var t=o,e=t.lib.BlockCipher,n=t.algo,i=[],r=[],s=[],a=[],c=[],l=[],u=[],h=[],p=[],d=[],f=[],v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;var g=0,y=0;for(v=0;v<256;v++){var m=(m=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&m^99;i[g]=m,r[m]=g;var _=f[g],P=f[_],b=f[P],C=257*f[m]^16843008*m;s[g]=C<<24|C>>>8,a[g]=C<<16|C>>>16,c[g]=C<<8|C>>>24,l[g]=C,C=16843009*b^65537*P^257*_^16843008*g,u[m]=C<<24|C>>>8,h[m]=C<<16|C>>>16,p[m]=C<<8|C>>>24,d[m]=C,g?(g=_^f[f[f[b^_]]],y^=f[f[y]]):g=y=1}var A=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=e.extend({_doReset:function(){for(var t=(n=this._key).words,e=n.sigBytes/4,n=4*((this._nRounds=e+6)+1),o=this._keySchedule=[],r=0;r<n;r++)if(r<e)o[r]=t[r];else{var s=o[r-1];r%e?e>6&&r%e==4&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=A[r/e|0]<<24),o[r]=o[r-e]^s}for(t=this._invKeySchedule=[],e=0;e<n;e++)r=n-e,s=e%4?o[r]:o[r-4],t[e]=e<4||r<=4?s:u[i[s>>>24]]^h[i[s>>>16&255]]^p[i[s>>>8&255]]^d[i[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,c,l,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,h,p,d,r),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,o,r,s,a){for(var c=this._nRounds,l=t[e]^n[0],u=t[e+1]^n[1],h=t[e+2]^n[2],p=t[e+3]^n[3],d=4,f=1;f<c;f++){var v=i[l>>>24]^o[u>>>16&255]^r[h>>>8&255]^s[255&p]^n[d++],g=i[u>>>24]^o[h>>>16&255]^r[p>>>8&255]^s[255&l]^n[d++],y=i[h>>>24]^o[p>>>16&255]^r[l>>>8&255]^s[255&u]^n[d++];p=i[p>>>24]^o[l>>>16&255]^r[u>>>8&255]^s[255&h]^n[d++],l=v,u=g,h=y}v=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^n[d++],g=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&l])^n[d++],y=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[d++],p=(a[p>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^n[d++],t[e]=v,t[e+1]=g,t[e+2]=y,t[e+3]=p},keySize:8}),t.AES=e._createHelper(n)}(),o.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},globalThis.CryptoJS=o,cc._RF.pop()},{}],DrawCircle:[function(t,e,n){"use strict";var i;cc._RF.push(e,"062d0UdDldAi7Hbyt827F6h","DrawCircle");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(s,"__esModule",{value:!0});var l=o("runPig");function u(){var t=null!==a&&a.apply(this,arguments)||this;return t.graphics=null,t.runPig=null,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(u,a=cc.Component),u.prototype.onLoad=function(){this.drawCircle()},u.prototype.drawCircle=function(){this.graphics.strokeColor=cc.Color.RED,this.graphics.lineWidth=2,this.graphics.circle(0,0,this.runPig.radius),this.graphics.stroke()},c([r(cc.Graphics)],u.prototype,"graphics",void 0),c([r(l.default)],u.prototype,"runPig",void 0),o=c([o],u),s.default=o,cc._RF.pop()},{}],ListView:[function(t,e,n){"use strict";var i;cc._RF.push(e,"6139c2KqrhI3oIkhNxOVZnM","ListView");var o=e,r=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var s,a,c=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.ListView=void 0;var l=cc.ScrollView.EventType,u=cc.Enum({HORIZONTAL:0,VERTICAL:1}),h=cc._decorator;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.scrollView=null,t.template=null,t.cellSize=cc.size(0,0),t.direction=u.VERTICAL,t.spawnCount=0,t.spacing=0,t._createFun=null,t._updateFunc=null,t.targetFunc=null,t._items=[],t._content=null,t._lastContentPos=cc.v2(0,0),t._targetX=0,t._inited=!1,t._nodePool=[],t.datas=[],t.generateArr=[],t}o=h.ccclass,h.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(p,s=cc.Component),(a=p).prototype.start=function(){},p.create=function(t,e,n){return(t=t.addComponent(a)).scrollView=e||t.scrollView,t.cellSize=n,t.initialize(e,n),t},p.prototype.initialize=function(t,e){var n;this._inited=!0,this._nodePool=[],this.scrollView=t||this.scrollView,this.direction=this.scrollView.vertical?u.VERTICAL:u.HORIZONTAL,this.setCellSize(e),this._content=this.scrollView.content,(t=this._content.getComponent(cc.Layout))&&(t.enabled=!1),this.direction==u.VERTICAL?(n=this.scrollView.node.height+2*(e.height+this.spacing),this.spawnCount=Math.ceil(n/e.height)):(n=this.scrollView.node.width+2*(e.width+this.spacing),this.spawnCount=Math.ceil(n/e.width)),this._lastContentPos=this._content.position,this._bindEvent()},p.prototype.setSpacing=function(t){this.spacing=t},p.prototype._bindEvent=function(){var t;this.scrollView&&((t=new cc.Component.EventHandler).target=this.node,t.component="ListView",t.handler="scrollEvent",t.customEventData="",this.scrollView.scrollEvents.push(t))},p.prototype.bindData=function(t,e){null!=t&&(this._items=[],this.datas=[],this.datas=t,this._inited||this.initialize(this.scrollView,this.getCellSize()),this.removeAllVisableChildren(),this.direction==u.VERTICAL?this._content.height=this.datas.length*(this.getCellSize().height+this.spacing)-this.spacing:this._content.width=this.datas.length*(this.getCellSize().width+this.spacing)-this.spacing,this.generateArr.push(this.addItems()),this.scrollView.stopAutoScroll(),this.scrollView.scrollToOffset(cc.v2(0,0)),e&&t.length>0&&this.playAction())},p.prototype.updateDataWithCallback=function(t,e,n){null!=t&&(this._items=[],this.datas=[],this.datas=t,this._inited||this.initialize(this.scrollView,this.getCellSize()),this.removeAllVisableChildren(),this.direction==u.VERTICAL?this._content.height=this.datas.length*(this.getCellSize().height+this.spacing)-this.spacing:this._content.width=this.datas.length*(this.getCellSize().width+this.spacing)-this.spacing,this.generateArr.push(this.addItems()),this.scrollView.scrollToOffset(cc.v2(0,0)),e&&t.length>0&&n&&this.playAction(n))},p.prototype.playAction=function(t){var e=this;e.setTouchEnabled(!1),this._targetX=this._items[0]._item.x;for(var n=this,i=0;i<this._items.length;i++)!function(i){var o=n._items[i]._item,r=o.getActionByTag(666);r&&!r.isDone()&&o.stopAction(r),o.opacity=0,o.x=n._targetX-100,r=cc.moveTo(.3,cc.v2(n._targetX,o.y)),r=cc.sequence(cc.delayTime(.05*i),cc.callFunc(function(){o.opacity=255}),r),(r=i==n._items.length-1?cc.sequence(r,cc.callFunc(function(){e.setTouchEnabled(!0),t&&t()})):r).setTag(666),o.runAction(r)}(i)},p.prototype.updateData=function(t){if(null!=t){this.datas=t,this.direction==u.VERTICAL?this._content.height=this.datas.length*(this.getCellSize().height+this.spacing)-this.spacing:this._content.width=this.datas.length*(this.getCellSize().width+this.spacing)-this.spacing;for(var e,n=0;n<this._items.length;n++)this.datas[n]&&(e=this._items[n]._item,this._items[n]._index=n,this.updateItem(e,this.datas[n],n))}},p.prototype.addItem=function(t){var e,n;this._items.length<=this.spawnCount&&(e=this._items.length,n=null,(n=this._nodePool.length>0?this._nodePool.pop():this._createFun?this._createFun(t,e):cc.instantiate(this.template)).active=!1,this._content.addChild(n),n.active=!1,this.updateItem(n,t,e),n.active=!1,this._items.push({_item:n,_index:e}))},p.prototype.addItems=function(){var t,e,n,i,o,r;return c(this,function(s){switch(s.label){case 0:for(o=this._items.length,e=0;e<this.datas.length;e++)this._items.length<=this.spawnCount&&(i=this._items.length,r=null,this._items.push({_item:r,_index:i}));if(o==this._items.length)return[2];t=(new Date).getTime(),e=0,s.label=1;case 1:return e<this._items.length?(n=this._items[e],(new Date).getTime()-t>8?[4]:[3,3]):[3,5];case 2:s.sent(),t=(new Date).getTime(),s.label=3;case 3:n&&!n._item&&cc.isValid(this._content,!0)&&(i=n._index,o=this.datas[i],r=null,r=this._nodePool.length>0?this._nodePool.pop():this._createFun?this._createFun(o,i):cc.instantiate(this.template),n._item=r,this._content.addChild(r),this.updateItem(r,o,i)),s.label=4;case 4:return e++,[3,1];case 5:return[2]}})},p.prototype.addItems2=function(){for(var t,e=this,n=this._items.length,i=0;i<this.datas.length;i++)this._items.length<=this.spawnCount&&(t=this._items.length,this._items.push({_item:null,_index:t}));n!=this._items.length&&window.async.eachLimit(this._items,1,function(t,n){var i,o,r;t&&!t._item&&cc.isValid(e._content,!0)&&(i=t._index,o=e.datas[i],r=e._nodePool.length>0?e._nodePool.pop():e._createFun?e._createFun(o,i):cc.instantiate(e.template),t._item=r,e._content.addChild(r),e.updateItem(r,o,i)),setTimeout(n,0)})},p.prototype.update=function(){var t;this.generateArr.length>0&&((t=this.generateArr.pop()).next().done||this.generateArr.push(t))},p.prototype.updateItem=function(t,e,n){t&&(t.position=this.getItemPosition(t,n),null!=this._updateFunc&&this._updateFunc(t,e,n))},p.prototype.getPositionInView=function(t){return t=t.parent.convertToWorldSpaceAR(t.position),this.scrollView.node.convertToNodeSpaceAR(t)},p.prototype.scrollEvent=function(t,e){switch(e){case l.SCROLLING:this.onScroll();break;case l.SCROLL_ENDED:}},p.prototype.onScroll=function(){var t=cc.v2(0,0);for(this.direction==u.VERTICAL?t.y=this._lastContentPos.y>this._content.position.y?-1:1:t.x=this._lastContentPos.x>this._content.position.x?-1:1;this.checkItem(t););this._lastContentPos=this._content.position},p.prototype.checkItem=function(t){var e=-1==t.x||1==t.y?0:this._items.length-1,n=this._items[e];if(n){var i=n._item;if(i){var o=n._index,r=this.getCellSize(),s=this._content.convertToWorldSpaceAR(i.position),a=o+this._items.length*(-1==t.x||1==t.y?1:-1);if(a>=0&&a<this.datas.length){var c,l=this.scrollView.node,u=this.scrollView.node.convertToWorldSpaceAR(cc.v2(0,0).sub(cc.v2(l.anchorX*l.width,l.height*l.anchorY)));if(e=cc.rect(u.x-this.spacing,u.y-this.spacing,l.width+2*this.spacing,l.height+2*this.spacing),o=s.add(cc.v3(-r.width*i.anchorX,r.height*(1-i.anchorY))),u=s.add(cc.v3(r.width*(1-i.anchorX),r.height*(1-i.anchorY))),l=s.sub(cc.v3(r.width*i.anchorX,r.height*i.anchorY)),r=s.sub(cc.v3(-r.width*(1-i.anchorX),r.height*i.anchorY)),!(e.contains(u)||e.contains(o)||e.contains(l)||e.contains(r)))return r=n._index=a,-1==t.x||1==t.y?(c=this._items.shift(),this._items.push(c)):(c=this._items.pop(),this._items.unshift(c),r=a+this._items.length),this.updateItem(i,this.datas[n._index],n._index),this.targetFunc&&this.targetFunc(r),!0}return!1}}},p.prototype.setCurrentIndex=function(t){var e,n;t>=this.datas.length||(e=t-Math.floor(this._items.length/2),e=Math.max(0,e),e=Math.min(e,this.datas.length-this._items.length),this.updateItemToIndex(e),e=(n=this.getCellAtIndex(t)).getPosition().add(cc.v2(n.width*(.5-n.anchorX),n.height*(.5-n.anchorY))),t=this.scrollView.content,n=(n=this.scrollView.node).convertToWorldSpace(cc.v2(n.width/2,n.height/2)),n=t.convertToNodeSpaceAR(n).sub(e),(n=(e=this.scrollView.getComponent(cc.ScrollView)).getScrollOffset().add(n)).x=-n.x,e.scrollToOffset(n))},p.prototype.updateItemToIndex=function(t){for(var e=0;e<this._items.length;e++){var n=this._items[e],i=n._item;n._index=t+e,this.updateItem(i,this.datas[n._index],n._index)}},p.prototype.setContentOffset=function(t){this.scrollView.scrollToOffset(t,2)},p.prototype.getContentOffset=function(){return this.scrollView.getScrollOffset()},p.prototype.setCreateCell=function(t){this._createFun=t},p.prototype.setUpdateCell=function(t){this._updateFunc=t},p.prototype.setTargetFunc=function(t){this.targetFunc=t},p.prototype.getCellSize=function(){return 0==this.cellSize.height&&this.template&&(this.cellSize=this.template.getContentSize()),this.cellSize},p.prototype.setCellSize=function(t){t&&(this.cellSize=t)},p.prototype.getCellAtIndex=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]._index==t)return this._items[e]._item},p.prototype.getItemPosition=function(t,e){var n;return this.direction==u.VERTICAL?(n=this.datas.length*(this.getCellSize().height+this.spacing),cc.v2(0,n-(t.height+this.spacing)*(e+1)).sub(cc.v2(this._content.width*this._content.anchorX,this._content.height*this._content.anchorY)).add(cc.v2(t.width*t.anchorX,t.height*t.anchorY))):(this.datas.length,this.getCellSize().width,this.spacing,cc.v2((t.width+this.spacing)*e,0).sub(cc.v2(this._content.width*this._content.anchorX,this._content.height*this._content.anchorY)).add(cc.v2(t.width*t.anchorX,t.height*t.anchorY)))},p.prototype.updateDataByIndex=function(t,e){if(!(t<0)){this.datas[t]=e;for(var n=0;n<this._items.length;n++)if(this._items[n]._index==t&&this._items[n]._item){null!=this._updateFunc&&this._updateFunc(this._items[n]._item,e,t);break}}},p.prototype.updateDataForAll=function(t){this.datas=t;for(var e=0;e<this._items.length;e++)null!=this._updateFunc&&this._items[e]._item&&this._updateFunc(this._items[e]._item,t[e],e)},p.prototype.removeAllVisableChildren=function(){for(var t=this._content.children,e=t.length-1;e>=0;e--){var n=t[e];n.active&&(n.removeFromParent(!1),this._nodePool.push(n))}},p.prototype.setTouchEnabled=function(t){var e="mask"+this.node.uuid,n=this.node.getChildByName(e);null==n&&((n=new cc.Node).addComponent(cc.BlockInputEvents),n.setContentSize(2*cc.winSize.width,2*cc.winSize.height),n.name=e,this.node.addChild(n)),n.active=!t},p.prototype.getNodeIndex=function(t){for(var e=0;e<this._items.length;e++){var n=this._items[e];if(n._item==t)return n._index}return-1},p.prototype.getNodeData=function(t){for(var e=0;e<this._items.length;e++){var n=this._items[e];if(n._item==t)return this.datas[n._index]}return null},p.prototype.onDestroy=function(){this._nodePool.forEach(function(t){cc.isValid(t)&&t.destroy()}),this._nodePool=[]},o=a=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([o],p),r.ListView=o,cc._RF.pop()},{}],SlideRotate:[function(t,e,n){"use strict";var i;cc._RF.push(e,"accf0eURNBO6Y0BOxSrMgcQ","SlideRotate");var o=t,r=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var s,a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(r,"__esModule",{value:!0});var l=o("runPig"),u=o("sound"),h=o("index"),p=o("env"),d=o("platform-const"),f=o("vibrate"),v=o("user-data"),g=(y=cc._decorator).ccclass;o=y.property;var y=y.menu;function m(){var t=null!==s&&s.apply(this,arguments)||this;return t.soilNode=null,t.m_bIsMoving=!1,t.x2=0,t.y2=0,t.startAngle=0,t.startWidth=0,t.minIndex=-1,t.tmpAngle=1/0,t._runPig=null,t.animation=null,t.isGo=!1,t.myUserArr=[],t.startMyUserArr=[],t.miniAngle=1/0,t.maxAngle=1/0,t.isMax=!1,t.isMini=!1,t.isMoved=!0,t.startPos=null,t.dangzhuIndex=-1,t.miniCirleIndex=-1,t.maxCirleIndex=-1,t.tipIndex=-1,t.isTiped=!1,t.tipAni=!1,t.tipfishId=-1,t.tipFish=null,t.showTipHand=!0,t.tipHeadCirleIdx=-1,t.isCalcNodeFlag=[],t.worldPos3Arr=[],t.canStandCirleIdxArr=[],t.rotateCheckAngle=0,t}(function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(m,s=cc.Component),(a=m).prototype.onLoad=function(){this.isMoved=!0;var t=this.node.parent.parent.parent.getComponent(l.default);null!=t&&(this._runPig=t),null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(g.default)),this.animation=this.getComponent(cc.Animation),this.node.height=110},m.prototype.start=function(){this.tmpAngle!=1/0&&(this.node.angle=this.tmpAngle,this.startAngle=this.node.angle),this.isGo||((s=h.randomInt(0,100))>26&&s<63?this.animation.play("Fish_Standby1"):s<26?this.animation.play("Fish_Standby2"):this.animation.play("Fish_Standby")),this.adjustNumber(!1);for(var t=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),e=this.node.width*this.node.scale,n=this._runPig.circleArr,i=this._runPig.circleNodeArr,o=0;o<n.length;o++){var r=i[o].parent.convertToWorldSpaceAR(i[o].getPosition());this.worldPos3Arr.push(r),Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)>Math.pow(e,2)?this.isCalcNodeFlag.push(!1):this.isCalcNodeFlag.push(!0)}var s=(a=this.rotatePoint())[0],a=a[1];this.checkMove(!1,s,a)},m.prototype.adjustNumber=function(t){var e;void 0===t&&(t=!0),h.platform.string()===d.PlatformCode.Web&&null!=(e=this.node.getChildByName("1").getChildByName("indexNode"))&&(e=cc.find("bg",e),t?(e.stopAllActions(),cc.tween(e).to(.2,{angle:-this.node.angle}).start()):e.angle=-this.node.angle)},m.prototype.jump=function(){var t=this;this.isGo=!0,-1!=this.setIntervalID&&(clearInterval(this.setIntervalID),this.setIntervalID=-1),null!=this.tipFish&&(this.tipFish.removeFromParent(),this.tipAni=!1),this.animation.play("Fish_PopUp"),this.headNode.setAnimation(0,"PopUp",!1),this.tailNode.setAnimation(0,"PopUp",!1);var e=this._runPig.lvlJsonConfig.json[0][this._runPig.currentLevel];v.userData.plusOneFishPopCount(),this.animation.on("finished",function(){t.afterJump(),t.animation.off("finished",null,t)},this),this._runPig.options.isNeverOver||h.platform.trackEvent("tipUseSuccess",{level:this._runPig.currentLevel+1,levelname:e,tipfishid:this.tipIndex,type:"video"})},m.prototype.afterJump=function(){var t=this,e=this.rotatePoint(),n=e[0],i=e[1],o=this.node.x,r=this.node.y,c=this.calculateNewPoit2(o,r,n,i),l=c[0],u=c[1];this.node.setSiblingIndex(this.node.parent.childrenCount),this.animation.play("Fish_flyIdle"),this.headNode.setAnimation(0,"flyIdle",!0),this.tailNode.setAnimation(0,"flyIdle",!0),this._runPig.runFishCount++,this._runPig.deleteUserArr(this.myUserArr),this.myUserArr=[],this.unregisterTouch();var v=s.sound.play2(this._runPig.game1_rungo,1,!1);p.vibrate.play(p.VibrateNewType.SHORT),h.delayCallFunc(function(){cc.audioEngine.stopEffect(v)},1e3);var g=this._runPig.lvlJsonConfig.json[0][this._runPig.currentLevel];if(this.removeTipFish2(),this.palyJumpFishAni(),this._runPig.getAllPigsArrLength()+this._runPig.tortoiseUserArr.length+this._runPig.kissFishNodesUserArr.length==0){this._runPig.octopusClose(),d.userData.setLvlCountDataPlus("end",this._runPig.currentLevel+1);var y=0;this._runPig.isGetFragment()?(this._runPig.getFragmentAnimation(),y=2500):this._runPig.isHaveFragment()&&(this._runPig.fragmentDisappearAnimation(),y=1300);var _=function(e){void 0===e&&(e=100),h.delayCallFunc(function(){p.vibrate.play(p.VibrateNewType.LONG)},400),a.env.mode==a.EnvMode.TEST&&a.env.noAds;var n=t._runPig.lvlJsonConfig.json[0][t._runPig.currentLevel],i=new Date,o=(i-t._runPig.playDate)/1e3;t._runPig.playDate=i;var r=0;d.userData.isCollectFragmentsData(t._runPig.currentLevel)&&(r=1),h.delayCallFunc(function(){h.platform.trackEvent("endmainLevel",{videoNum:t._runPig.currentLvlAdsCount,usetips:t._runPig.adsCount,level:t._runPig.currentLevel+1,levelname:n,cnt:d.userData.getLvlCountDataByTpye("end",t._runPig.currentLevel+1),over_time:o,pieceGet:t._runPig.peceget,pieceFinish:r,pieceSteps:t._runPig.level_step,pieceTaskSteps:t._runPig.stepCount,passage:t._runPig.chapterIdx}),t._runPig.nextGame()},e)};h.delayCallFunc(function(){var e=d.userData.getCurrentLvl();!t._runPig.isGlass&&t._runPig.currentLevel>e&&!a.env.noAds?t._runPig.levelEndAnimation(function(){m.PanelManager.ins.open("prefab/panel/prizedrawPanel",{goNextFunc:_,level:t._runPig.currentLevel})}):(t._runPig.settingBtn.interactable=!1,h.delayCallFunc(function(){t._runPig.settingBtn.interactable=!0},4e3),_(2e3))},y)}this._runPig.updateMap();var P=this.node.convertToWorldSpaceAR(this.runXY),b=this.node.parent.convertToNodeSpaceAR(P),C=this.runBezierAction(this.node.position,b,new f(l,u));this.node.runAction(C),d.userData.getNewBieDataByName(g)&&"P1LV2Study"==g&&9==this.tipIndex&&(this._runPig.newbiwStep=1,this.showTipHand=!1,this._runPig.newbieNext())},m.prototype.checkGo=function(t,e){var n=this;void 0===t&&(t=!0);for(var i=(s=this.rotatePoint())[0],o=s[1],r=this.node.x,s=this.node.y,a=(s=(r=this.calculateNewPoit2(r,s,i,o))[0],i=r[1],o=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),r=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(s,i)),this._runPig.node.convertToNodeSpaceAR(o)),c=this._runPig.node.convertToNodeSpaceAR(r),l=this._runPig.circleArr,d=this._runPig.circleNodeArr,g=[],y=!0,m=0;m<l.length;m++){var _=l[m];if(!this._runPig.deletIdxMpa.has(l[m].uuid)){var P=d[m].parent.convertToWorldSpaceAR(d[m].getPosition());P=this._runPig.node.convertToNodeSpaceAR(P),(C=_.calculateDistanceToSegment(a.x,a.y,c.x,c.y,P.x,P.y,this._runPig.radius))<_.runRadius&&this._runPig.isUserArr.includes(m)&&!this.myUserArr.includes(m)&&(y=!1,g.push([m,P]))}}if(y&&this._runPig.isGlass){for(var b=0,C=W=(W=[]).concat(this._runPig.glassBottleNodes.children).concat(this._runPig.cannedNodes.children).concat(this._runPig.cansNodes.children);b<C.length;b++){U=G[(T=(S=C[b]).getComponent(cc.Component)).idx].parent.convertToWorldSpaceAR(G[T.idx].getPosition());var A=G[T.idx2].parent.convertToWorldSpaceAR(G[T.idx2].getPosition());if(this.isIntersecting(y,m,U,A)){H=this._runPig.node.convertToNodeSpaceAR(U);var w=this._runPig.node.convertToNodeSpaceAR(A);M.push([T.idx,H]),M.push([T.idx2,w]),V=!1;break}}if(y)for(var x=0,N=this._runPig.pigs.children;x<N.length;x++){var S,T;if((S=N[x])!=this.node&&null!=(T=S.getComponent(n))){U=S.parent.convertToWorldSpaceAR(S.getPosition());var F=T.rotatePoint(),I=F[0],O=F[1];if(A=S.parent.convertToWorldSpaceAR(new cc.Vec2(I,O)),this.isIntersecting(y,m,U,A)){var R=this.node.parent.convertToWorldSpaceAR(S.getPosition()),E=0;for(B=0;B<j.length;B++){var k=G[B].parent.convertToWorldSpaceAR(G[B].getPosition());Math.pow(R.x-k.x,2)+Math.pow(R.y-k.y,2)<5&&(E=B)}H=this._runPig.node.convertToNodeSpaceAR(U),w=this._runPig.node.convertToNodeSpaceAR(A),M.push([E,H]),M.push([E,w]),V=!1;break}}}}if(y){var M,D,L,B;"level15"!=(o=this._runPig.lvlConfig.json[0][this._runPig.currentLevel])&&"level3"!=o&&"level5"!=o||(M=new Date,this._runPig.runFishCount++,r=(M-this._runPig.lastRunfishDte)/1e3,h.platform.trackEvent("runFish",{fishid:this.tipIndex,level:this._runPig.currentLevel+1,levelname:o,count:this._runPig.runFishCount,subTime:r}),this._runPig.lastRunfishDte=new Date),v.userData.getNewBieDataByName(o)&&("level1"==o?3==this.tipIndex?(this._runPig.newbiwStep=2,this.showTipHand=!1,this._runPig.newbieNext()):2==this.tipIndex&&(this._runPig.newbiwStep=3,this._runPig.newbieNext()):"level2"==o?9==this.tipIndex&&(this._runPig.newbiwStep=1,this.showTipHand=!1,this._runPig.newbieNext()):"level5"==o?10==this.tipIndex&&(D=this.node.parent.getChildByName("tipFish2"))&&D.removeFromParent():"level3"==o&&47==this.tipIndex&&(D=this.node.parent.getChildByName("tipFish2"))&&D.removeFromParent()),this.isTiped&&("level2"==o&&13==this._runPig.noViewTipFishIdx||h.platform.trackEvent("tipUseSuccess",{level:this._runPig.currentLevel+1,levelname:o,tipfishid:this.tipIndex})),p.env.mode!=p.EnvMode.TEST||p.env.noAds||(null==this._runPig.tipArr[o]&&(this._runPig.tipArr[o]=[]),this._runPig.tipArr[o].push(this.tipIndex+","+e)),null!=this.tipFish&&(this.tipFish.removeFromParent(),this.tipAni=!1),this._runPig.deleteUserArr(this.myUserArr),this.myUserArr=[],this.isGo=!0,this.unregisterTouch(),this.animation.play("Fish_Move"),this.node.getChildByName("Soil").active=!0;var j=u.sound.play2(this._runPig.game1_fish3,1,!0);f.vibrate.play(f.VibrateNewType.SHORT),h.delayCallFunc(function(){cc.audioEngine.stopEffect(j)},1e3),window.arr=this._runPig.getAllPigsArrLength(),this._runPig.getAllPigsArrLength()+this._runPig.tortoiseUserArr.length+this._runPig.kissFishNodesUserArr.length==0&&(u.sound.play(u.Sound.WIN),h.delayCallFunc(function(){f.vibrate.play(f.VibrateNewType.LONG)},400),p.env.mode==p.EnvMode.TEST&&p.env.noAds,L=this._runPig.lvlConfig.json[0][this._runPig.currentLevel],v.userData.setLvlCountDataPlus("end",this._runPig.currentLevel+1),B=((M=new Date)-this._runPig.playDate)/1e3,this._runPig.playDate=M,h.delayCallFunc(function(){h.platform.trackEvent("endmainLevel",{videoNum:n._runPig.currentLvlAdsCount,usetips:n._runPig.adsCount,level:n._runPig.currentLevel+1,levelname:L,cnt:v.userData.getLvlCountDataByTpye("end",n._runPig.currentLevel+1),over_time:B}),n._runPig.showSuccessPanel(function(){n._runPig.nextGame()})},2e3)),this._runPig.updateMap(),cc.tween(this.node).delay(.1).to(4,{position:cc.v2(s,i)}).call(function(){n.node.removeFromParent()}).start()}else{var U=1/0,V=-1,H=(i=(s=this.rotatePoint())[0],s=s[1],s=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(i,s)),this._runPig.node.convertToNodeSpaceAR(s)),W=0;for(b=g;W<b.length;W++){x=(G=b[W])[0];var G=G[1];U>(C=Math.sqrt(Math.pow(G.x-H.x,2)+Math.pow(G.y-H.y,2)))&&(U=C,V=x)}t&&this._runPig.playAni(V)}},m.prototype.isArrayContainAnother=function(t,e){return e.some(function(e){return t.includes(e)})},m.prototype.calculateNewPoit=function(t,e,n,i){var o=(e-i)/(t-n),r=e-o*t,s=0,a=0;return Math.abs(t-n)<2?(s=t,a=i<e?-1e3:1e3):n<t?a=o*(s=-1e3)+r:t<n&&(a=o*(s=1e3)+r),[s,a]},m.prototype.calculateNewPoit2=function(t,e,n,i){return e=this.calculateRotationAngle(new cc.Vec2(t,e),new cc.Vec2(n,i)),[3e3*Math.cos(e*Math.PI/180)+n,3e3*Math.sin(e*Math.PI/180)+i]},m.prototype.playAni=function(t,e){if((e=void 0!==e&&e)||this.startMyUserArr.toString()==this.myUserArr.toString())for(var n=this,i=0,o=this._runPig.pigs.children;i<o.length;i++)!function(e){if(e!=n.node){var i,o,r,s=e.getComponent(a);s&&s.myUserArr.includes(t)&&(i=(o=s.rotatePoint())[0],o=o[1],e.color=new cc.Color(255,0,0),r=cc.instantiate(n._runPig.talk2),e.parent.addChild(r),r.position=new cc.Vec2(i,o+70),s.animation.play("Fish_Wrong"),u.sound.play2(n._runPig.game1_error,1,!1),h.delayCallFunc(function(){s.playStandAni()},2e3),h.delayCallFunc(function(){r.removeFromParent()},2e3))}}(o[i])},m.prototype.playStandAni=function(){var t,e,n,i;this.isTiped?this.animation.play("Fish_Tip"):(t=this.animation.getAnimationState("Fish_Standby1"),e=this.animation.getAnimationState("Fish_Standby2"),n=this.animation.getAnimationState("Fish_Standby"),i=this.animation.getAnimationState("Fish_Wrong"),t.isPlaying||e.isPlaying||n.isPlaying||i.isPlaying||((i=h.randomInt(0,100))>26&&i<63?this.animation.play("Fish_Standby1"):i<26?this.animation.play("Fish_Standby2"):this.animation.play("Fish_Standby")))},m.prototype.playTipAni=function(){var t=(e=this.rotatePoint())[0],e=e[1];this.node.color=new cc.Color(255,0,0);var n=cc.instantiate(this._runPig.tip);n.name="tipNode"+this.tipIndex,this.node.parent.addChild(n),n.position=new cc.Vec2(t,e+70),this.animation.play("Fish_Tip"),u.sound.play2(this._runPig.game1_gettip,1,!1),cc.find("TalkFrame/label",n).getComponent(cc.Label).string=this._runPig.getTipsText(),h.delayCallFunc(function(){n.removeFromParent()},2e3)},m.prototype.checkAngeRange=function(t){void 0===t&&(t=!0);for(var e=this._runPig.circleArr,n=this._runPig.circleNodeArr,i=0,o=0,r=[],s=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),a=0;a<e.length;a++){var c=n[a].parent.convertToWorldSpaceAR(n[a].getPosition());r.push(c)}for(;i<359;){var l=!1,u=(i+this.node.angle+360)%360,h=this.rotatePoint(u),p=h[0],d=h[1],f=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(p,d));for(a=0;a<e.length;a++){var v=e[a];if(c=r[a],v.calculateDistanceToSegment(s.x,s.y,f.x,f.y,c.x,c.y,this._runPig.radius)<v.radius&&this._runPig.isUserArr.includes(a)&&!this.myUserArr.includes(a)){l=!0,this.miniCirleIndex=a,o=i+this.node.angle-1;break}this.canStandCirleIdxArr.includes(a)||this._runPig.isUserArr.includes(a)&&!this.myUserArr.includes(a)||Math.sqrt(Math.pow(c.x-f.x,2)+Math.pow(c.y-f.y,2))<v.radius&&this.canStandCirleIdxArr.push(a)}if(l)break;i++}for(var g=-359+i,y=(i=0,-1);g<i;){l=!1,u=(i+this.node.angle+360)%360;var m=this.rotatePoint(u);for(p=m[0],d=m[1],f=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(p,d)),a=0;a<e.length;a++){if(v=e[a],c=r[a],v.calculateDistanceToSegment(s.x,s.y,f.x,f.y,c.x,c.y,this._runPig.radius)<v.radius&&this._runPig.isUserArr.includes(a)&&!this.myUserArr.includes(a)){l=!0,y=i+this.node.angle+1,this.maxCirleIndex=a;break}this.canStandCirleIdxArr.includes(a)||Math.sqrt(Math.pow(c.x-f.x,2)+Math.pow(c.y-f.y,2))<v.radius&&(this._runPig.isUserArr.includes(a)&&!this.myUserArr.includes(a)||this.canStandCirleIdxArr.push(a))}if(l)break;i--}var _=y,P=o;P>360&&_>(P-=360)&&(_-=360),_<-360&&(_+=360)>P&&(P+=360);for(var b=[],C=0,A=this.canStandCirleIdxArr;C<A.length;C++){var w=A[C];c=r[w];var x=this.calculateRotationAngle(s,c),N=x>0?x-360:x+360;Math.abs(_-P)>4&&(N<_||P<N)&&(x<_||P<x)&&b.push(w)}return this.canStandCirleIdxArr=this.canStandCirleIdxArr.filter(function(t){return!b.includes(t)}),[y,o]},m.prototype.adjustPos=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(l.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.node.position,i=0;i<t.length;i++){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o);(o=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2)))<e&&(e=o,n=r)}this.node.position=n},m.prototype.checkMove=function(t,e,n){void 0===t&&(t=!0);for(var i=this._runPig.circleArr,o=this._runPig.circleNodeArr,r=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),s=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(e,n)),a=(Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),this._runPig.isUserArr.slice()),c=1/0,l=0,u=[],h=[],p=i.length-1;p>=0;p--)if(!a.includes(p)||this.myUserArr.includes(p)){var d=i[p],f=o[p].parent.convertToWorldSpaceAR(o[p].getPosition());h[p]=f;var v=Math.sqrt(Math.pow(f.x-s.x,2)+Math.pow(f.y-s.y,2));if((u[p]=v)<c&&(c=v,l=p),d.calculateDistanceToSegment(r.x,r.y,s.x,s.y,f.x,f.y,this._runPig.radius)<d.radius&&a.includes(p)&&!this.myUserArr.includes(p)){this.tmpAngle=1/0,this.dangzhuIndex!=p&&this.playAni(p),this.dangzhuIndex=p;break}}if(t)for(p=0;p<i.length;p++)255==o[p].color.b&&(o[p].color=new cc.Color(255,255,255)),this._runPig.showCircleArr[p].getChildByName("Circle_Choose").active=!1;if(this._runPig.isUserArr.includes(l)&&!this.myUserArr.includes(l))for(this.tmpAngle=1/0,p=0,this.tmpAngle=1/0,p=0;p<this._runPig.showCircleArr.length;p++)this._runPig.showCircleArr[p].getChildByName("Circle_Choose").active=!1;else(c<this._runPig.radius||!t)&&(t&&this.canStandCirleIdxArr.includes(l)&&(o[l].color=new cc.Color(0,0,255),this._runPig.showCircleArr[l].getChildByName("Circle_Choose").active=!0),t=o[l].parent.convertToWorldSpaceAR(o[l].getPosition()),this.tmpAngle=this.calculateRotationAngle(r,t))},m.prototype.rotatePoint=function(t){void 0===t&&(t=this.node.angle);var e=this.node.x,n=this.node.y,i=this.node.width*this.node.scale-20;return t=t*Math.PI/180,[i*Math.cos(t)+e,i*Math.sin(t)+n]},m.prototype.calculateRotationAngle=function(t,e){var n=e.x-t.x;return t=e.y-t.y,180*Math.atan2(t,n)/Math.PI},m.prototype.onTouchStart=function(t){if(this.date=new Date,!this.isGo&&(this._runPig.haveFishTouching||(this._runPig.touchfishId=this.tipIndex),this._runPig.touchfishId==this.tipIndex)){if(null!=this.tipFish){this.tipFish.removeFromParent(),this.tipAni=!1;for(var e=0,n=this.node.parent.children;e<n.length;e++){var i=n[e];"tipFish"==i.name&&i.removeFromParent()}}this.startAngle=this.node.angle,this._runPig.haveFishTouching=!0,this._runPig.inactiveTime=0,this.startPos=this.node.position,this.startMyUserArr=this.myUserArr.slice(),this.m_bIsMoving=!0,this.animation.play("Fish_Choose"),u.sound.play2(this._runPig.game1_fish1,1,!0);var o=(r=this.checkAngeRange())[0],r=r[1];this.rotateCheckAngle=this.node.angle,this.miniAngle=o,this.maxAngle=r,t.stopPropagation(),t=new Date,this.date,this.date=t}},m.prototype.onTouchMove=function(t){for(var e=this._runPig.lvlConfig.json[0][this._runPig.currentLevel],n=0,i=this.startMyUserArr;n<i.length;n++)if(e=i[n],this._runPig.isOnWater(e))return;if("level1"!=e||!v.userData.getNewBieDataByName(e)||3!=this.tipIndex){if("level2"==e&&v.userData.getNewBieDataByName(e)){if(13==this.tipIndex&&5==this._runPig.newbiwStep)return;if(6==this.tipIndex&&6==this._runPig.newbiwStep)return;if(13==this.tipIndex&&3==this._runPig.newbiwStep)return}this._runPig.touchfishId==this.tipIndex&&!this.isGo&&this.m_bIsMoving&&(null==(n=t.getTouches())||n.length>1||(i=t.getLocation(),e=this.isMax,n=this.isMini,this.checkDirection(i),i=(t=this.rotatePoint())[0],t=t[1],this.checkMove(!0,i,t),this.isMax&&!e&&(this.playAni(this.miniCirleIndex,!0),this._runPig.showCircleArr[this.miniCirleIndex].getChildByName("Circle_Warning").getComponent(cc.Animation).play()),this.isMini&&!n&&(this.playAni(this.maxCirleIndex,!0),this._runPig.showCircleArr[this.maxCirleIndex].getChildByName("Circle_Warning").getComponent(cc.Animation).play()),this._runPig.updateCicleNodeBySinglePig(this.node)))}},m.prototype.onTouchEnd=function(t){if(!this.isGo&&(this.isTiped&&(this.tipAni=!0,this.startTipFishAni()),this._runPig.touchfishId==this.tipIndex)){this._runPig.haveFishTouching=!1,this._runPig.touchfishId=-999,this.startAngle!=this.node.angle&&(this.isMoved=!1,this.startPos=null),this.dangzhuIndex=-1,this.miniAngle=1/0,this.maxAngle=1/0,this.playStandAni(),u.sound.stopAllEffects();for(var e=0;e<this._runPig.showCircleArr.length;e++)this._runPig.showCircleArr[e].getChildByName("Circle_Choose").active=!1;if(this.m_bIsMoving){this.m_bIsMoving=!1;var n=this.canStandCirleIdxArr[0];if(0!=this.canStandCirleIdxArr.length){for(var i=null,o=1/0,r=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),s=(a=this.rotatePoint())[0],a=a[1],c=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(s,a)),l=this._runPig.circleNodeArr,h=0,p=this.canStandCirleIdxArr;h<p.length;h++){var d=p[h],f=l[d].parent.convertToWorldSpaceAR(l[d].getPosition()),g=Math.sqrt(Math.pow(f.x-c.x,2)+Math.pow(f.y-c.y,2));g<o&&(o=g,i=f,n=d)}this.node.angle=null!=i?this.calculateRotationAngle(r,i):this.startAngle}else this.node.angle=this.startAngle;this.canStandCirleIdxArr=[],this._runPig.updateMap(),this.isMax=!1,this.isMini=!1,this.miniCirleIndex=-1,this.maxCirleIndex=-1,r=t.touch.getStartLocation(),t=t.touch.getLocation(),r=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)),t=this._runPig.lvlConfig.json[0][this._runPig.currentLevel],v.userData.getNewBieDataByName(t)&&("level2"==t?13==this.tipIndex&&9==n&&2==this._runPig.newbiwStep?(this._runPig.newbiwStep=3,this.showTipHand=!1,this._runPig.newbieNext()):7==this.tipIndex&&3==this._runPig.newbiwStep?32==n?(this._runPig.newbiwStep=4,this.showTipHand=!1,this._runPig.newbieNext()):17==n?this._runPig.newbieTipAni(7,17,32,90,0):24==n?this._runPig.newbieTipAni(7,24,32,60,0):31==n&&this._runPig.newbieTipAni(7,31,32,30,0):13==this.tipIndex?10==n&&4==this._runPig.newbiwStep&&(this._runPig.newbiwStep=5,this.showTipHand=!1,this._runPig.newbieNext()):6==this.tipIndex?16==n&&5==this._runPig.newbiwStep?(this._runPig.newbiwStep=6,this.showTipHand=!1,this._runPig.newbieNext()):9==n&&5==this._runPig.newbiwStep?this._runPig.newbieTipAni(6,9,16,210,270):8==n&&5==this._runPig.newbiwStep&&this._runPig.newbieTipAni(6,8,16,150,270):1==this.tipIndex&&(9==n&&6==this._runPig.newbiwStep&&(this._runPig.newbiwStep=7,this.showTipHand=!1,this._runPig.newbieNext()),3==n&&6==this._runPig.newbiwStep&&this._runPig.newbieTipAni(1,3,9,270,290)):(t="level1",2==this._runPig.newbiwStep&&(2==n?this._runPig.newbieTipAni(2,2,13,90,0):7==n?this._runPig.newbieTipAni(2,7,13,60,0):12==n&&this._runPig.newbieTipAni(2,12,13,30,0)))),this.checkGo(r<3,n),this.isMoved=!0,this.tmpAngle=1/0,this.adjustNumber()}}},m.prototype.onTouchCancel=function(t){this.onTouchEnd(t)},m.prototype.calculateAngle=function(t){var e=t.x;return t=t.y,Math.atan2(t,e)*(180/Math.PI)%360},m.prototype.checkDirection=function(t){t=this.node.convertToNodeSpaceAR(t),t=this.calculateAngle(t)+(t=this.rotateCheckAngle),Math.abs(this.maxAngle-this.miniAngle)<2?(this.node.angle=t%360,this.rotateCheckAngle=t,this.isMax=!1,this.isMini=!1):t>this.maxAngle+1?(this.node.angle=this.maxAngle,this.rotateCheckAngle=this.maxAngle,this.isMax=!0):t<this.miniAngle-1?(this.node.angle=this.miniAngle,this.rotateCheckAngle=this.miniAngle,this.isMini=!0):(this.node.angle=t%360,this.rotateCheckAngle=t,this.isMax=!1,this.isMini=!1)},m.prototype.onDisable=function(){this.unregisterTouch()},m.prototype.registerTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},m.prototype.unregisterTouch=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},m.prototype.onEnable=function(){this.startAngle=this.node.angle,this.startWidth=this.node.width,this.registerTouch()},m.prototype.startTipFishAni=function(){this.tipAni=!0,this.tipfishId=h.randomInt(1,999999);for(var t=0,e=this.node.parent.children;t<e.length;t++){var n=e[t];"tipFish"==n.name&&n.removeFromParent()}this.tipAniFunc(this.tipfishId)},m.prototype.tipAniFunc=function(t){var e=this;if(cc.isValid(this.node)&&this.node.activeInHierarchy&&this.isTiped&&this.tipHeadCirleIdx>0&&this.tipAni&&this.tipfishId==t){this.tipFish=cc.instantiate(this.node),this.tipFish.pauseSystemEvents(!0),this.tipFish.opacity=0;var n=this.tipFish.getComponent(a);n.isGo=!0,n._runPig=this._runPig;var i=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.node.parent.parent.convertToNodeSpaceAR(i);this.node.parent.parent.addChild(this.tipFish),this.tipFish.position=o,this.tipFish.setSiblingIndex(1);var r=this.node.parent.getChildByName("tipNode"+this.tipIndex);null!=r?this.node.setSiblingIndex(r.getSiblingIndex()-1):this.node.setSiblingIndex(this.node.parent.childrenCount);var s=this._runPig.circleNodeArr[this.tipHeadCirleIdx],c=s.parent.convertToWorldSpaceAR(s.getPosition()),l=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),u=this.calculateRotationAngle(l,c);this.tipFish.angle=u,this.tipFish.name="tipFish",this.tipFish.getComponent(cc.Animation).play("Fish_Move");var p=this.tipFish.x,d=this.tipFish.y,f=this.node.width*this.node.scale-20,v=this.tipFish.angle*Math.PI/180,g=f*Math.cos(v)+p,y=f*Math.sin(v)+d,m=this.tipFish.x,_=this.tipFish.y,P=this.calculateNewPoit2(m,_,g,y),b=P[0],C=P[1],A=this.tipFish;cc.tween(this.tipFish).to(.1,{angle:u}).delay(.1).parallel(cc.tween().to(.3,{opacity:100}),cc.tween().to(4,{position:cc.v2(b,C)})).call(function(){A.removeFromParent()}).start(),h.delayCallFunc(function(){null!=e.tipFish&&cc.isValid(e.tipFish)&&e.tipAniFunc(t)},2e3)}},m.prototype.startTipFishAni2=function(t,e,n){this.tipAni=!0,this.tipfishId=h.randomInt(1,999999);for(var i=0,o=this.node.parent.children;i<o.length;i++){var r=o[i];"tipFish2"==r.name&&r.removeFromParent()}this.tipAniFunc2(this.tipfishId,t,e,n)},m.prototype.tipAniFunc2=function(t,e,n,i){var o=this,r=this.node.parent.getChildByName("tipFish2");if(cc.isValid(this.node)&&this.node.activeInHierarchy&&null==r){for(var s=!1,c=0,l=this.node.parent.children;c<l.length;c++){var u=l[c].getComponent(a);if(null!=u&&!u.isGo&&u.tipIndex==e&&u.showTipHand){s=!0;break}}s&&(this.tipFish=cc.instantiate(this.node),this.tipFish.pauseSystemEvents(!0),this.tipFish.opacity=100,this.tipFish.angle=n,this.tipFish.getComponent(cc.Animation).play("Fish_Choose"),this.tipFish.getComponent(a).isGo=!0,this.node.parent.addChild(this.tipFish),this.tipFish.name="tipFish2",null!=(r=this.node.parent.getChildByName("tipNode"+this.tipIndex))?this.node.setSiblingIndex(r.getSiblingIndex()-1):this.node.setSiblingIndex(this.node.parent.childrenCount),this.tipFish,i=cc.tween().call(function(){}).to(1,{angle:i}).delay(1).call(function(){o.tipFish.angle=n}).delay(1),cc.tween(this.tipFish).repeatForever(i).start())}},c([o(cc.Node)],m.prototype,"soilNode",void 0),y=a=c([g,y("Oper/SlideRotate")],m),r.default=y,cc._RF.pop()},{}],SuccessPanel:[function(t,e){"use strict";cc._RF.push(e,"1e02388lyJP1LaysqKyubXG","SuccessPanel");var n=t("user-data");cc.Class({extends:cc.Component,properties:{gemText:cc.Label},onLoad:function(){n.userData.showMask();var t=n.userData.getCurrentLvl(),e=.1+.005*(t>100?100:t-1);this.gemText.string="x"+Number(e).toFixed(3)},start:function(){},close:function(){var t;n.userData.hideMask(),this.node.destroy(),null!=(t=this.onClose)&&t.call(this)},onClose:function(){}}),cc._RF.pop()},{"user-data":"user-data"}],"base-layer":[function(t,e,n){"use strict";var i,o;cc._RF.push(e,"928cd0GgKRFQqnTj99FxaSp","base-layer");var r=t,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},o=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};var a,c=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},l=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(s,"__esModule",{value:!0});var u=r("index"),h=r("const");function p(){var t=null!==a&&a.apply(this,arguments)||this;return t.name=h.Name.DEFAULT,t}r=cc._decorator.ccclass,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(p,a=cc.Component),p.prototype.init=function(t){this.options=t},p.prototype.show=function(){this.onShow()},p.prototype.onShow=function(){},p.prototype.hide=function(){this.onHide()},p.prototype.onHide=function(){},p.prototype.close=function(){var t=this.node;t.emit(u.Event.BEFORE_NODE_REMOVE,t),t.active=!1,t.removeFromParent(),t.emit(u.Event.ON_NODE_REMOVE,t)},p.prototype.canShowBanner=function(){return c(this,void 0,Promise,function(){return l(this,function(){return[2,!1]})})},r=o([r],p),s.default=r,cc._RF.pop()},{}],"base-panel":[function(t,e,n){"use strict";var i;cc._RF.push(e,"71bdccoG0tMgY1icpl0OJlV","base-panel");var o=t,r=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var s,a=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},c=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},l=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0});var u=o("index"),h=o("common"),p=(d=cc._decorator).ccclass;o=d.property;var d=d.disallowMultiple;function f(){var t=null!==s&&s.apply(this,arguments)||this;return t.content=null,t.animDuration=.5,t.finishCallback=null,t.returnValue=null,t}(function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(f,s=cc.Component),f.prototype.show=function(t,e){void 0===e&&(e=this.animDuration),this.options=t,this.node.active=!0,this.init(this.options),this.updateDisplay(this.options),this.adjustUI()},f.prototype.hide=function(t){var e=this;h.tempDisableButton(t,1),h.disableTouch(this.node,!0);var n=this.node;n.active=!1,e.onHide&&e.onHide(),h.disableTouch(e.node,!1),e.finishCallback&&e.finishCallback(n,e.returnValue)},f.prototype.init=function(){},f.prototype.adjustUI=function(){var t;u.platform.canShowBanner()&&(t=u.platform.getBannerSize().height/u.platform.getSystemData().windowHeight*cc.view.getVisibleSize().height,null!=this.content&&(e=(cc.view.getVisibleSize().height-cc.view.getDesignResolutionSize().height)/2)<t&&(this.content.y+=t-e));var e=this.content.getComponent(cc.Widget);e&&(e.enabled=!0,e.updateAlignment(),e.enabled=!1);var n=this.content.getComponentsInChildren(cc.Widget);if(n)for(var i=0;i<n.length;i++){var o=n[i];o.enabled=!0,o.updateAlignment(),o.enabled=!1}},f.prototype.updateDisplay=function(){},f.prototype.onShow=function(){},f.prototype.onHide=function(){},f.prototype.setFinishCallback=function(t){this.finishCallback=t},f.prototype.setReturnValue=function(t){this.returnValue=t},f.prototype.canShowBanner=function(){return c(this,void 0,Promise,function(){return l(this,function(){return[2,!0]})})},f.prototype.playPanelShowAnim=function(t){var e,n=this;null!=this.content?((e=this.content).active=!0,e.scale=.5,e.opacity=0,cc.tween(e).to(t,{scale:1,opacity:255},{easing:"backOut"}).call(function(){n.onShow&&n.onShow()}).start()):this.onShow&&this.onShow()},a([o(cc.Node)],f.prototype,"content",void 0),d=a([p,d],f),r.default=d,cc._RF.pop()},{}],chooseLevelPanel:[function(t,e,n){"use strict";var i;cc._RF.push(e,"898ecuPzaNNpLFvEzQjcJc9","chooseLevelPanel");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},l=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},u=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(s,"__esModule",{value:!0});var h=o("index"),p=o("env"),d=o("user-data"),f=o("base-panel"),v=o("layer-manager");function g(){var t=null!==a&&a.apply(this,arguments)||this;return t.pageView=null,t.pageContent=null,t.page=null,t.lvlConfig=null,t.GMbtn=null,t.unLoackBtn=null,t.pageCount=12,t.btnArr=[],t.scrollView=null,t.itemTemplate=null,t.totalCount=0,t.nodePool=[],t.visibleItems=[],t.content=null,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(g,a=f.default),g.prototype.onShowGMbtns=function(){this.unLoackBtn.active=!this.unLoackBtn.active},g.prototype.initVirtualList=function(){this.lvlConfig=window.lvlConfig,this.totalCount=this.lvlConfig.json[0].length;var t=143*Math.ceil(this.totalCount/3)+10;this.content.height=t,this.initNodePool(),this.scrollView.node.on("scrolling",this.updateItems.bind(this)),this.updateItems()},g.prototype.initNodePool=function(){for(var t=3*Math.ceil(this.scrollView.node.height/133)+6,e=0;e<t;e++){var n=cc.instantiate(this.itemTemplate);n.active=!1,this.nodePool.push(n),this.content.addChild(n)}},g.prototype.updateItems=function(){var t=this,e=this.content.y,n=3*Math.ceil((e+this.scrollView.node.height)/143);this.visibleItems=this.visibleItems.filter(function(e){var i=e.index;return!(i<0||i>n)||(e.node.active=!1,t.nodePool.push(e.node),!1)});for(var i=function(e){if(e>=t.totalCount)return"continue";if(!t.visibleItems.some(function(t){return t.index===e})){var n=t.getItemNode(e);t.updateItem(n,e),t.visibleItems.push({node:n,index:e})}},o=0;o<=n;o++)i(o)},g.prototype.getItemNode=function(){var t=this.nodePool.pop();return t||(t=cc.instantiate(this.itemTemplate),this.content.addChild(t)),t.active=!0,t},g.prototype.updateItem=function(t,e){var n=Math.floor(e/3),i=e%3;t.x=181*i+0,t.y=143*-n-10;var o=d.userData.getCurrentLvl(),r=t.getComponent(cc.Button),s=t.getChildByName("Background");r.interactable=e<=o+1,s.color=e<=o+1?cc.Color.WHITE:new cc.Color(169,169,169),s.getChildByName("level_Current").active=e===d.userData.getCurrentLvl();var a=new cc.Component.EventHandler;a.target=this.node,a.component="chooseLevelPanel",a.handler="callback",a.customEventData=e.toString(),r.clickEvents=[a],cc.find("Background/Label",t).getComponent(cc.Label).string=e+1},g.prototype.start=function(){this.GMbtn.active=p.env.mode==p.EnvMode.TEST,this.initVirtualList();var t=d.userData.getCurrentLvl(),e=143*Math.floor(t/3);this.scrollView.scrollToOffset(cc.v2(0,e),.1)},g.prototype.unloackAll=function(){this.visibleItems.forEach(function(t){t.node.getChildByName("Background").color=cc.Color.WHITE,t.node.getComponent(cc.Button).interactable=!0})},g.prototype.callback=function(t){t=t.target,cc.find("Background/Label",t),this.hide(),this.onMiniGame()},g.prototype.onMiniGame=function(){return l(this,void 0,void 0,function(){return u(this,function(){return h.platform.showLoading(),v.LayerManager.ins.open("prefab/runPig/runPig",null),[2]})})},g.prototype.hideThis=function(){this.hide()},g.prototype.test=function(){},c([r(cc.JsonAsset)],g.prototype,"lvlConfig",void 0),c([r(cc.Node)],g.prototype,"GMbtn",void 0),c([r(cc.Node)],g.prototype,"unLoackBtn",void 0),c([r(cc.ScrollView)],g.prototype,"scrollView",void 0),c([r(cc.Node)],g.prototype,"content",void 0),c([r(cc.Prefab)],g.prototype,"itemTemplate",void 0),o=c([o],g),s.default=o,cc._RF.pop()},{}],circleNodeComp:[function(t,e,n){"use strict";var i;cc._RF.push(e,"7b053ldl+FBxYazw0sObUIT","circleNodeComp");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("events"),a=cc._decorator,c=a.ccclass;a.property;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isUse=!1,e.m_levelEventHandler=null,e}return o(e,t),e.prototype.setIsUse=function(t){this.isUse=t},e.prototype.onLoad=function(){this.node.getChildByName("Circle_Choose").on(cc.Node.EventType.TOUCH_START,this.onTouchEnd,this)},e.prototype.onTouchEnd=function(){s.operEvent.emit({action:"frogPoint",data:{node:this.node}})},e.prototype.onOperEvent=function(t){null!=t&&null!=t.data&&"close_Circle_Choose"==t.action&&(this.node.getChildByName("Circle_Choose").active=!1)},e.prototype.onDisable=function(){null!=this.m_levelEventHandler&&(this.m_levelEventHandler(),this.m_levelEventHandler=null)},e.prototype.onEnable=function(){this.m_levelEventHandler=s.operEvent.on(this.onOperEvent.bind(this))},r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{events:"events"}],clamComp:[function(t,e,n){"use strict";var i;cc._RF.push(e,"69a74JDLRRFJ4M+y6CK9R0w","clamComp");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("runPig"),a=t("initor"),c=t("sound"),l=t("events"),u=cc._decorator,h=u.ccclass;u.property;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._runPig=null,e.idx=-1,e.animation=null,e}return o(e,t),e.prototype.adjustPos=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(s.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.node.position,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));a<e&&(e=a,n=r,this.idx=i)}this.node.position=n},e.prototype.onLoad=function(){var t=this;this.animation=this.node.getComponent(cc.Animation);var e=a.randomInt(0,40)/10;a.delayCallFunc(function(){t.playIdleAni()},1e3*e)},e.prototype.onTouchEnd=function(){this._runPig.inactiveTime=0,l.operEvent.emit({action:"close_Circle_Choose",data:{}}),this.playCollisionAni()},e.prototype.playIdleAni=function(){null!=this.animation&&this.animation.play("obstacle1_idle")},e.prototype.playCollisionAni=function(){null!=this.animation&&(this.animation.play("obstacle1_collision"),c.sound.play2(this._runPig.game1_error,1,!1))},e.prototype.registerTouch=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.unregisterTouch=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onDisable=function(){this.unregisterTouch()},e.prototype.onEnable=function(){this.registerTouch()},r([h],e)}(cc.Component);n.default=p,cc._RF.pop()},{events:"events",initor:"initor",runPig:"runPig",sound:"sound"}],common:[function(t,e,n){"use strict";cc._RF.push(e,"019cdDl1/5C84V37TuQXznO","common");var i=n,o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(i,"__esModule",{value:!0}),i.delayCallFunc=i.copy=i.flatDeep=i.uniqueArray=i.getInArrayIndex=i.includeInArray=i.mergeDeep=i.isObject=i.clampStr=i.filterNullValues=i.filterOneRightTwoWarnOpt=i.removeTwoWarnOptions=i.questionThunk=i.randomChoice=i.shuffleArr=i.sleep=i.compareVersion=i.random=i.randomInt=i.isTouchInNode=i.disableTouch=i.tempDisableButton=i.disableBtn=i.disableAllTouch=i.showNode=i.curCanvas=i.getScreenHeight=i.getScreenWidth=void 0,n.weightedRandomIndex=n.calculateDistanceToLine=n.calculateDistanceToSegment=n.calculateRotationAngle=n.generateUUID=n.delayCallFunc=n.copy=n.flatDeep=n.uniqueArray=n.getInArrayIndex=n.includeInArray=n.mergeDeep=n.isObject=n.clampStr=n.filterNullValues=n.filterOneRightTwoWarnOpt=n.removeTwoWarnOptions=n.questionThunk=n.randomChoice=n.shuffleArr=n.sleep=n.compareVersion=n.random=n.randomInt=n.isTouchInNode=n.disableTouch=n.tempDisableButton=n.disableBtn=n.disableAllTouch=n.showNode=n.curCanvas=n.getScreenHeight=n.getScreenWidth=void 0,i.getScreenWidth=function(){return cc.view.getCanvasSize().width},i.getScreenHeight=function(){return cc.view.getCanvasSize().height},i.curCanvas=function(){var t=cc.director.getScene();return cc.find("Canvas",t)},i.showNode=function(t,e,n,i){void 0===i&&(i=0),null!=t&&(n&&(t.scale=0,cc.tween(t).delay(i).to(n,{scale:1}).start()),null!=t&&(t.active=e))};var s=null;function a(t,e){t.interactable=!e}function c(t){for(var e=t.length-1;e>=0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[n];t[n]=t[e],t[e]=i}return t}function l(t,e){return c(Object.assign([],t)).slice(0,e)}function u(t){return t&&"object"==typeof t&&!Array.isArray(t)}function h(t,e){if(null==t||null==e)return-1;for(var n=t.length,i=0;i<n;++i)if(e===t[i])return i;return-1}n.calculateRotationAngle=function(t,e){var n=e.x-t.x,i=e.y-t.y;return 180*Math.atan2(i,n)/Math.PI},i.disableAllTouch=function(t,e){void 0===e&&(e=!1),(null==s||e)&&(e=(e=cc.director.getScene().getComponentInChildren(cc.Canvas).node.children)[e.length-1],s=e.getComponent(cc.BlockInputEvents)),s.enabled=t},i.disableBtn=a,i.tempDisableButton=function(t,e){if(void 0===e&&(e=0),null!=t){t instanceof cc.Event.EventTouch&&(t=t.target);var n=null;if(t instanceof cc.Button?n=t:t instanceof cc.Node&&(n=t.getComponent(cc.Button)),null!=n){var i=function(){a(n,!1)};return a(n,!0),n.scheduleOnce(i,e),function(){i(),n.unschedule(i)}}}},i.disableTouch=function(t,e){e?t.pauseSystemEvents(!0):t.resumeSystemEvents(!0)},i.isTouchInNode=function(t,e){return null!=t&&null!=e&&(e=t.convertToNodeSpaceAR(e.getLocation())).x>=-t.width/2&&e.x<=t.width/2&&e.y>=-t.height/2&&e.y<=t.height/2},i.randomInt=function(t,e){return e=e-t+1,Math.floor(Math.random()*e+t)},i.random=function(t,e){return Math.random()*(e-t)+t},i.compareVersion=function(t,e){for(var n=t.split("."),i=e.split("."),o=Math.max(n.length,i.length);n.length<o;)n.push("0");for(;i.length<o;)i.push("0");for(var r=0;r<o;r++){var s=parseInt(n[r]),a=parseInt(i[r]);if(a<s)return 1;if(s<a)return-1}return 0},i.sleep=function(t,e){return new Promise(function(n){e?e.scheduleOnce(function(){n()},t):setTimeout(function(){n()},1e3*t)})},i.shuffleArr=c,i.randomChoice=l,i.questionThunk=function(t,e){var n=t.question.answer,i=[];return n.map(function(t,e){i.push({answer:0===e,desc:t,select:e})}),e?(e=i[2],i[2]=i[0],i[0]=e,t.question.qlist=i,t):(i=c(i),t.question.qlist=i,t)},i.removeTwoWarnOptions=function(t,e){void 0===e&&(e=!1);var n=[],i=[],o=c(t);if(e)return t.map(function(t){t.isTrue||n.push(t)}),n;for(var r=0;r<o.length&&2!=n.length;r++)o[r].isTrue?(o[r].tipOrHelp=!0,i.push(o[r])):(o[r].tipOrHelp=!1,n.push(o[r]));return n},i.filterOneRightTwoWarnOpt=function(t,e,n){var i=[],o=[];if(n=void 0!==n&&n)return t.map(function(t){t.isTrue&&(i.push(t.desc),o.push(t))}),{helps:i,cells:o};for(var r=0;r<t.length;r++)t[r].isTrue&&(i.push(t[r].desc),o.push(t[r]),t.tipOrHelp=!1,t.splice(r,1));var s=l(t,e);for(r=0;r<s.length;r++)s[r].tipOrHelp=!1,i.push(s[r].desc),o.push(s[r]);return{helps:i,cells:o}},i.filterNullValues=function(t,e){var n=t;(e=void 0!==e&&e)||(n=Object.assign({},t));for(var i=Object.keys(n),o=0;o<i.length;o++){var r=i[o],s=n[r];null!=s&&void 0!==s||delete n[r]}return n},i.clampStr=function(t,e,n){n=null==(n=void 0===n?null:n)?"...":n,e*=2;for(var i=function(t){for(var e,n=[],i=0,o=0;o<t.length;){var r=o;65039!=(e=t.charCodeAt(o++))&&(i?(n.push({v:65536+(i-55296<<10)+(e-56320),pos:r}),i=0):e>=55296&&e<=56319?i=e:n.push({v:e,pos:r}))}return n}(t),o=0,r=0,s=0;s<i.length;++s){var a=1.5;if(e<o+(a=i[s].v>=128?2:a))break;r=s,o+=a}return i.length-1==r?t:t.substring(0,i[r-(n?1:0)].pos+1)+n},i.isObject=u,i.mergeDeep=function t(e){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(!i.length)return e;var s=i.shift();if(u(e)&&u(s))for(var a in s)u(s[a])?(e[a]||Object.assign(e,((n={})[a]={},n)),t(e[a],s[a])):Object.assign(e,((n={})[a]=s[a],n));return t.apply(void 0,r([e],i))},i.includeInArray=function(t,e){return-1!==h(t,e)},i.getInArrayIndex=h,i.uniqueArray=function(t){return Array.from(new Set(t))},i.flatDeep=function t(e,n){return(n=void 0===n?1:n)>0?e.reduce(function(e,i){return e.concat(Array.isArray(i)?t(i,n-1):i)},[]):e.slice()},i.copy=function(t){return o({},t)},i.delayCallFunc=function(t,e){return e<=0?(t(),null):setTimeout(function(){t()},e)},cc._RF.pop()},{}],const:[function(t,e,n){"use strict";cc._RF.push(e,"d8b69PSVONJXYSuCodZZgEj","const");var i=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.Name=o.UnlockAllVideoCnt=o.ShareImage=o.ShareType=o.AnimationClipName=o.AdEvent=void 0,(i=o.AdEvent||(o.AdEvent={}))[i.VIDEO=0]="VIDEO",i[i.VIDEO_END=1]="VIDEO_END",i[i.VIDEO_SUC=2]="VIDEO_SUC",i[i.SHARE=3]="SHARE",i[i.SHARE_END=4]="SHARE_END",i[i.SHARE_SUC=5]="SHARE_SUC",(o.AnimationClipName||(o.AnimationClipName={})).GET_POWER="get-power",o.ShareType||(o.ShareType={}),o.ShareImage=new Map([]),o.UnlockAllVideoCnt=3,(o=o.Name||(o.Name={})).DEFAULT="default",o.GAME_LAYER="gameLayer",cc._RF.pop()},{}],crabNodeComp:[function(t,e,n){"use strict";var i;cc._RF.push(e,"e7f13/mgbxP65xIZArfOHIn","crabNodeComp");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("runPig"),a=t("initor"),c=t("sound"),l=t("events"),u=cc._decorator,h=u.ccclass,p=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchBox=null,e._runPig=null,e.idx=-1,e.startIdx=-1,e.tipfishId=-1,e.isGo=!1,e.isTiped=!1,e.tipAni=!1,e.setIntervalID=-1,e.tipIndex=-1,e.skeleton=null,e.tipFish=null,e.startIdle=!0,e.maxY=0,e.minY=0,e.maxX=0,e.minX=0,e.leftIdx=-1,e.rightIdx=-1,e.isPlayRightAni=!1,e.isPlayLeftAni=!1,e.isOnWater=!1,e}return o(e,t),e.prototype.adjustPos=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(s.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.node.position,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));a<e&&(e=a,n=r,this.idx=i)}this.node.position=n},e.prototype.updateIdx=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(s.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.idx,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));a<e&&(e=a,n=i)}return n},e.prototype.onLoad=function(){var t=this;this.skeleton=this.node.getComponent(sp.Skeleton);var e=a.randomInt(0,40)/10;a.delayCallFunc(function(){t.startIdle&&t.playIdleAni()},1e3*e)},e.prototype.onTouchStart=function(){if(l.operEvent.emit({action:"close_Circle_Choose",data:{node:this.node}}),this._runPig.inactiveTime=0,this._runPig.haveFishTouching||(this._runPig.touchfishId=this.tipIndex),this._runPig.touchfishId==this.tipIndex)if(this.isOnWater=!1,this._runPig.isOnWater(this.idx))this.isOnWater=!0;else{this.leftIdx=-1,this.rightIdx=-1,this.startIdx=this.idx,this.playChooseAni();for(var t=this._runPig.circleNodesArr,e=0,n=null,i=0,o=0;o<t.length;o++){var r=t[o];if(i=o,(e+=r.length)>this.idx){n=r;break}}for(var s=0,a=0,c=n;a<c.length&&(b=c[a]).getChildByName("label").getComponent(cc.Label).string!=this.idx;a++)s++;if(90==this.node.angle||270==this.node.angle){var u=s;for(o=1;o<=s;o++){var h=this.idx-o;if(null==t[i][s-o])break;if(this._runPig.isUserArr.includes(h)){this.leftIdx=h;break}u=s-o}var p=s;for(o=1;o<t[i].length&&(h=this.idx+o,null!=t[i][s+o]);o++){if(this._runPig.isUserArr.includes(h)){this.rightIdx=h;break}p=s+o}var d=t[i][u],f=t[i][p],v=d.parent.convertToWorldSpaceAR(d.position),g=f.parent.convertToWorldSpaceAR(f.position),y=this.node.parent.convertToNodeSpaceAR(v),m=this.node.parent.convertToNodeSpaceAR(g);this.minY=m.y,this.maxY=y.y}else if(150==this.node.angle||330==this.node.angle){for(var _=s,P=i;_>=0&&P>=0;){var b=void 0;if(0==P)break;if(P%2!=0){if(null==(b=t[P-1][_]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.leftIdx=h;break}P-=1,_=_}else{if(null==(b=t[P-1][_-1]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.leftIdx=h;break}P-=1,_-=1}}for(var C=s,A=i;null!=t[A+1];)if(b=void 0,A%2!=0){if(null==(b=t[A+1][C+1]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.rightIdx=h;break}A+=1,C+=1}else{if(null==(b=t[A+1][C]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.rightIdx=h;break}A+=1,C=C}d=t[P][_],f=t[A][C],v=d.parent.convertToWorldSpaceAR(d.position),g=f.parent.convertToWorldSpaceAR(f.position),y=this.node.parent.convertToNodeSpaceAR(v),m=this.node.parent.convertToNodeSpaceAR(g),this.maxY=y.y,this.minX=y.x,this.minY=m.y,this.maxX=m.x}else if(30==this.node.angle||210==this.node.angle){for(_=s,P=i;_>=0&&P>=0&&P<t.length&&(b=void 0,0!=P);)if(P%2!=0){if(null==(b=t[P-1][_+1]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.leftIdx=h;break}P-=1,_+=1}else{if(null==(b=t[P-1][_]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.leftIdx=h;break}P-=1,_=_}for(C=s,A=i;null!=t[A+1];)if(b=void 0,A%2!=0){if(null==(b=t[A+1][C]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.rightIdx=h;break}A+=1,C=C}else{if(null==(b=t[A+1][C-1]))break;if(h=this._runPig.showCircleArr.indexOf(b),this._runPig.isUserArr.includes(h)){this.rightIdx=h;break}A+=1,C-=1}d=t[P][_],f=t[A][C],v=d.parent.convertToWorldSpaceAR(d.position),g=f.parent.convertToWorldSpaceAR(f.position),y=this.node.parent.convertToNodeSpaceAR(v),m=this.node.parent.convertToNodeSpaceAR(g),this.minY=y.y,this.minX=y.x,this.maxY=m.y,this.maxX=m.x}}},e.prototype.onTouchMove=function(t){var e=this;if(this._runPig.touchfishId==this.tipIndex&&!this.isOnWater){var n=t.getLocation(),i=this.node.parent.convertToNodeSpaceAR(n);if(90==this.node.angle||270==this.node.angle)i.y>this.maxY?(i.y=this.maxY,-1==this.leftIdx||this.isPlayLeftAni||(this._runPig.playAni(this.leftIdx),this.isPlayLeftAni=!0,a.delayCallFunc(function(){e.isPlayLeftAni=!1},2e3))):i.y<this.minY&&(i.y=this.minY,-1==this.rightIdx||this.isPlayRightAni||(this._runPig.playAni(this.rightIdx),this.isPlayRightAni=!0,a.delayCallFunc(function(){e.isPlayRightAni=!1},2e3))),this.node.y=i.y;else if(150==this.node.angle||330==this.node.angle){i.x>this.maxX?(i.x=this.maxX,-1==this.rightIdx||this.isPlayRightAni||(this._runPig.playAni(this.rightIdx),this.isPlayRightAni=!0,a.delayCallFunc(function(){e.isPlayRightAni=!1},2e3))):i.x<this.minX&&(i.x=this.minX,-1==this.leftIdx||this.isPlayLeftAni||(this._runPig.playAni(this.leftIdx),this.isPlayLeftAni=!0,a.delayCallFunc(function(){e.isPlayLeftAni=!1},2e3)));var o=(this.maxY-this.minY)/(this.minX-this.maxX);if(isNaN(o))return;var r=this.maxY-o*this.minX;i.y=o*i.x+r,this.node.position=i}else if(30==this.node.angle||210==this.node.angle){if(i.x>this.maxX?(i.x=this.maxX,-1==this.rightIdx||this.isPlayRightAni||(this._runPig.playAni(this.rightIdx),this.isPlayRightAni=!0,a.delayCallFunc(function(){e.isPlayRightAni=!1},2e3))):i.x<this.minX&&(i.x=this.minX,-1==this.leftIdx||this.isPlayLeftAni||(this._runPig.playAni(this.leftIdx),this.isPlayLeftAni=!0,a.delayCallFunc(function(){e.isPlayLeftAni=!1},2e3))),o=(this.maxY-this.minY)/(this.maxX-this.minX),isNaN(o))return;r=this.maxY-o*this.maxX,i.y=o*i.x+r,this.node.position=i}var s=this._runPig.crabNodesUserArr.indexOf(this.idx);this._runPig.crabNodesUserArr.splice(s,1);var c=this.updateIdx();this._runPig.crabNodesUserArr.push(c),this._runPig.updateMap();for(var l=this._runPig.circleArr,u=0;u<l.length;u++)this._runPig.showCircleArr[u].getChildByName("Circle_Choose").active=!1;this._runPig.showCircleArr[c].getChildByName("Circle_Choose").active=!0}},e.prototype.onTouchEnd=function(){if(this._runPig.touchfishId==this.tipIndex)if(this.isOnWater)this.isOnWater=!1;else{var t=this._runPig.crabNodesUserArr.indexOf(this.idx);this._runPig.crabNodesUserArr.splice(t,1),this.adjustPos(),this._runPig.crabNodesUserArr.push(this.idx),this._runPig.showCircleArr[this.idx].getChildByName("Circle_Choose").active=!1,this._runPig.updateMap(),this.playIdleAni(),this.startIdx!=this.idx&&this._runPig.plusLevelStep()}},e.prototype.playSPAni=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=null),this.skeleton=this.node.getComponent(sp.Skeleton),null!=this.skeleton){this.skeleton.setAnimation(0,t,e);var i=!0;null!=n&&this.skeleton.setCompleteListener(function(){i&&(i=!1,n())})}},e.prototype.playIdleAni=function(){this.playSPAni("Crab_Idle",!0)},e.prototype.playChooseAni=function(){this.playSPAni("Crab_Choose",!0)},e.prototype.playCollisionAni=function(){var t=this;this.playSPAni("Crab_collision",!1),a.delayCallFunc(function(){"Crab_Choose"!=t.skeleton.animation&&t.playIdleAni()},1e3),c.sound.play2(this._runPig.game1_error,1,!1)},e.prototype.registerTouch=function(){this.touchBox.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchBox.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchBox.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchBox.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.unregisterTouch=function(){this.touchBox.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchBox.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchBox.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchBox.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onDisable=function(){this.unregisterTouch()},e.prototype.onEnable=function(){this.registerTouch()},e.prototype.rotatePoint=function(t){void 0===t&&(t=this.node.angle);var e=this.node.x,n=this.node.y,i=t*Math.PI/180;return[500*Math.cos(i)+e,500*Math.sin(i)+n]},e.prototype.calculateNewPoit2=function(t,e,n,i){var o=this.calculateRotationAngle(new cc.Vec2(t,e),new cc.Vec2(n,i));return[2500*Math.cos(o*Math.PI/180)+n,2500*Math.sin(o*Math.PI/180)+i]},e.prototype.calculateRotationAngle=function(t,e){var n=e.x-t.x,i=e.y-t.y;return 180*Math.atan2(i,n)/Math.PI},r([p(cc.Node)],e.prototype,"touchBox",void 0),r([h],e)}(cc.Component);n.default=d,cc._RF.pop()},{events:"events",initor:"initor",runPig:"runPig",sound:"sound"}],env:[function(t,e,n){"use strict";var i;cc._RF.push(e,"cd043R6Cw1C7Jlc2gDSR4JV","env");var o=e,r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.env=r.EnvMode=r.isAndroidApp=r.isiOSApp=r.isAPP=r.isDebug=void 0,r.isDebug=!1,r.isAPP=!1,r.isiOSApp=cc.sys.os===cc.sys.OS_IOS&&r.isAPP,r.isAndroidApp=cc.sys.os===cc.sys.OS_ANDROID&&r.isAPP,(o=i=r.EnvMode||(r.EnvMode={})).TEST="Test",o.PROD="Prod",r.env={version:"1.0.8",mode:i.PROD,network:{server:"",retryT:2,defaultRetryCnt:3,resourceURL:""},game:"HelpLlama",name:"Llama",logo:1,noAds:!1},cc._RF.pop()},{}],events:[function(t,e,n){"use strict";cc._RF.push(e,"36ffblQgqhK8JqukTi83k4n","events");var i=t,o=n;function r(){}Object.defineProperty(o,"__esModule",{value:!0}),o.xiaOperEvent=o.levelEvent=o.operEvent=o.layerEvent=o.adEvent=o.userEvent=o.sdkSwitchesEvent=o.platformEvent=o.cheatEvent=o.ON_NODE_REMOVE=o.BEFORE_NODE_REMOVE=void 0,i=i("typed-event"),o.BEFORE_NODE_REMOVE="BEFORE_NODE_REMOVE",o.ON_NODE_REMOVE="ON_NODE_REMOVE",o.cheatEvent=new i.TypedEvent,o.platformEvent=new i.TypedEvent,o.sdkSwitchesEvent=new i.TypedEvent,o.userEvent=new i.TypedEvent,o.adEvent=new i.TypedEvent,o.layerEvent=new i.TypedEvent,o.operEvent=new i.TypedEvent,o.levelEvent=new i.TypedEvent,o.xiaOperEvent=new i.TypedEvent,r.merge="merge",r.mergeBtn="merge-btn",r.mergeBtnCount="merge-btn-count",r.deal="deal",r.dealBtn="deal-btn",r.dealBtn2="deal-btn2",r.shuffle="shuffle",r.shuffleBtn="shuffle-btn",r.add10Max="add-10-max",r.cellAdsLock="cell-ads-lock",r.cellTouch="cell-touch",r.recoveryCoin="recovery-coin",r.upgrade="upgrade",r.unlocknNumber="unlock-number",r.guideDeal="guide-deal",r.guideTarget="guide-target",r.cellNext="cell-next",r.checkShuffle="check-shuffle",r.nextLevel="next-level",r.targetAnim="target-anim",r.unlocknLast="unlock-last",r.cloneCellLayer="clone-cell-layer",r.shuffleBtn2="shuffle-btn2",r.adsCanUnlock="ads-can-unlock",r.restartCellLayer="restart-cell-layer",r.restartWarTime="restart-war-time",r.saveWarTime="save-war-time",r.startWarTime="start-war-time",r.warUpgrade="war-upgrade",r.gameMask="game-mask",r.updateRed="update-red",r.playCombo="play-combo",r.showOver="show-over",i=r,o.default=i,cc._RF.pop()},{}],frogComp:[function(t,e,n){"use strict";var i;cc._RF.push(e,"25201614MdCb65D/OJHoDSZ","frogComp");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(n,"__esModule",{value:!0});var a=t("runPig"),c=t("initor"),l=t("sound"),u=t("events"),h=cc._decorator,p=h.ccclass,d=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchBox=null,e.delayTime=.16,e.actionTime=.2,e._runPig=null,e.idx=-1,e.tipfishId=-1,e.isGo=!1,e.isTiped=!1,e.tipAni=!1,e.setIntervalID=-1,e.tipIndex=-1,e.skeleton=null,e.tipFish=null,e.startIdle=!0,e.maxY=0,e.minY=0,e.maxX=0,e.minX=0,e.leftIdx=-1,e.rightIdx=-1,e.isPlayRightAni=!1,e.isPlayLeftAni=!1,e.m_levelEventHandler=null,e.isTouched=!1,e.isCanTouched=!0,e.visited=new Set,e.gotIdxArr=[],e.shortest=[],e}return o(e,t),e.prototype.adjustPos=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(a.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.node.position,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),s=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));s<e&&(e=s,n=r,this.idx=i)}this.node.position=n},e.prototype.updateIdx=function(t,e){void 0===t&&(t=this.node.x),void 0===e&&(e=this.node.y),null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(a.default));for(var n=this._runPig.showCircleArr,i=1/0,o=this.idx,r=0;r<n.length;r++)if(null!=n[r]&&null!=n[r].parent){var s=n[r].parent.convertToWorldSpaceAR(n[r].getPosition()),c=this.node.parent.convertToNodeSpaceAR(s),l=Math.sqrt(Math.pow(c.x-t,2)+Math.pow(c.y-e,2));l<i&&(i=l,o=r)}return o},e.prototype.onLoad=function(){var t=this;this.skeleton=this.node.getComponent(sp.Skeleton);var e=c.randomInt(0,40)/10;c.delayCallFunc(function(){t.startIdle&&t.playIdleAni()},1e3*e);var n=[-30,30,90,150,210,-90],i=c.randomInt(0,n.length-1);this.node.angle=n[i]},e.prototype.onTouchEnd=function(){var t,e=this;if(this.isCanTouched){if(this._runPig.isOnWater(this.idx))return this.playChooseAni(),void c.delayCallFunc(function(){e.playIdleAni()},1e3);if(this.isTouched)return u.operEvent.emit({action:"close_Circle_Choose",data:{}}),void this.playIdleAni();if(u.operEvent.emit({action:"close_Circle_Choose",data:{}}),this.isTouched)this.playIdleAni();else if(this.adjustPos(),null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(a.default)),this._runPig.inactiveTime=0,this._runPig.haveFishTouching||(this._runPig.touchfishId=this.tipIndex),this._runPig.touchfishId==this.tipIndex){this.leftIdx=-1,this.rightIdx=-1,this.playChooseAni(),this.gotIdxArr=[],this.visited.clear(),this.gotIdxArr.push(this.idx);for(var n=0,i=this.gotIdxArr;n<i.length;n++){var o=i[n];if(!this.visited.has(o)){this.visited.add(o);var r=this.getColRow(o),s=r[0],l=r[1],h=this.caculatePoint(s,l);(t=this.gotIdxArr).push.apply(t,h)}}}}},e.prototype.getColRow=function(t){for(var e=this._runPig.circleNodesArr,n=0,i=null,o=0,r=0;r<e.length;r++){var s=e[r];if(o=r,(n+=s.length)>t){i=s;break}}for(var a=0,c=0,l=i;c<l.length&&l[c].getChildByName("label").getComponent(cc.Label).string!=t;c++)a++;return[o,a]},e.prototype.caculatePoint=function(t,e){for(var n=this._runPig.circleNodesArr,i=[],o=0,r=t%2!=0?[[t-2,e],[t+2,e],[t-1,e-1],[t+1,e+2],[t-1,e+2],[t+1,e-1]]:[[t-2,e],[t+2,e],[t-1,e-2],[t+1,e+1],[t-1,e+1],[t+1,e-2]];o<r.length;o++){var s=r[o];if(null!=n[s[0]]&&null!=n[s[0]][s[1]]){var a=n[s[0]][s[1]],c=this._runPig.showCircleArr.indexOf(a);this._runPig.isUserArr.includes(c)||(i.push(c),a.getChildByName("Circle_Choose").active=!0,this.isTouched=!0)}}return i},e.prototype.playSPAni=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=null),this.skeleton=this.node.getComponent(sp.Skeleton),null!=this.skeleton){this.skeleton.setAnimation(0,t,e);var i=!0;null!=n&&this.skeleton.setCompleteListener(function(){i&&(i=!1,n())})}},e.prototype.playIdleAni=function(){"Frog_Idle"!=this.skeleton.animation&&this.playSPAni("Frog_Idle",!0)},e.prototype.playChooseAni=function(){this.playSPAni("Frog_Choose",!0)},e.prototype.playCollisionAni=function(){var t=this;this.playSPAni("Frog_Collision",!1),c.delayCallFunc(function(){"Frog_Choose"!=t.skeleton.animation&&t.playIdleAni()},1e3),l.sound.play2(this._runPig.game1_error,1,!1)},e.prototype.playJumpAni=function(){this.playSPAni("Frog_Jump",!1),u.operEvent.emit({action:"close_Circle_Choose",data:{}})},e.prototype.registerTouch=function(){this.touchBox.on(cc.Node.EventType.TOUCH_START,this.onTouchEnd,this)},e.prototype.unregisterTouch=function(){this.touchBox.off(cc.Node.EventType.TOUCH_START,this.onTouchEnd,this)},e.prototype.onDisable=function(){null!=this.m_levelEventHandler&&(this.m_levelEventHandler(),this.m_levelEventHandler=null),this.unregisterTouch()},e.prototype.onEnable=function(){this.m_levelEventHandler=u.operEvent.on(this.onOperEvent.bind(this)),this.registerTouch()},e.prototype.onOperEvent=function(t){var e=this;if(null!=t&&null!=t.data)if("frogPoint"==t.action){if(this.isTouched){var n=t.data.node,i=this._runPig.showCircleArr.indexOf(n),o=this.bfsShortestPath(this.idx,i);this.node.setSiblingIndex(this.node.parent.childrenCount);for(var r=cc.tween(this.node),s=this._runPig.showCircleArr[o[0]],a=function(t){var n=u._runPig.showCircleArr[o[t]],i=n.parent.convertToWorldSpaceAR(n.position),a=u.node.parent.convertToNodeSpaceAR(i),l=c.calculateRotationAngle(s.position,n.position);r=(r=(r=r.call(function(){e.node.angle=l-90,e.playJumpAni()})).delay(u.delayTime)).to(u.actionTime,{position:a}),s=n},u=this,h=1;h<o.length;h++)a(h);l.sound.play(l.Sound.Gua),r.call(function(){e.isTouched=!1,e.isCanTouched=!0,e.playIdleAni(),e.skeleton.timeScale=1}).start(),this.isCanTouched=!1;var p=this._runPig.frogNodesUserArr.indexOf(this.idx);-1!=p&&(this._runPig.frogNodesUserArr.splice(p,1),this.idx=o[o.length-1],this._runPig.frogNodesUserArr.push(this.idx)),this._runPig.updateMap(),this._runPig.plusLevelStep()}}else"close_Circle_Choose"==t.action&&(t.data.node!=this.node&&this.playIdleAni(),this.isTouched=!1)},e.prototype.bfsShortestPath=function(t,e){var n={},i=[];for(i.push({idx:t,path:[t]}),n[t]=!0;i.length>0;){var o=i.shift(),r=o.idx,a=o.path;if(r===e)return a;var c=this.getColRow(r),l=c[0],u=c[1];this.caculatePoint(l,u);for(var h=0,p=this.caculatePoint(l,u);h<p.length;h++){var d=p[h];if(!n[d]){var f=s(a,[d]);i.push({idx:d,path:f}),n[d]=!0}}}return[]},r([d(cc.Node)],e.prototype,"touchBox",void 0),r([d],e.prototype,"delayTime",void 0),r([d],e.prototype,"actionTime",void 0),r([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{events:"events",initor:"initor",runPig:"runPig",sound:"sound"}],guideHand:[function(t,e,n){"use strict";var i;cc._RF.push(e,"f85c4tagDpHdbjIfLd/tW1k","guideHand");var o=e,r=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var s,a=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(r,"__esModule",{value:!0}),o=(c=cc._decorator).ccclass;var c=c.property;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.label=null,t.text="hello",t.animation=null,t.endPos=null,t.circleNode=null,t.actionTime=null,t}(function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(l,s=cc.Component),l.prototype.onLoad=function(){this.animation=this.node.getComponent(cc.Animation)},l.prototype.init=function(t,e,n){var i=+this.node.width/2*this.node.scale,o=-this.node.height/2*this.node.scale;this.endPos=new cc.Vec2(t.x+i,t.y+o),this.actionTime=e,this.circleNode=n},l.prototype.startPlay=function(){this.node.active&&this.node.activeInHierarchy&&null!=this.animation&&this.animation.play("hand_guide")},l.prototype.step2=function(){var t,e,n=this;null!=this.actionTime&&(this.animation.play("hand_guide1"),t=this.node.position,e=cc.tween().call(function(){n.node.opacity=255}).to(1,{position:this.endPos}).call(function(){null!=n.circleNode&&(n.circleNode.active=!0,n.circleNode.opacity=150)}).delay(1).call(function(){n.node.opacity=0,null!=n.circleNode&&(n.circleNode.active=!1,n.circleNode.opacity=255)}).delay(1).call(function(){n.node.position=t}),cc.tween(this.node).repeatForever(e).start())},a([c(cc.Label)],l.prototype,"label",void 0),a([c],l.prototype,"text",void 0),o=a([o],l),r.default=o,cc._RF.pop()},{}],helpPanel:[function(t,e,n){"use strict";var i;cc._RF.push(e,"8ec5fB1ZR1HMYaorGTDqvaI","helpPanel");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(s,"__esModule",{value:!0}),o("index"),o("env"),o("events"),o("platform-const"),o("user-data");var l=o("base-panel");function u(){var t=null!==a&&a.apply(this,arguments)||this;return t.closeBtn=null,t}o("switch-button"),o("panel-manager"),o("player-info"),o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(u,a=l.default),u.prototype.goMain=function(){this.hide()},u.prototype.start=function(){},c([r(cc.Node)],u.prototype,"closeBtn",void 0),o=c([o],u),s.default=o,cc._RF.pop()},{}],index:[function(t,e,n){"use strict";cc._RF.push(e,"c6bff0J5dxBGYix7uOCE4xs","index");var i,o=t,r=e,s=n,a=Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){t[i=void 0===i?n:i]=e[n]};Object.defineProperty(s,"__esModule",{value:!0}),s.Event=s.ResUtil=s.platform=s.showToast=s.initPlatform=void 0,r=o("resources"),s.ResUtil=r,r=o("events"),s.Event=r;var c=t("web");s.platform=i,s.initPlatform=function(){s.platform=i=new c.WebPlatform};var l=o("toast");Object.defineProperty(s,"showToast",{enumerable:!0,get:function(){return l.showToast}}),function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||a(e,t,n)}(o("common"),s),cc._RF.pop()},{web:"web"}],initor:[function(t,e,n){"use strict";cc._RF.push(e,"76b538NZiJP2LmD+HLX/bRt","initor");var i=Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]};Object.defineProperty(n,"__esModule",{value:!0}),n.Event=n.ResUtil=n.platform=n.showToast=n.initPlatform=void 0;var o=t("resources");n.ResUtil=o;var r,s=t("events");n.Event=s;var a=t("web");n.platform=r,n.initPlatform=function(){n.platform=r=new a.WebPlatform};var c=t("toast");Object.defineProperty(n,"showToast",{enumerable:!0,get:function(){return c.showToast}}),function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)}(t("common"),n),cc._RF.pop()},{common:"common",events:"events",resources:"resources",toast:"toast",web:"web"}],kissFishComp:[function(t,e,n){"use strict";var i;cc._RF.push(e,"9cef5wQVDFOmZMEXOU2GxfD","kissFishComp");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("runPig"),a=t("initor"),c=t("sound"),l=t("user-data"),u=t("env"),h=t("vibrate"),p=t("panel-manager"),d=t("events"),f=t("tortoiseComp"),v=t("love_anim"),g=t("index"),y=cc._decorator,m=y.ccclass,_=y.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchBox=null,e.loveAni=null,e.delayTime=1e3,e._runPig=null,e.idx=-1,e.tipfishId=-1,e.isGo=!1,e.isTiped=!1,e.tipAni=!1,e.setIntervalID=-1,e.tipIndex=-1,e.skeleton=null,e.tipFish=null,e.otherFish=null,e.startIdle=!0,e.tipKissFishTmp=null,e}var n;return o(e,t),n=e,e.prototype.adjustPos=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(s.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.node.position,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));a<e&&(e=a,n=r,this.idx=i)}this.node.position=n},e.prototype.onLoad=function(){this.skeleton=this.node.getComponent(sp.Skeleton),this.playIdleAni()},e.prototype.onTouchEnd=function(){d.operEvent.emit({action:"close_Circle_Choose",data:{}}),null!=this._runPig&&(this._runPig.inactiveTime=0,this._runPig.haveFishTouching||this.isGo||(this.playChooseAni(),this._runPig.isOnWater(this.idx)||this.checkGo()))},e.prototype.playSPAni=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null);var i=this.node.getChildByName("kissFishSP");if(this.skeleton=i.getComponent(sp.Skeleton),null!=this.skeleton){this.skeleton.setAnimation(0,t,e);var o=!0;null!=n&&this.skeleton.setCompleteListener(function(){o&&(o=!1,n())})}},e.prototype.playIdleAni=function(){this.playSPAni("Idle",!0)},e.prototype.playChooseAni=function(){var t=this;this.playSPAni("Choose",!1),g.delayCallFunc(function(){"kisu2"!=t.skeleton.animation&&"kisu"!=t.skeleton.animation&&t.playIdleAni()},1e3)},e.prototype.playFlyAni=function(){this.playSPAni("popup1",!0);var t=cc.instantiate(this.loveAni);t.scale=.6,this.node.parent.addChild(t),t.getComponent(v.default).init(this.node,null),t.getChildByName("love_particle").getComponent(cc.ParticleSystem).resetSystem(),t.position=this.node.position,t.getComponent(cc.Animation).play(),t.getComponent(cc.Animation).on("finished",function(){t.removeFromParent()},this)},e.prototype.playPopupAni=function(t){void 0===t&&(t=null),this.playSPAni("popup1",!0,t)},e.prototype.playPopupAni2=function(t){void 0===t&&(t=null),this.playSPAni("popup2",!0,t)},e.prototype.playTipAni=function(t,e){var i=this;if(void 0===t&&(t=null),void 0===e&&(e=!1),this.playSPAni("Tips",!0),this.isTiped=!0,null!=t){var o=cc.instantiate(this.node);o.name="kissFishTmp1",this.tipKissFishTmp=o,this.node.parent.addChild(o),o.opacity=100,o.removeComponent(n);var r=this.calculateCDCoordinates(o.getPosition(),t.getPosition(),60),s=r[0];r[1];var a=cc.tween(o).call(function(){o.opacity=100,o.position=i.node.position}).to(.5,{position:s}).delay(1).call(function(){o.opacity=0});cc.tween(o).repeatForever(a).start()}},e.prototype.playKiss1Ani=function(t){this.playSPAni("kisu",!0,t)},e.prototype.playKiss2Ani=function(){this.playSPAni("kisu2",!0)},e.prototype.playCollisionAni=function(){var t=this;this.playSPAni("collision",!1),g.delayCallFunc(function(){"kisu"!=t.skeleton.animation&&"kisu2"!=t.skeleton.animation&&t.playIdleAni()},2e3),c.sound.play2(this._runPig.game1_error,1,!1)},e.prototype.registerTouch=function(){this.touchBox.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.unregisterTouch=function(){this.touchBox.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onDisable=function(){this.unregisterTouch()},e.prototype.onEnable=function(){this.registerTouch()},e.prototype.checkGo=function(t){void 0===t&&(t=!0);for(var e=this.rotatePoint(),i=e[0],o=e[1],r=this.node.x,s=this.node.y,a=this.calculateNewPoit2(r,s,i,o),c=a[0],l=a[1],u=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),h=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(c,l)),p=this._runPig.node.convertToNodeSpaceAR(u),d=this._runPig.node.convertToNodeSpaceAR(h),f=this._runPig.circleArr,v=this._runPig.circleNodeArr,g=[],y=!0,m=0;m<f.length;m++){var _=f[m];if(!this._runPig.deletIdxMpa.has(f[m].uuid)){var P=v[m].parent.convertToWorldSpaceAR(v[m].getPosition()),b=this._runPig.node.convertToNodeSpaceAR(P);(S=_.calculateDistanceToSegment(p.x,p.y,d.x,d.y,b.x,b.y,this._runPig.radius))<_.runRadius&&this._runPig.isUserArr.includes(m)&&m!=this.idx&&(y=!1,g.push([m,P]))}}if(!y){for(var C=1/0,A=-1,w=v[this.idx].parent.convertToWorldSpaceAR(v[this.idx].getPosition()),x=0,N=g;x<N.length;x++){var S,T=N[x],F=T[0],I=T[1];C>(S=Math.sqrt(Math.pow(I.x-w.x,2)+Math.pow(I.y-w.y,2)))&&(C=S,A=F)}var O=!1;if(null!=this._runPig.kissFishNodes)for(var R=0,E=this._runPig.kissFishNodes.children;R<E.length;R++){var k=E[R],M=k.getComponent(n);if(M&&M.idx==A&&180==Math.abs(this.node.rotation-k.rotation)){if(this._runPig.isOnWater(M.idx))break;O=!0,this.runKiss(this.node,k),this._runPig.plusLevelStep()}}t&&!O&&this._runPig.playAni(A)}},e.prototype.calculateCDCoordinates=function(t,e,n){var i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=new cc.Vec2((e.x-t.x)/i,(e.y-t.y)/i),r=i/2-n;return[new cc.Vec2(t.x+r*o.x,t.y+r*o.y),new cc.Vec2(e.x-r*o.x,e.y-r*o.y)]},e.prototype.runKiss=function(t,e){var i=this,o=(t.x+e.x)/2,r=(t.y+e.y)/2,s=new cc.Vec2(o,r),a=this.calculateCDCoordinates(t.getPosition(),e.getPosition(),40),c=a[0],p=a[1],d=t.getComponent(n);d.isGo=!0;var f=this._runPig.kissFishNodesUserArr.indexOf(d.idx);-1!=f&&this._runPig.kissFishNodesUserArr.splice(f,1);var y=e.getComponent(n);y.isGo=!0;var m=this._runPig.kissFishNodesUserArr.indexOf(y.idx);-1!=m&&this._runPig.kissFishNodesUserArr.splice(m,1),this._runPig.updateMap(),this.isTiped;var _=this._runPig.lvlConfig.json[0][this._runPig.currentLevel];null!=y.tipKissFishTmp&&(y.tipKissFishTmp.removeFromParent(),y.tipKissFishTmp=null),null!=d.tipKissFishTmp&&(d.tipKissFishTmp.removeFromParent(),d.tipKissFishTmp=null);var P=this.node.parent;if(g.delayCallFunc(function(){var n=cc.instantiate(i.loveAni);P.addChild(n),n.getComponent(v.default).init(t,e),n.getChildByName("love_particle").getComponent(cc.ParticleSystem).resetSystem(),n.position=s,n.getComponent(cc.Animation).play(),n.getComponent(cc.Animation).on("finished",function(){n.removeFromParent()},i)},this.delayTime),d.playKiss1Ani(function(){d.playKiss2Ani(),cc.tween(t).to(.33,{position:c}).start()}),y.playKiss1Ani(function(){y.playKiss2Ani(),cc.tween(e).to(.33,{position:p}).start()}),u.env.mode!=u.EnvMode.TEST||u.env.noAds||(null==this._runPig.tipArr[_]&&(this._runPig.tipArr[_]=[]),this._runPig.tipArr[_].push(d.tipIndex+"|"+y.tipIndex)),this._runPig.getAllPigsArrLength()+this._runPig.tortoiseUserArr.length+this._runPig.kissFishNodesUserArr.length==0){this._runPig.octopusClose(),l.userData.setLvlCountDataPlus("end",this._runPig.currentLevel+1),this._runPig.isGetFragment()?this._runPig.getFragmentAnimation():this._runPig.isHaveFragment()&&this._runPig.fragmentDisappearAnimation(),g.delayCallFunc(function(){h.vibrate.play(h.VibrateNewType.LONG)},400),u.env.mode==u.EnvMode.TEST&&u.env.noAds;var b=i._runPig.lvlConfig.json[0][i._runPig.currentLevel];o=(new Date-i._runPig.playDate)/1e3,i._runPig.playDate=n,r=0,l.userData.isCollectFragmentsData(i._runPig.currentLevel)&&(r=1),g.delayCallFunc(function(){g.platform.trackEvent("endmainLevel",{videoNum:i._runPig.currentLvlAdsCount,usetips:i._runPig.adsCount,level:i._runPig.currentLevel+1,levelname:b,cnt:l.userData.getLvlCountDataByTpye("end",i._runPig.currentLevel+1),over_time:o}),i._runPig.showSuccessPanel(function(){i._runPig.nextGame()})},2e3)}},e.prototype.rotatePoint=function(t){void 0===t&&(t=this.node.angle);var e=this.node.x,n=this.node.y,i=t*Math.PI/180;return[500*Math.cos(i)+e,500*Math.sin(i)+n]},e.prototype.calculateNewPoit2=function(t,e,n,i){var o=this.calculateRotationAngle(new cc.Vec2(t,e),new cc.Vec2(n,i));return[2500*Math.cos(o*Math.PI/180)+n,2500*Math.sin(o*Math.PI/180)+i]},e.prototype.calculateRotationAngle=function(t,e){var n=e.x-t.x,i=e.y-t.y;return 180*Math.atan2(i,n)/Math.PI},e.prototype.startTipFishAni=function(){this.tipAni=!0,this.tipfishId=a.randomInt(1,999999);for(var t=0,e=this.node.parent.children;t<e.length;t++){var n=e[t];"tipFish"==n.name&&n.removeFromParent()}this.tipAniFunc(this.tipfishId)},e.prototype.tipAniFunc=function(t){var e=this;if(cc.isValid(this.node)&&this.node.activeInHierarchy&&this.isTiped&&this.tipAni&&this.tipfishId==t){this.tipFish=cc.instantiate(this.node),this.tipFish.pauseSystemEvents(!0),this.tipFish.opacity=0;var n=this.tipFish.getComponent(f.default);n.isGo=!0,n.startIdle=!1,this.node.parent.addChild(this.tipFish),n.playMoveAni();var i=this.node.parent.getChildByName("tipNode"+this.tipIndex);null!=i?this.node.setSiblingIndex(i.getSiblingIndex()-1):this.node.setSiblingIndex(this.node.parent.childrenCount),this.tipFish.name="tipFish";var o=this.node.x,r=this.node.y,s=this.node.width*this.node.scale-20,a=this.tipFish.angle*Math.PI/180,c=s*Math.cos(a)+o,l=s*Math.sin(a)+r,u=this.tipFish.x,h=this.tipFish.y,p=this.calculateNewPoit2(u,h,c,l),d=p[0],v=p[1],y=this.tipFish;cc.tween(this.tipFish).delay(.1).parallel(cc.tween().to(.3,{opacity:100}),cc.tween().to(4,{position:cc.v2(d,v)})).call(function(){y.removeFromParent()}).start(),g.delayCallFunc(function(){null!=e.tipFish&&cc.isValid(e.tipFish)&&e.tipAniFunc(t)},2e3)}},e.prototype.jump=function(){var t=this;this.isGo=!0,-1!=this.setIntervalID&&(clearInterval(this.setIntervalID),this.setIntervalID=-1),null!=this.tipFish&&(this.tipFish.removeFromParent(),this.tipAni=!1);var e=this._runPig.lvlConfig.json[0][this._runPig.currentLevel];this.playFlyAni(),null!=this.tipKissFishTmp&&this.tipKissFishTmp.removeFromParent(),this._runPig.options.isNeverOver||a.platform.trackEvent("tipUseSuccess",{level:this._runPig.currentLevel+1,levelname:e,tipfishid:this.tipIndex,type:"video"});var n=this._runPig.kissFishNodesUserArr.indexOf(this.idx);if(-1!=n&&this._runPig.kissFishNodesUserArr.splice(n,1),this._runPig.getAllPigsArrLength()+this._runPig.tortoiseUserArr.length+this._runPig.kissFishNodesUserArr.length==0){this._runPig.octopusClose(),l.userData.setLvlCountDataPlus("end",this._runPig.currentLevel+1);var i=0;this._runPig.isGetFragment()?(this._runPig.getFragmentAnimation(),i=2500):this._runPig.isHaveFragment()&&(this._runPig.fragmentDisappearAnimation(),i=1300),g.delayCallFunc(function(){var e=function(e){void 0===e&&(e=100),g.delayCallFunc(function(){h.vibrate.play(h.VibrateNewType.LONG)},400),u.env.mode==u.EnvMode.TEST&&u.env.noAds;var n=t._runPig.lvlConfig.json[0][t._runPig.currentLevel],i=new Date,o=(i-t._runPig.playDate)/1e3;t._runPig.playDate=i;var r=0;l.userData.isCollectFragmentsData(t._runPig.currentLevel)&&(r=1),g.delayCallFunc(function(){a.platform.trackEvent("endmainLevel",{videoNum:t._runPig.currentLvlAdsCount,usetips:t._runPig.adsCount,level:t._runPig.currentLevel+1,levelname:n,cnt:l.userData.getLvlCountDataByTpye("end",t._runPig.currentLevel+1),over_time:o,pieceGet:t._runPig.peceget,pieceFinish:r,pieceSteps:t._runPig.level_step,pieceTaskSteps:t._runPig.stepCount,passage:t._runPig.chapterIdx}),t._runPig.nextGame()},e)},n=l.userData.getCurrentLvl();t._runPig.currentLevel>n&&!u.env.noAds?t._runPig.levelEndAnimation(function(){p.PanelManager.ins.open("prefab/panel/prizedrawPanel",{goNextFunc:e,level:t._runPig.currentLevel})}):(t._runPig.settingBtn.interactable=!1,g.delayCallFunc(function(){t._runPig.settingBtn.interactable=!0},4e3),e(2e3))},i)}},e.prototype.palyJumpFishAni=function(){var t=this,e=this._runPig.node.getChildByName("viedioJumpFishState");null!=this._runPig.foreverAdsCount&&null!=e&&(-1!=this._runPig.setIntervalIDForever&&(clearInterval(this._runPig.setIntervalIDForever),this._runPig.setIntervalIDForever=-1),this._runPig.setIntervalIDForever=setInterval(function(){cc.isValid(t._runPig.node)&&t._runPig.node.activeInHierarchy&&(t._runPig.foreverAdsCount>=t._runPig.ADmaxCount?t._runPig.foreverResetBtn.getComponent(cc.Button).interactable&&t._runPig.foreverResetBtn.getComponent(cc.Animation).play("Btn_popUp"):null!=e&&e.getComponent(cc.Animation)&&e.getComponent(cc.Animation).play())},1e3*this._runPig.foreverJumpTipTime))},e.prototype.runBezierAction=function(t,e,n){var i=this,o=[t,e,n],r=cc.bezierTo(.4,o),s=cc.spawn(r,cc.scaleTo(2,3),cc.rotateBy(2,-60));return cc.sequence(s.easing(cc.easeOut(1)),cc.callFunc(function(){i.node.removeFromParent(),i._runPig.options.isNeverOver&&i._runPig.checkEmptyCircleNode()}))},r([_(cc.Node)],e.prototype,"touchBox",void 0),r([_(cc.Prefab)],e.prototype,"loveAni",void 0),r([_],e.prototype,"delayTime",void 0),n=r([m],e)}(cc.Component);n.default=P,cc._RF.pop()},{env:"env",events:"events",index:"index",initor:"initor",love_anim:"love_anim","panel-manager":"panel-manager",runPig:"runPig",sound:"sound",tortoiseComp:"tortoiseComp","user-data":"user-data",vibrate:"vibrate"}],"layer-manager":[function(t,e,n){"use strict";var i;cc._RF.push(e,"ae60bXn4L9NfYIrClk0m+W4","layer-manager");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c,l=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},u=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},h=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(s,"__esModule",{value:!0}),s.layerEvent=s.LayerManager=void 0;var p=o("index"),d=o("typed-event"),f=o("base-layer"),v=(g=cc._decorator).ccclass;r=g.property,o=g.menu;var g=g.disallowMultiple;function y(){var t=null!==a&&a.apply(this,arguments)||this;return t.container=null,t.currentLayer=null,t}(function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(y,a=cc.Component),c=y,Object.defineProperty(y,"ins",{get:function(){var t=cc.director.getScene().getChildByName("Canvas");return t.getComponent(c)||t.getComponentInChildren(c)},enumerable:!1,configurable:!0}),y.prototype.onLoad=function(){this.layers=[]},y.prototype.openPrefab=function(t,e,n){var i=this;void 0===n&&(n=!0);var o=f.default;if(!cc.isValid(t))return console.warn("invalid prefab",t.nativeUrl),!1;var r=cc.instantiate(t),a=r.getComponent(o);return a?(a.init(e),null!=(e=this.currentLayer)&&(e.getComponent(o).hide(),n&&(e.active=!1)),(e=(e=r.getComponent(cc.Widget))||r.addComponent(cc.Widget)).isAlignHorizontalCenter=e.isAlignVerticalCenter=!1,e.isAlignRight=e.isAlignLeft=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0,r.setParent(this.container),r.setSiblingIndex(this.container.childrenCount),a.show(),this.currentLayer=r,this.layers.push(r),s.layerEvent.emit({comp:a}),r.once(p.Event.BEFORE_NODE_REMOVE,function(t){var e=i.layers,n=e.findIndex(function(e){return e==t});-1!=n&&(e.splice(n,1),0!=(n=e.length)?(n=(e=e[n-1]).getComponent(o),e.active||(e.active=!0,n.show()),s.layerEvent.emit({comp:n}),i.currentLayer=e):s.layerEvent.emit({comp:null}))}),!0):(console.warn("failed to load component of prefab",t.nativeUrl),!1)},y.prototype.open=function(t,e,n){return void 0===n&&(n=!0),u(this,void 0,Promise,function(){var i;return h(this,function(o){switch(o.label){case 0:return[4,new Promise(function(e,n){p.ResUtil.loadPrefab(t).then(function(t){e(t)}).catch(function(t){n(t)})})];case 1:return i=o.sent(),[2,this.openPrefab(i,e,n)]}})})},l([r(cc.Node)],y.prototype,"container",void 0),g=c=l([v,o("manager/layer-manager"),g],y),s.LayerManager=g,s.layerEvent=new d.TypedEvent,cc._RF.pop()},{}],loading:[function(t,e,n){"use strict";var i;cc._RF.push(e,"c9e8fpf3mJKzJ2ls2fG7fDH","loading");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},l=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},u=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(s,"__esModule",{value:!0});var h,p=t("index"),d=t("user-data"),f=t("player-info"),v=t("resources");function g(){var t=null!==a&&a.apply(this,arguments)||this;return t.isLoginFail=!1,t.loadingLabel=null,t.cathLoadingLabel=null,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(g,a=cc.Component),g.prototype.onLoad=function(){var t=this,e=[v.loadLocalRes("config/runPigTip",cc.JSON).then(function(t){window.tipConfig=t.json}).catch(function(t){throw console.error("load error:",t),t}),v.loadLocalRes("config/runPigLvl",cc.JSON).then(function(t){window.lvlConfig=t.json}).catch(function(t){throw console.error("load error:",t),t}),v.loadLocalRes("config/runPigLvlData",cc.JSON).then(function(t){window.runPigLvlData=t.json}).catch(function(t){throw console.error("load error:",t),t}),v.loadLocalRes("config/level",cc.JSON).then(function(t){window.levelNodeArr=t.json.level}).catch(function(t){throw console.error("load error:",t),t})];h=Promise.all(e).then(function(){p.initPlatform(),t.startGameAfterResourcesLoaded=!0,t.startCalled&&t.delayEnterGame()}).catch(function(e){console.error("load error:",e),t.cathLoadingLabel.active=!0,t.loadingLabel.active=!1})},g.prototype.start=function(){var t=this,e=this;h.then(function(){t.startCalled=!0,l(t,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,Promise.all([this.login(),this.preloadScene()])];case 1:return t.sent(),e.isLoginFail?(e.isLoginFail=!1,e.scheduleOnce(function(){e.start()},1),[2]):(e.startGameAfterResourcesLoaded&&e.delayEnterGame(),[3,4]);case 2:return t.sent(),[4,p.platform.showModal({title:"Tips",content:"Load Error",confirmText:"Confirm",showCancel:!1})];case 3:return t.sent(),[3,4];case 4:return[2]}})})})},g.prototype.login=function(){return l(this,void 0,void 0,function(){var t,e;return u(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,p.platform.login()];case 1:return e=n.sent(),d.userData.onLogin(e),[3,4];case 2:return t=n.sent(),e="Login error:",t&&"string"==typeof t?e+=t:t&&t.message&&"string"==typeof t.message?e+=t.message:t&&(e+=t.toString()),[4,p.platform.showModal({title:"Tips",content:"Login Error",confirmText:"Confirm",showCancel:!1})];case 3:return n.sent(),this.isLoginFail=!0,[3,4];case 4:return[2]}})})},g.prototype.preloadScene=function(){return new Promise(function(t,e){cc.director.preloadScene("main",function(){},function(n){n?e(n):t()})})},g.prototype.delayEnterGame=function(){window.addEventListener("message",this.onInit.bind(this))},g.prototype.onInit=function(t){try{if(t.data&&"helpllama"==t.data.game&&"init"==t.data.action){if(this._initing)return;window.removeEventListener("message",this.loading),d.userData.setLvlData(t.data.data.level),this._initing=!0,this.enterGame()}}catch(e){}},g.prototype.enterGame=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return t.trys.push([0,1,,3]),cc.director.loadScene("main",function(){}),f.playerInfo.getSwitch(),[3,3];case 1:return t.sent(),[4,p.platform.showModal({title:"Tips",content:"Load Error",confirmText:"Confirm",showCancel:!1})];case 2:return t.sent(),[3,3];case 3:return[2]}})})},c([r(cc.Node)],g.prototype,"loadingLabel",void 0),c([r(cc.Node)],g.prototype,"cathLoadingLabel",void 0),o=c([o],g),s.default=o,cc._RF.pop()},{index:"index","player-info":"player-info",resources:"resources","user-data":"user-data"}],love_anim:[function(t,e,n){"use strict";var i;cc._RF.push(e,"87b5ansHKRC+79TCHW9ETmW","love_anim");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("kissFishComp"),a=cc._decorator,c=a.ccclass;a.property;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeArr=[],e}return o(e,t),e.prototype.init=function(t,e){this.nodeArr.push(t),this.nodeArr.push(e)},e.prototype.disappear=function(){for(var t=0,e=this.nodeArr;t<e.length;t++){var n=e[t];if(null!=n){n.removeFromParent();var i=n.getComponent(s.default);if(i){var o=i._runPig.kissFishNodesUserArr.indexOf(i.idx);-1!=o&&i._runPig.kissFishNodesUserArr.splice(o,1),i._runPig.updateMap()}}}},r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{kissFishComp:"kissFishComp"}],mainFish:[function(t,e,n){"use strict";var i;cc._RF.push(e,"04bab6fVxNPx4ml4ekOGVnn","mainFish");var o,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},Object.defineProperty(s,"__esModule",{value:!0});var a=cc._decorator;function c(){return null!==o&&o.apply(this,arguments)||this}r=a.ccclass,a.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(c,o=cc.Component),c.prototype.start=function(){},r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([r],c),s.default=r,cc._RF.pop()},{}],main:[function(t,e,n){"use strict";var i;cc._RF.push(e,"087491OvZ1HTbeS3uwaH+Ft","main");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},l=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},u=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(s,"__esModule",{value:!0});var h=o("index"),p=o("events"),d=o("user-data"),f=o("layer-manager"),v=o("panel-manager"),g=o("sound");function y(){var t=null!==a&&a.apply(this,arguments)||this;return t.bgNode=null,t.levelLabel=null,t.Text_completeAll=null,t.Text_complete=null,t.lvlConfig=null,t.wxBtn=null,t.m_layerEventHandler=null,t.platformEventHandler=null,t.userEventHandler=null,t.background=null,t.BGgrass=null,t.BGleaves=null,t.grassStartY=0,t.gleaveStartY=0,t.curBgIndex=0,t.m_levelEventHandler=null,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(y,a=cc.Component),y.prototype.onLoad=function(){this.lvlConfig=window.lvlConfig,h.disableAllTouch(!1,!0),this.updateMain(),d.userData.initdone(),window.addEventListener("message",function(t){try{if(t.data.game&&"helpllama"==t.data.game){var e=t.data.action;if("play"==e)this.startGame();else if("callback"==e){var n=t.data.data;d.userData.callback(n.uuid,n.code)}}}catch(i){}}.bind(this))},y.prototype.updateCollectRed=function(){},y.prototype.start=function(){this.startGame()},y.prototype.startGame=function(t){t&&(h.disableTouch(t.target,!0),h.delayCallFunc(function(){h.disableTouch(t.target,!1)},1e3)),this.onMiniGame()},y.prototype.setting=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 1:return t.sent(),this.setWxBtnShow(!0),[2]}})})},y.prototype.skin=function(){},y.prototype.onAds=function(){},y.prototype.onAdsLockCallBack=function(){},y.prototype.setUserInfo=function(){},y.prototype.onPlatformEvent=function(t){null!=t&&t.onShow&&this.updateMain()},y.prototype.onEnable=function(){g.sound.stopBGM(),g.sound.playBGM(),this.setWxBtnShow(!0),this.platformEventHandler=p.platformEvent.on(this.onPlatformEvent.bind(this)),this.m_layerEventHandler=f.layerEvent.on(this.onLayerEvent.bind(this)),this.userEventHandler=p.userEvent.on(this.onUserEvent.bind(this)),this.m_levelEventHandler=p.operEvent.on(this.onOperEvent.bind(this)),d.userData.getCurrentLvl();var t=d.userData.getCurrentLvl();this.Text_completeAll.active=!1,this.Text_complete.active=!1,this.levelLabel.getComponent(cc.Label).string=t+1},y.prototype.onDisable=function(){this.setWxBtnShow(!1),null!=this.m_layerEventHandler&&(this.m_layerEventHandler(),this.m_layerEventHandler=null),null!=this.platformEventHandler&&(this.platformEventHandler(),this.platformEventHandler=null),null!=this.userEventHandler&&(this.userEventHandler(),this.userEventHandler=null),null!=this.m_levelEventHandler&&(this.m_levelEventHandler(),this.m_levelEventHandler=null)},y.prototype.onUserEvent=function(t){null!=t&&"local"===t.kind&&this.updateMain()},y.prototype.updateMain=function(){this.updateCollectRed()},y.prototype.setWxBtnShow=function(){},y.prototype.onLoadErr=function(){h.platform.hideLoading(),h.showToast("Load Error"),this.setWxBtnShow(!0)},y.prototype.close=function(){var t=this;h.platform.hideLoading(),this.scheduleOnce(function(){t.setWxBtnShow(!1)},.65)},y.prototype.loadResources=function(t,e,n){void 0===n&&(n=0);var i=this;cc.assetManager.loadBundle(t,function(o,r){return null!=o?(h.platform.trackEvent("error",{type:"load_bundle",message:o.message}),void i.onLoadErr()):void r.load("/prefab/"+t,cc.Prefab,function(o,r){if(null!=o)return h.platform.trackEvent("error",{type:"load_level_prefab",message:o.message}),void i.onLoadErr();cc.isValid(r)?(f.LayerManager.ins.openPrefab(r,{level:e,code:t,gameId:n},!0),i.close()):i.onLoadErr()})})},y.prototype.onMiniGame=function(){return l(this,void 0,void 0,function(){return u(this,function(){return h.platform.showLoading(),f.LayerManager.ins.open("prefab/runPig/runPig",null),[2]})})},y.prototype.goPackMove=function(){return l(this,void 0,void 0,function(){return u(this,function(){return h.platform.showLoading(),this.loadResources("diamond",1),[2]})})},y.prototype.goMiniGame=function(t,e,n){v.PanelManager.ins.closeAllPanel(),h.platform.showLoading(),this.loadResources(t,e,n)},y.prototype.onLayerEvent=function(t){null!=t&&(null==t.comp?(cc.macro.ENABLE_MULTI_TOUCH=!0,this.setWxBtnShow(!0)):this.setWxBtnShow(!1))},y.prototype.miniGame=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 1:return t.sent(),this.setWxBtnShow(!0),[2]}})})},y.prototype.sidebar=function(){return l(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return this.setWxBtnShow(!1),[4,v.PanelManager.ins.open("prefab/panel/sidebarPanel",null)];case 1:return t.sent(),this.setWxBtnShow(!0),[2]}})})},y.prototype.onChooseLevel=function(){v.PanelManager.ins.open("prefab/panel/chooseLevelPanel",{})},y.prototype.onOperEvent=function(t){var e;null!=t&&null!=t.data&&"leveltitle"==t.action&&(this.Text_completeAll.active=!1,this.Text_complete.active=!1,e+=1,this.levelLabel.getComponent(cc.Label).string=""+(e+1))},y.ins=null,c([r(cc.Node)],y.prototype,"bgNode",void 0),c([r(cc.Node)],y.prototype,"levelLabel",void 0),c([r(cc.Node)],y.prototype,"Text_completeAll",void 0),c([r(cc.Node)],y.prototype,"Text_complete",void 0),o=c([o],y),s.default=o,cc._RF.pop()},{}],modal:[function(t,e,n){"use strict";var i;cc._RF.push(e,"f5f9d3DYllGJIqt/JfQFr+F","modal");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(s,"__esModule",{value:!0});var l=o("base-panel");function u(){var t=null!==a&&a.apply(this,arguments)||this;return t.contentLabel=null,t.confirmButton=null,t.closeButton=null,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(u,a=l.default),u.prototype.init=function(){},u.prototype.updateDisplay=function(){var t;this.contentLabel.string=this.options.content||"",this.closeButton.active=null===(t=this.options.showClose)||void 0===t||t},u.prototype.onConfirmTap=function(){this.setReturnValue(!0),this.hide()},u.prototype.onCancelTap=function(){this.setReturnValue(!1),this.hide()},c([r(cc.Label)],u.prototype,"contentLabel",void 0),c([r(cc.Button)],u.prototype,"confirmButton",void 0),c([r(cc.Node)],u.prototype,"closeButton",void 0),o=c([o],u),s.default=o,cc._RF.pop()},{}],octopusComp:[function(t,e,n){"use strict";var i;cc._RF.push(e,"32de6WdmPVHf5k3tD8c3Gsj","octopusComp");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("runPig"),a=t("initor"),c=t("sound"),l=t("events"),u=cc._decorator,h=u.ccclass,p=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchBox=null,e.arrowNode=null,e._runPig=null,e.idx=-1,e.waterArr=[],e.tipfishId=-1,e.isGo=!1,e.isTiped=!1,e.tipAni=!1,e.onTouch=!1,e.setIntervalID=-1,e.tipIndex=-1,e.skeleton=null,e.tipFish=null,e.startIdle=!0,e.maxY=0,e.minY=0,e.startIdx=-1,e.maxX=0,e.minX=0,e.leftIdx=-1,e.rightIdx=-1,e.isPlayRightAni=!1,e.isPlayLeftAni=!1,e}return o(e,t),e.prototype.adjustPos=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(s.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.node.position,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));a<e&&(e=a,n=r,this.idx=i)}this.node.position=n,this.caculateSixPoint()},e.prototype.updateIdx=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(s.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.idx,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));a<e&&(e=a,n=i)}return n},e.prototype.onLoad=function(){var t=this;this.skeleton=this.node.getComponent(sp.Skeleton);var e=a.randomInt(0,40)/10;a.delayCallFunc(function(){t.startIdle&&t.playIdleAni()},1e3*e)},e.prototype.onTouchStart=function(){if(this.onTouch=!0,l.operEvent.emit({action:"close_Circle_Choose",data:{node:this.node}}),this._runPig.inactiveTime=0,this._runPig.haveFishTouching||(this._runPig.touchfishId=this.tipIndex),this._runPig.touchfishId==this.tipIndex){this.leftIdx=-1,this.rightIdx=-1,this.startIdx=this.idx,this.playChooseAni();for(var t=this._runPig.circleNodesArr,e=0,n=null,i=0,o=0;o<t.length;o++){var r=t[o];if(i=o,(e+=r.length)>this.idx){n=r;break}}for(var s=0,a=0,c=n;a<c.length&&(F=c[a]).getChildByName("label").getComponent(cc.Label).string!=this.idx;a++)s++;for(var u=0,h=this.waterArr;u<h.length;u++){var p=h[u],d=this._runPig.octopusNodesWaterUserArr.indexOf(p);-1!=d&&this._runPig.octopusNodesWaterUserArr.splice(d,1)}this._runPig.updateMap();for(var f=0,v=this.waterArr;f<v.length;f++)if(p=v[f],!this._runPig.octopusNodesWaterUserArr.includes(p))for(var g=function(t){t.name==p&&cc.tween(t).to(.25,{opacity:0}).call(function(){t.removeFromParent()}).start()},y=0,m=this._runPig.level_inkNodes.children;y<m.length;y++)g(F=m[y]);if(90==this.node.angle||270==this.node.angle){var _=s;for(o=1;o<=s&&(p=this.idx-o,null!=t[i][s-o]);o++){if(this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.leftIdx=p;break}_=s-o}var P=s;for(o=1;o<t[i].length&&(p=this.idx+o,null!=t[i][s+o]);o++){if(this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.rightIdx=p;break}P=s+o}var b=t[i][_],C=t[i][P],A=b.parent.convertToWorldSpaceAR(b.position),w=C.parent.convertToWorldSpaceAR(C.position),x=this.node.parent.convertToNodeSpaceAR(A),N=this.node.parent.convertToNodeSpaceAR(w);this.minY=N.y,this.maxY=x.y}else if(150==this.node.angle||330==this.node.angle){for(var S=s,T=i;S>=0&&T>=0;){var F=void 0;if(0==T)break;if(T%2!=0){if(null==(F=t[T-1][S]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.leftIdx=p;break}T-=1,S=S}else{if(null==(F=t[T-1][S-1]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.leftIdx=p;break}T-=1,S-=1}}for(var I=s,O=i;null!=t[O+1];)if(F=void 0,O%2!=0){if(null==(F=t[O+1][I+1]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.rightIdx=p;break}O+=1,I+=1}else{if(null==(F=t[O+1][I]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.rightIdx=p;break}O+=1,I=I}b=t[T][S],C=t[O][I],A=b.parent.convertToWorldSpaceAR(b.position),w=C.parent.convertToWorldSpaceAR(C.position),x=this.node.parent.convertToNodeSpaceAR(A),N=this.node.parent.convertToNodeSpaceAR(w),this.maxY=x.y,this.minX=x.x,this.minY=N.y,this.maxX=N.x}else if(30==this.node.angle||210==this.node.angle){for(S=s,T=i;S>=0&&T>=0&&T<t.length&&(F=void 0,0!=T);)if(T%2!=0){if(null==(F=t[T-1][S+1]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.leftIdx=p;break}T-=1,S+=1}else{if(null==(F=t[T-1][S]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.leftIdx=p;break}T-=1,S=S}for(I=s,O=i;null!=t[O+1];)if(F=void 0,O%2!=0){if(null==(F=t[O+1][I]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.rightIdx=p;break}O+=1,I=I}else{if(null==(F=t[O+1][I-1]))break;if(p=this._runPig.showCircleArr.indexOf(F),this._runPig.octopusNodesWaterUserArr.includes(p)||this._runPig.isUserArr.includes(p)){this.rightIdx=p;break}O+=1,I-=1}b=t[T][S],C=t[O][I],A=b.parent.convertToWorldSpaceAR(b.position),w=C.parent.convertToWorldSpaceAR(C.position),x=this.node.parent.convertToNodeSpaceAR(A),N=this.node.parent.convertToNodeSpaceAR(w),this.minY=x.y,this.minX=x.x,this.maxY=N.y,this.maxX=N.x}}},e.prototype.onTouchMove=function(t){var e=this;if(this._runPig.touchfishId==this.tipIndex){var n=t.getLocation(),i=this.node.parent.convertToNodeSpaceAR(n);if(90==this.node.angle||270==this.node.angle)i.y>this.maxY?(i.y=this.maxY,-1==this.leftIdx||this.isPlayLeftAni||(this._runPig.playAni(this.leftIdx),this.isPlayLeftAni=!0,a.delayCallFunc(function(){e.isPlayLeftAni=!1},2e3))):i.y<this.minY&&(i.y=this.minY,-1==this.rightIdx||this.isPlayRightAni||(this._runPig.playAni(this.rightIdx),this.isPlayRightAni=!0,a.delayCallFunc(function(){e.isPlayRightAni=!1},2e3))),this.node.y<i.y?this.node.angle=90:this.node.y>i.y&&(this.node.angle=270),this.node.y=i.y;else if(150==this.node.angle||330==this.node.angle){i.x>this.maxX?(i.x=this.maxX,-1==this.rightIdx||this.isPlayRightAni||(this._runPig.playAni(this.rightIdx),this.isPlayRightAni=!0,a.delayCallFunc(function(){e.isPlayRightAni=!1},2e3))):i.x<this.minX&&(i.x=this.minX,-1==this.leftIdx||this.isPlayLeftAni||(this._runPig.playAni(this.leftIdx),this.isPlayLeftAni=!0,a.delayCallFunc(function(){e.isPlayLeftAni=!1},2e3)));var o=(this.maxY-this.minY)/(this.minX-this.maxX);if(isNaN(o))return;var r=this.maxY-o*this.minX;i.y=o*i.x+r,this.node.y<i.y?this.node.angle=150:this.node.y>i.y&&(this.node.angle=330),this.node.position=i}else if(30==this.node.angle||210==this.node.angle){if(i.x>this.maxX?(i.x=this.maxX,-1==this.rightIdx||this.isPlayRightAni||(this._runPig.playAni(this.rightIdx),this.isPlayRightAni=!0,a.delayCallFunc(function(){e.isPlayRightAni=!1},2e3))):i.x<this.minX&&(i.x=this.minX,-1==this.leftIdx||this.isPlayLeftAni||(this._runPig.playAni(this.leftIdx),this.isPlayLeftAni=!0,a.delayCallFunc(function(){e.isPlayLeftAni=!1},2e3))),o=(this.maxY-this.minY)/(this.maxX-this.minX),isNaN(o))return;r=this.maxY-o*this.maxX,i.y=o*i.x+r,this.node.y<i.y?this.node.angle=30:this.node.y>i.y&&(this.node.angle=210),this.node.position=i}var s=this._runPig.octopusNodesUserArr.indexOf(this.idx);this._runPig.showCircleArr[this.idx].color=this._runPig.getCircleColor(0),this._runPig.octopusNodesUserArr.splice(s,1);var c=this.updateIdx();this._runPig.octopusNodesUserArr.push(c);for(var l=this._runPig.circleArr,u=0;u<l.length;u++)this._runPig.showCircleArr[u].getChildByName("Circle_Choose").active=!1;this._runPig.showCircleArr[c].getChildByName("Circle_Choose").active=!0}},e.prototype.onTouchEnd=function(){var t;if(this.onTouch=!1,this._runPig.touchfishId==this.tipIndex){var e=this._runPig.octopusNodesUserArr.indexOf(this.idx);this._runPig.octopusNodesUserArr.splice(e,1),this.adjustPos(),this._runPig.octopusNodesUserArr.push(this.idx),this._runPig.showCircleArr[this.idx].getChildByName("Circle_Choose").active=!1,this.playIdleAni(),this.caculateSixPoint();var n=this._runPig.circleNodeArr[this.idx].parent.convertToWorldSpaceAR(this._runPig.circleNodeArr[this.idx].getPosition());c.sound.play(c.Sound.Peng);for(var i=0,o=this.waterArr;i<o.length;i++){var r=o[i];if(!this._runPig.octopusNodesWaterUserArr.includes(r)){var s=cc.instantiate(this._runPig.inkNode);s.name=r.toString(),this._runPig.level_inkNodes.addChild(s);var l=this._runPig.circleNodeArr[r].parent.convertToWorldSpaceAR(this._runPig.circleNodeArr[r].getPosition()),u=this._runPig.level_inkNodes.convertToNodeSpaceAR(l);s.scale=this._runPig.runRadius/60,s.position=u;var h=a.calculateRotationAngle(n,l);s.getChildByName("ink3").angle=h+90;for(var p=s.getComponent(cc.Animation),d=0,f=p.getClips();d<f.length;d++){var v=f[d];if(-1!=v.name.indexOf("Ink_shiyi")){var g=v.curveData.paths.ink3.props.position[0].value,y=s.convertToNodeSpaceAR(n);g[1]=y.y,g[0]=y.x}}p.play()}}(t=this._runPig.octopusNodesWaterUserArr).push.apply(t,this.waterArr),this._runPig.updateMap(),this.startIdx!=this.idx&&this._runPig.plusLevelStep()}},e.prototype.caculateSixPoint=function(){for(var t=this._runPig.circleNodesArr,e=0,n=null,i=0,o=0;o<t.length;o++){var r=t[o];if(i=o,(e+=r.length)>this.idx){n=r;break}}for(var s=0,a=0,c=n;a<c.length&&c[a].getChildByName("label").getComponent(cc.Label).string!=this.idx;a++)s++;var l=[];null!=t[i][s+1]&&l.push(t[i][s+1]),null!=t[i][s-1]&&l.push(t[i][s-1]),i-1>=0&&(null!=t[i-1][s]&&l.push(t[i-1][s]),i%2!=0?null!=t[i-1][s+1]&&l.push(t[i-1][s+1]):null!=t[i-1][s-1]&&l.push(t[i-1][s-1])),i+1>=0&&i+1<t.length&&(null!=t[i+1][s]&&l.push(t[i+1][s]),i%2!=0?null!=t[i+1][s+1]&&l.push(t[i+1][s+1]):null!=t[i+1][s-1]&&l.push(t[i+1][s-1])),this.waterArr=[];for(var u=0,h=l;u<h.length;u++){var p=h[u],d=this._runPig.showCircleArr.indexOf(p);this.waterArr.push(d)}},e.prototype.playSPAni=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=null),this.skeleton=this.node.getComponent(sp.Skeleton),null!=this.skeleton){this.skeleton.setAnimation(0,t,e);var i=!0;null!=n&&this.skeleton.setCompleteListener(function(){i&&(i=!1,n())})}},e.prototype.playIdleAni=function(){this.playSPAni("idel",!0),this.arrowNode.active=!1},e.prototype.playChooseAni=function(){this.arrowNode.active=!0,this.playSPAni("choose",!0)},e.prototype.playCollisionAni=function(){var t=this;"collision"!=this.skeleton.animation&&(this.playSPAni("collision",!1),a.delayCallFunc(function(){t.onTouch?t.playChooseAni():t.playIdleAni()},1e3),c.sound.play2(this._runPig.game1_error,1,!1))},e.prototype.registerTouch=function(){this.touchBox.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchBox.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchBox.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchBox.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.unregisterTouch=function(){this.touchBox.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touchBox.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchBox.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchBox.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onDisable=function(){this.unregisterTouch()},e.prototype.onEnable=function(){this.registerTouch()},e.prototype.rotatePoint=function(t){void 0===t&&(t=this.node.angle);var e=this.node.x,n=this.node.y,i=t*Math.PI/180;return[500*Math.cos(i)+e,500*Math.sin(i)+n]},e.prototype.calculateNewPoit2=function(t,e,n,i){var o=this.calculateRotationAngle(new cc.Vec2(t,e),new cc.Vec2(n,i));return[2500*Math.cos(o*Math.PI/180)+n,2500*Math.sin(o*Math.PI/180)+i]},e.prototype.calculateRotationAngle=function(t,e){var n=e.x-t.x,i=e.y-t.y;return 180*Math.atan2(i,n)/Math.PI},r([p(cc.Node)],e.prototype,"touchBox",void 0),r([p(cc.Node)],e.prototype,"arrowNode",void 0),r([h],e)}(cc.Component);n.default=d,cc._RF.pop()},{events:"events",initor:"initor",runPig:"runPig",sound:"sound"}],"panel-manager":[function(t,e,n){"use strict";var i;cc._RF.push(e,"23c5a4++wFHVpiQgf7hNQFg","panel-manager");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c,l,u=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},h=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},p=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(s,"__esModule",{value:!0}),s.PanelManager=s.PanelShowResult=void 0;var d=o("index"),f=o("events"),v=o("base-panel"),g=cc._decorator,y=g.ccclass,m=g.property;function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.container=null,t.mask=null,t}r=g.menu,o=g.disallowMultiple,(g=a=s.PanelShowResult||(s.PanelShowResult={}))[g.DONE=0]="DONE",g[g.FAILED=1]="FAILED",g[g.WAITING=2]="WAITING",function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(_,c=cc.Component),l=_,Object.defineProperty(_,"ins",{get:function(){var t=cc.director.getScene().getChildByName("Canvas");return t.getComponent(l)||t.getComponentInChildren(l)},enumerable:!1,configurable:!0}),_.prototype.onLoad=function(){this.panelQueue=[],this.panelList=[],this.mask.active=!1},_.prototype.open=function(t,e,n){return h(this,void 0,Promise,function(){var i,o,r,s=this;return p(this,function(c){switch(c.label){case 0:return(n=null!=n?n:{}).inQueue&&this.panelList.length>0?(this.panelQueue.push({prefab:t,data:e,opt:n}),[2,{panelResult:a.WAITING}]):[4,new Promise(function(e,n){d.ResUtil.loadPrefab(t).then(function(t){e(t)}).catch(function(t){n(t)})})];case 1:return r=c.sent(),cc.isValid(r)?(i=cc.instantiate(r),(o=i.getComponent(v.default))?((r=i.getComponent(cc.Widget))||((r=i.addComponent(cc.Widget)).verticalCenter=0,r.horizontalCenter=0,r.isAlignVerticalCenter=!0,r.isAlignHorizontalCenter=!0),this.currentPanel=i,this.panelList.push({prefab:t,data:e,opt:n,node:i}),i.setParent(this.container),o.show(e),this.ensureMask(),n.hideMask&&(this.mask.active=!1),f.layerEvent.emit({comp:o}),[2,new Promise(function(t){o.setFinishCallback(function(e,n){s.currentPanel=null,e.parent=null;for(var i=0;i<s.panelList.length;i++)if(e==s.panelList[i].node){s.panelList.splice(i,1);break}t({panelResult:a.DONE,values:n}),s.onNext(),s.scheduleOnce(function(){s.ensureMask(),f.layerEvent.emit({comp:null})},0)})})]):(console.warn("failed to load component of prefab",t),[2,{panelResult:a.FAILED}])):(console.warn("invalid prefab",t),[2,{panelResult:a.FAILED}])}})})},_.prototype.getPanelByPath=function(t){for(var e=this.panelList.length-1;e>=0;--e)if(this.panelList[e].prefab===t&&null!=this.panelList[e].node){var n=this.panelList[e].node.getComponent(v.default);if(null!=n)return n}return null},_.prototype.close=function(t){for(var e,n=this.panelList.length-1;n>=0;--n)if(this.panelList[n].prefab===t){null!=this.panelList[n].node&&null!=(e=this.panelList[n].node.getComponent(v.default))&&e.hide();break}},_.prototype.closeAllPanel=function(){this.panelQueue=[];for(var t,e=this.panelList.length-1;e>=0;--e)null!=this.panelList[e].node&&null!=(t=this.panelList[e].node.getComponent(v.default))&&t.hide()},_.prototype.onNext=function(){var t;this.panelList.length>0||null!=this.currentPanel||0==this.panelQueue.length||(t=this.panelQueue.shift(),this.open(t.prefab,t.data,t.opt))},_.prototype.ensureMask=function(){var t=this.panelList,e=t.length,n=this.container.childrenCount,i=this.mask;e<=0?i.active=!1:(e=t[e-1].node,i.active=!0,e.active=!0,i.setSiblingIndex(n),e.setSiblingIndex(n))},_.prototype.onMaskClick=function(){var t=this.panelList,e=t.length;e<=0||(e=(t=t[e-1]).opt,t=t.node,e.clickMaskToClose&&t.getComponent(v.default).hide())},_.prototype.hideMask=function(){this.mask.active=!1},u([m(cc.Node)],_.prototype,"container",void 0),u([m(cc.Node)],_.prototype,"mask",void 0),o=l=u([y,r("manager/panel-manager"),o],_),s.PanelManager=o,cc._RF.pop()},{}],"platform-const":[function(t,e,n){"use strict";cc._RF.push(e,"102bfHsrg9CqobW7Jt+uH7I","platform-const");var i=t,o=e,r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.GameAddictType=r.TgaConfig=r.ShareResult=r.VibrateType=r.VIDEO_RECORD_LIMIT=r.SHARE_FAIL_MAX_CNT=r.LogTag=r.DefaultSDKSwitch=r.DefaultSystemInfo=r.SDKConfig=r.VideoFailCode=r.STDSeqType=r.PlatformCode=void 0,o=i("env"),r.PlatformCode={Web:"H5"},(i=r.STDSeqType||(r.STDSeqType={}))[i.VIDEO=0]="VIDEO",i[i.SHARE=1]="SHARE",(i=r.VideoFailCode||(r.VideoFailCode={}))[i.NO_AD=0]="NO_AD",i[i.IS_AUDIT=1]="IS_AUDIT",i[i.LOW_SDK_VERSION=2]="LOW_SDK_VERSION",i[i.CANCELED=3]="CANCELED",r.SDKConfig={env:"Prod",gameId:"hQuiz",gameVersion:o.env.version,useApm:!1,useWall:!0,key:"aVXInz98OiXvsfRd",useCross:!1,shareSuccessDiff:2e3,exitOnAppProfileClick:!1,reportSubscribeMessage:!0,stdAutoUpload:!0,tgaAutoUpload:!1,videoCoolTime:6e4},r.DefaultSystemInfo={SDKVersion:"1.0.0",benchmarkLevel:1,brand:"devtools",pixelRatio:2,fontSizeSetting:16,language:"zh_CN",model:"iPhone",platform:"devtools",screenHeight:568,screenWidth:325,statusBarHeight:20,system:"iOS 10.0.1",version:"6.6.3",windowHeight:667,windowWidth:375},r.DefaultSDKSwitch={isAudit:!0,closeAD:!1},r.LogTag="[Platform]",r.SHARE_FAIL_MAX_CNT=3,r.VIDEO_RECORD_LIMIT=28e4,(o=r.VibrateType||(r.VibrateType={}))[o.SHORT=0]="SHORT",o[o.LONG=1]="LONG",(o=r.ShareResult||(r.ShareResult={}))[o.SUCCESS=0]="SUCCESS",o[o.FAILED=1]="FAILED",o[o.ERROR=2]="ERROR",r.TgaConfig={appId:"b729412a32394f89b5c540a0f1175d7e",serverUrl:"",autoTrack:{appShow:!0,appHide:!0}},(r=r.GameAddictType||(r.GameAddictType={})).Start_Lvl="start_lvl",r.Video_1="video_1",r.Video_2="video_2",r.Video_3="video_3",cc._RF.pop()},{}],platform:[function(t,e,n){"use strict";cc._RF.push(e,"fb293zSQIpJbrbOmRVHJNZB","platform");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.VideoCoolTime=void 0,i.VideoCoolTime=12e4,cc._RF.pop()},{}],"player-info":[function(t,e,n){"use strict";cc._RF.push(e,"66695YNRT9CQ4JjIUttB8l1","player-info");var i,o=t,r=n,s=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},a=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.playerInfo=r.gameType=r.saveCoinData=void 0,o("index");var c=o("const"),l=o("events"),u=(o("platform-const"),o("user-data"));function h(){this.targetNumbersMap=new Map,this.guideFlag=null,this.maxCellCount=12,this.rewardGold=10,this.curGameType=i.nomal,this.guideStepCount=11,this.auditSwitch=!1,this.miniGameKey="miniGame",this.shareGetCoinKey="shareGetCoin",this.limitMaxGold=90,this.switchDatas=null,this.showPromp=!1,this.showMiniTips=!1,this.unlockMiniGame=!1,this.onHideTime=0,this.isVideoOrShare=!1,l.platformEvent.on(this.onPlatformEvent.bind(this)),l.adEvent.on(this.onOperTap.bind(this))}r.saveCoinData=function(){},(o=i=r.gameType||(r.gameType={}))[o.nomal=0]="nomal",o[o.war=1]="war",h.prototype.onPlatformEvent=function(t){null!=t&&(t.onShow||t.onHide&&(this.onHideTime=(new Date).getTime()))},h.prototype.onOperTap=function(t){c.AdEvent.VIDEO==t||c.AdEvent.SHARE==t?this.isVideoOrShare=!0:c.AdEvent.VIDEO_END!=t&&c.AdEvent.SHARE_END!=t||setTimeout(this.endVideoOrShare.bind(this),1e3)},h.prototype.endVideoOrShare=function(){this.isVideoOrShare=!1},h.prototype.setShowMiniTips=function(t){this.showMiniTips=t},h.prototype.getShowMiniTips=function(){return this.showMiniTips},h.prototype.setUnlockMiniGame=function(t){this.unlockMiniGame=t},h.prototype.getUnlockMiniGame=function(){return this.unlockMiniGame},h.prototype.setShowPromp=function(t){this.showPromp=t},h.prototype.getShowPromp=function(){return this.showPromp},h.prototype.getLimitMaxGold=function(){return this.limitMaxGold},h.prototype.getGuideStepCount=function(){return this.guideStepCount},h.prototype.getRewardGold=function(){return this.rewardGold},h.prototype.getGameType=function(){return this.curGameType},h.prototype.setGameType=function(t){this.curGameType=t},h.prototype.getMaxCellCount=function(){return this.maxCellCount},h.prototype.finishLvl=function(){return s(this,void 0,void 0,function(){return a(this,function(){return[2]})})},h.prototype.getCurTargetNumber=function(){},h.prototype.resetData=function(){this.targetNumbersMap.clear(),this.guideFlag=null,u.userData.setWarDataNull()},h.prototype.restartData=function(){},h.prototype.isHaveOverCoinMaxCount=function(){return!1},h.prototype.checkAllGuide=function(){for(var t=this.getGuideStepCount(),e=!1,n=0;n<t;n++)r.playerInfo.checkGuide(1<<n+1)||(e=!0);return e},h.prototype.getSwitch=function(){return s(this,void 0,void 0,function(){return a(this,function(){return[2]})})},h.prototype.getAuditSwitch=function(){return this.auditSwitch},h.prototype.getSwitchData=function(t){return this.switchDatas?this.switchDatas[t]:null},h.prototype.setMiniGame=function(t,e){return s(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return[4,this.recordProp(this.miniGameKey+t,e)];case 1:return n.sent(),[2]}})})},h.prototype.getMiniGame=function(t){return this.getProp(this.miniGameKey+t)},h.prototype.recordProp=function(t,e){return s(this,void 0,void 0,function(){var n;return a(this,function(){return(n=u.userData.getProp())&&(n[t]=e,u.userData.setProp(n)),[2]})})},h.prototype.getProp=function(t){var e=u.userData.getProp();return e&&e[t]?e[t]:0},o=h,r.playerInfo=new o,cc._RF.pop()},{}],resources:[function(t,e,n){"use strict";cc._RF.push(e,"541b9CkdXJLGph2L0dr1j1D","resources");var i=t,o=n,r=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},s=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.loadString=o.loadDragonBone=o.loadDragonBoneAtlas=o.getResFromBundle=o.loadRes=o.loadRemote=o.loadRemoteSpritFrame=o.loadSpritFrame=o.loadLocalRes=o.loadAnimaClip=o.loadPrefab=void 0;var a=i("index"),c=i("env");function l(t,e){return r(this,void 0,Promise,function(){var n,i,o;return s(this,function(r){switch(r.label){case 0:return t?(n=cc.resources,i="resources",n.getInfoWithPath(t)?[3,2]:(i="remote",(n=cc.assetManager.getBundle(i))?[3,2]:[4,new Promise(function(t,e){cc.assetManager.loadBundle(i,function(n,i){n?e(n):t(i)})})])):[2];case 1:n=r.sent(),r.label=2;case 2:return[4,u(i,t,e)];case 3:return(o=r.sent())?[2,o]:[2,new Promise(function(i,o){n.load(t,e,function(t,e){t?o(t):i(e)})})]}})})}function u(t,e,n){return r(this,void 0,Promise,function(){var i,o;return s(this,function(){return e&&(r=e,s=n,a=cc.assetManager.bundles,i=function t(e){return a.has(e)&&(e=a.get(e).getInfoWithPath(r,s))?e.redirect?t(e.redirect):e.uuid:null}(t))&&(o=cc.assetManager.assets.get(i))?[2,o]:[2,null];var r,s,a})})}i("platform-const"),o.loadPrefab=function(t){return r(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return[4,l(t,cc.Prefab)];case 1:return[2,e.sent()]}})})},o.loadAnimaClip=function(t){return r(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return[4,l(t,cc.AnimationClip)];case 1:return[2,e.sent()]}})})},o.loadLocalRes=function(t,e){return new Promise(function(n,i){cc.resources.load(t,e,function(t,e){e?n(e):i("Local RES load failed, pls check out path!"+t)})})},o.loadSpritFrame=function(t,e){return r(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return[4,a.ResUtil.loadRes(t,cc.SpriteFrame)];case 1:return n=i.sent(),e&&(e.spriteFrame=n),[2,n]}})})},o.loadRemoteSpritFrame=function(t,e){return r(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,a.ResUtil.loadRemote(t,cc.SpriteFrame)];case 1:return(n=i.sent())?(n=new cc.SpriteFrame(n),e&&(e.spriteFrame=n),[2,n]):(a.platform.trackEvent("error",{type:"loadRemoteSpritFrame",message:t}),[3,3]);case 2:return i.sent(),a.platform.trackEvent("error",{type:"loadRemoteSpritFrame",message:t}),[3,3];case 3:return[2]}})})},o.loadRemote=function(t){return r(this,void 0,Promise,function(){return s(this,function(){return t?[2,new Promise(function(e,n){cc.assetManager.loadRemote(c.env.network.resourceURL+t,function(t,i){e(i),t?n(t):e(i)})})]:[2]})})},o.loadRes=l,o.getResFromBundle=u,o.loadDragonBoneAtlas=function(t){return r(this,void 0,Promise,function(){return s(this,function(){return[2,l(t,dragonBones.DragonBonesAtlasAsset)]})})},o.loadDragonBone=function(t){return r(this,void 0,void 0,function(){return s(this,function(){return[2,l(t,dragonBones.DragonBonesAsset)]})})},o.loadString=function(t){return r(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return[4,l(t,cc.TextAsset)];case 1:return[2,e.sent().text]}})})},cc._RF.pop()},{}],router:[function(t,e,n){"use strict";cc._RF.push(e,"6f7c9oS3QBE2a5+c2I03YfK","router");var i=n;Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],runPigPanel:[function(t,e){"use strict";cc._RF.push(e,"b085flAG+dGz7zdUOzlNjnp","runPigPanel"),cc.Class({extends:cc.Component,properties:{successPanelPrefab:cc.Prefab},showSuccessPanel:function(t){var e=cc.instantiate(this.successPanelPrefab);this.node.addChild(e),t&&(e.getComponent("SuccessPanel").onClose=t)}}),cc._RF.pop()},{}],runPig:[function(t,e,i){"use strict";var o;cc._RF.push(e,"d43e84emmBNUI5xzkQge/MM","runPig");var r=t,s=e,a=i;o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var c,l=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},u=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},h=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(a,"__esModule",{value:!0});var p=r("SlideRotate"),v=r("Circle"),g=cc.Label,y=r("base-layer"),m=r("index"),_=r("panel-manager"),P=r("env"),b=r("platform-const"),C=r("user-data"),A=r("events"),w=r("layer-manager"),x=r("guideHand"),N=r("clamComp"),S=r("tortoiseComp"),T=r("octopusComp"),F=r("sound"),I=r("initor"),O=r("crabNodeComp"),R=r("kissFishComp"),E=r("frogComp");function k(){var t=null!==c&&c.apply(this,arguments)||this;return t.levelNodeArr=[],t.soil=null,t.talk2=null,t.tip=null,t.fish=null,t.tmpNode=null,t.tmpC=null,t.circleNode=null,t.Fish_Choose=null,t.Fish_Wrong=null,t.Fish_Tip=null,t.Fish_Standby1=null,t.Fish_Standby2=null,t.game1_fish1=null,t.game1_fish3=null,t.game1_error=null,t.game1_gettip=null,t.bgm=null,t.indexNode=null,t.webBtnNode=null,t.tipNode=null,t.SeawaveNode=null,t.fullFrame=null,t.emptyFrame=null,t.titleNode=null,t.tipConfig=null,t.lvlConfig=null,t.runPigLvlData=null,t.tipTextArr=[],t.levelY=0,t.newbieHand=null,t.guide1=null,t.guide2=null,t.mask=null,t.block=null,t.viedioTipBtn=null,t.guildPos2=null,t.guildAngle2=0,t.tipCircleScale1=1,t.tipCirlShowTime1=.2,t.tipCircleVec1=null,t.tipCircleScale2=1,t.tipCirlShowTime2=.2,t.tipCircleVec2=null,t.tipCircleScale3=1,t.tipCirlShowTime3=.2,t.tipCircleVec3=null,t.tipCircleScale4=1,t.tipCirlShowTime4=.2,t.tipCircleVec4=null,t.tipCircleScale5=1,t.tipCirlShowTime5=.2,t.tipCircleVec5=null,t.tipCircleScale6=1,t.tipCirlShowTime6=.2,t.tipCircleVec6=null,t.tipCirlShowTime7=.2,t.radiusArr=[],t.runRadiusArr=[],t.layout=null,t.clam=null,t.isShowNumber=!1,t.pigs=null,t.circleArr=[],t.circleNodeArr=[],t.currentLevel=0,t.adsCount=0,t.currentLvlAdsCount=0,t.levelNode=null,t.isUserArr=[],t.tmpNodeArr=[],t.showCircleArr=[],t.radius=0,t.levelCount=1,t.runRadius=0,t.isPlayBGM=!0,t.haveFishTouching=!1,t.touchfishId=-999,t.levelNodeMap=new Map,t.tipArr={},t.levelInfo={},t.hideHandler=null,t.newbiwStep=-1,t.handNode=null,t.noViewTipFishIdx=-1,t.runFishCount=0,t.clamPre=null,t.tortoisePre=null,t.tortoise=null,t.clamUserArr=[],t.tortoiseUserArr=[],t.octopusNodesWaterUserArr=[],t.kissFishNodesUserArr=[],t.kissFishNodes=null,t.crabNodesUserArr=[],t.deletIdxMpa=new Set,t.crabNodesPre=null,t.crabNodes=null,t.octopusNodesPre=null,t.octopusNodes=null,t.kissFishPre=null,t.frogNodesPre=null,t.frogNodes=null,t.frogNodesUserArr=[],t.octopusNodesUserArr=[],t.octopusNodesWaterUserArr=[],t.circleNodesArr=[],t.inactiveTime=0,t.cat_pigArr=[],t.level_inkNodes=null,t.inkNodes=null,t.inkNode=null,t.helpBtn=null,t.isShowBulleNode=!1,t.Fart=null,t}r=(s=cc._decorator).ccclass,s=s.property,function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(k,c=y.default),k.prototype.onEnable=function(){m.platform.hideLoading()},k.prototype.plusLevelStep=function(){},k.prototype.showNewBieTipText=function(t){for(var e=1;e<=7;e++){var n=this.node.getChildByName("Tips_"+e);null!=n&&(n.active=!1)}null!=(t=this.node.getChildByName("Tips_"+t))&&(t.active=!0)},k.prototype.newbieTipAni=function(t,e,n,i,o){var r=this.node.getChildByName("newbieHand");null!=r&&r.removeFromParent(),null!=this.handNode&&this.handNode.removeFromParent(),this.handAction(t,e,n);for(var s=0,a=this.pigs.children;s<a.length&&"break"!==function(){var e=a[s].getComponent(p.default);return null==e||e.isGo?"continue":e.tipIndex==t?(m.delayCallFunc(function(){e.startTipFishAni2(t,i,o)},500),"break"):void 0}();s++);},k.prototype.newbieNext=function(){var t,e,n,i,o,r,s,a=this.lvlConfig.json[0][this.currentLevel],c=C.userData.getNewBieDataByName(a);if(null!=this.handNode&&this.handNode.removeFromParent(),c)if("level1"==a)2==this.newbiwStep?(this.showNewBieTipText(7),this.mask.removeFromParent(),this.guide1.active=!1,t=(r=this.circleNodeArr[8]).parent.convertToWorldSpaceAR(r.getPosition()),e=this.node.convertToNodeSpaceAR(t),n=new cc.Vec2(e.x+this.tipCircleVec2.x,e.y+this.tipCircleVec2.y+50),cc.tween(this.guide1).to(this.tipCirlShowTime2,{position:n,scale:this.tipCircleScale2}).start(),this.guide1.active=!0,this.guide1.angle=this.guildAngle2,this.mask.scale=5,this.guide1.addChild(this.mask),i=this.mask.parent.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=this.guide1.convertToNodeSpaceAR(i),this.mask.setPosition(o),this.newbieTipAni(v=2,2,13,90,0)):3==this.newbiwStep&&(this.guide1.active=!1,this.guide2.active=!1,this.mask.active=!1,this.newbiwStep=-1,this.showNewBieTipText(0),null!=this.handNode&&this.handNode.removeFromParent(),(s=this.pigs.getChildByName("tipFish2"))&&s.removeFromParent(),C.userData.setNewBieData(a,!1));else if("level2"==a)if(1==this.newbiwStep){this.viedioTipBtn.active=!0,this.handNode=cc.instantiate(this.newbieHand),this.handNode.name="newbieHand",t=this.node.convertToWorldSpaceAR(this.viedioTipBtn.getPosition()),e=this.node.convertToNodeSpaceAR(t),this.node.addChild(this.handNode);var l=+this.handNode.width/2*this.handNode.scale;c=-this.handNode.height/2*this.handNode.scale,this.handNode.position=new cc.Vec2(e.x+l,e.y+c),this.handNode.getComponent(cc.Animation).play("hand_guide"),this.mask.active=!0,this.guide1.position=new cc.Vec2(e.x+this.tipCircleVec1.x,e.y+this.tipCircleVec1.y),this.mask.scale=5,i=this.mask.parent.convertToWorldSpaceAR(this.mask.getPosition()),o=this.guide1.convertToNodeSpaceAR(i),this.mask.removeFromParent(),this.guide1.addChild(this.mask),this.mask.setPosition(o),this.guide1.active=!0,this.showNewBieTipText(1),this.guide1.scale=5,cc.tween(this.guide1).to(this.tipCirlShowTime1,{scale:this.tipCircleScale1}).start()}else if(2==this.newbiwStep){this.viedioTipBtn.active=!0,this.mask.removeFromParent(),t=(r=this.circleNodeArr[16]).parent.convertToWorldSpaceAR(r.getPosition()),e=this.node.convertToNodeSpaceAR(t),n=new cc.Vec2(e.x+this.tipCircleVec4.x,e.y+this.tipCircleVec4.y),this.guide1.active=!0,cc.tween(this.guide1).to(this.tipCirlShowTime4,{position:n,scale:this.tipCircleScale4}).start(),this.mask.scale=5,this.guide1.addChild(this.mask),i=this.mask.parent.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=this.guide1.convertToNodeSpaceAR(i),this.mask.setPosition(o);for(var u=0,h=this.pigs.children;u<h.length&&"break"!==function(){var t=h[u].getComponent(p.default);return null==t||t.isGo?"continue":13==t.tipIndex?(t.showTipHand=!0,m.delayCallFunc(function(){t.startTipFishAni2(13,150,163)},500),"break"):void 0}();u++);this.handAction(13,9,10),this.showNewBieTipText(2)}else if(3==this.newbiwStep){this.mask.removeFromParent(),this.guide1.active=!1,t=(r=this.circleNodeArr[25]).parent.convertToWorldSpaceAR(r.getPosition()),e=this.node.convertToNodeSpaceAR(t),n=new cc.Vec2(e.x+this.tipCircleVec3.x,e.y+this.tipCircleVec3.y+50),this.guide1.active=!0,this.guide1.angle=this.guildAngle2,this.mask.scale=5,cc.tween(this.guide1).to(this.tipCirlShowTime3,{position:n,scale:this.tipCircleScale3}).start(),this.guide1.addChild(this.mask),i=this.mask.parent.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=this.guide1.convertToNodeSpaceAR(i),this.mask.setPosition(o),this.handAction(7,17,32);for(var d=0,f=this.pigs.children;d<f.length&&"break"!==function(){var t=f[d].getComponent(p.default);return null==t||t.isGo?"continue":7==t.tipIndex?(m.delayCallFunc(function(){t.startTipFishAni2(7,90,0)},500),"break"):void 0}();d++);this.showNewBieTipText(3)}else if(4==this.newbiwStep){this.mask.removeFromParent(),t=(r=this.circleNodeArr[16]).parent.convertToWorldSpaceAR(r.getPosition()),e=this.node.convertToNodeSpaceAR(t),n=new cc.Vec2(e.x+this.tipCircleVec4.x,e.y+this.tipCircleVec4.y),this.guide1.active=!0,this.mask.scale=5,cc.tween(this.guide1).to(this.tipCirlShowTime4,{position:n,scale:this.tipCircleScale4}).start(),this.guide1.addChild(this.mask),i=this.mask.parent.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=this.guide1.convertToNodeSpaceAR(i),this.mask.setPosition(o);for(var v=13,g=0,y=this.pigs.children;g<y.length;g++){var _=y[g].getComponent(p.default);if(null!=_&&!_.isGo&&_.tipIndex==v){_.showTipHand=!0,_.startTipFishAni2(v,150,163);break}}this.handAction(v,9,10),this.showNewBieTipText(4)}else if(5==this.newbiwStep){this.mask.removeFromParent(),t=(r=this.circleNodeArr[9]).parent.convertToWorldSpaceAR(r.getPosition()),e=this.node.convertToNodeSpaceAR(t),n=new cc.Vec2(e.x+this.tipCircleVec5.x,e.y+this.tipCircleVec5.y),this.guide1.active=!0,this.mask.scale=5,cc.tween(this.guide1).to(this.tipCirlShowTime5,{position:n,scale:this.tipCircleScale5}).start(),this.guide1.addChild(this.mask),i=this.mask.parent.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=this.guide1.convertToNodeSpaceAR(i),this.mask.setPosition(o),this.handAction(6,8,16);for(var P=0,b=this.pigs.children;P<b.length&&"break"!==function(){var t=b[P].getComponent(p.default);return null==t||t.isGo?"continue":6==t.tipIndex?(m.delayCallFunc(function(){t.startTipFishAni2(6,150,270)},500),"break"):void 0}();P++);this.showNewBieTipText(5)}else if(6==this.newbiwStep){this.mask.removeFromParent(),t=(r=this.circleNodeArr[9]).parent.convertToWorldSpaceAR(r.getPosition()),e=this.node.convertToNodeSpaceAR(t),n=new cc.Vec2(e.x+this.tipCircleVec6.x,e.y+this.tipCircleVec6.y),this.guide1.active=!0,this.guide2.x=-100,this.mask.scale=5,cc.tween(this.guide1).to(this.tipCirlShowTime6,{position:n,scale:this.tipCircleScale6}).start(),this.guide1.addChild(this.mask),i=this.mask.parent.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=this.guide1.convertToNodeSpaceAR(i),this.mask.setPosition(o),this.handAction(1,3,9);for(var A=0,w=this.pigs.children;A<w.length&&"break"!==function(){var t=w[A].getComponent(p.default);return null==t||t.isGo?"continue":1==t.tipIndex?(m.delayCallFunc(function(){t.startTipFishAni2(1,-90,-70.8)},500),"break"):void 0}();A++);this.showNewBieTipText(5)}else 7==this.newbiwStep&&(this.guide1.active=!1,this.guide2.active=!1,this.mask.active=!1,this.newbiwStep=-1,null!=this.handNode&&this.handNode.removeFromParent(),(s=this.pigs.getChildByName("tipFish2"))&&s.removeFromParent(),C.userData.setNewBieData(a,!1),this.showNewBieTipText(0))},k.prototype.handAction=function(t,e,n){for(var i,o,r,s=!1,a=0,c=this.pigs.children;a<c.length;a++){var l=c[a].getComponent(p.default);if(null!=l&&!l.isGo&&l.tipIndex==t){s=l.showTipHand;break}}this.node.active&&this.node.activeInHierarchy&&("level1"!=(r=this.lvlConfig.json[0][this.currentLevel])&&"level2"!=r||!s||(this.handNode=cc.instantiate(this.newbieHand),this.handNode.name="newbieHand",this.node.addChild(this.handNode),i=this.handNode.getComponent(x.default),r=(o=this.circleNodeArr[e]).parent.convertToWorldSpaceAR(o.getPosition()),e=this.node.convertToNodeSpaceAR(r),o=+this.handNode.width/2*this.handNode.scale,r=-this.handNode.height/2*this.handNode.scale,this.handNode.position=new cc.Vec2(e.x+o,e.y+r),r=(r=this.circleNodeArr[n]).parent.convertToWorldSpaceAR(r.getPosition()),r=this.node.convertToNodeSpaceAR(r),n=this.showCircleArr[n].getChildByName("Circle_Choose"),i.init(r,1,n),i.startPlay()))},k.prototype.gotoLevel2=function(t){var e=this;this.SeawaveNode.active=!0;var n=this.SeawaveNode.getComponent(sp.Skeleton);n.setAnimation(0,"Seewave",!1),this.block.active=!0,this.mask.width=cc.winSize.width,this.mask.height=cc.winSize.height;var i=!0;n.setCompleteListener(function(){var t,o,r,s;i&&(e.block.active=!1,i=!1,n.setAnimation(0,"Seewave_Idle",!0),t=e.lvlConfig.json[0][e.currentLevel],C.userData.getNewBieDataByName(t)&&"level1"==t&&(e.showNewBieTipText(6),e.handNode=cc.instantiate(e.newbieHand),e.handNode.name="newbieHand",r=(o=e.circleNodeArr[12]).parent.convertToWorldSpaceAR(o.getPosition()),s=e.node.convertToNodeSpaceAR(r),e.node.addChild(e.handNode),o=+e.handNode.width/2*e.handNode.scale,r=-e.handNode.height/2*e.handNode.scale,e.handNode.position=new cc.Vec2(s.x+o,s.y+r),e.handNode.getComponent(cc.Animation).play("hand_guide"),e.mask.active=!0,e.guide1.position=s,s=e.mask.parent.convertToWorldSpaceAR(e.mask.getPosition()),s=e.guide1.convertToNodeSpaceAR(s),e.mask.removeFromParent(),e.guide1.addChild(e.mask),e.mask.setPosition(s),e.guide1.active=!0,e.newbiwStep=1,e.guide1.scale=5,cc.tween(e.guide1).to(e.tipCirlShowTime7,{scale:1}).start(),m.platform.trackEvent("guide",{step:1,levelname:t})),e.SeawaveNode.active=!1)});var o=!0;n.setEventListener(function(n,i){"top"==i.data.name&&o&&(o=!1,null!=e.levelNode&&(e.levelNode.active=!1,e.levelNode.setSiblingIndex(e.SeawaveNode.getSiblingIndex()-1),e.levelNode.active=!0,null!=t&&(t(),i=e.titleNode.getComponentInChildren(cc.Label),e.titleNode.active=!0,i&&(i.getComponent(cc.Label).string="Level "+(e.currentLevel+1),i=e.lvlConfig.json[0][e.currentLevel],C.userData.setLvlCountDataPlus("start",e.currentLevel+1),e.playDate=new Date,e.lastRunfishDte=new Date,e.runFishCount=0,m.platform.trackEvent("startmainLevel",{level:e.currentLevel+1,levelname:i,cnt:C.userData.getLvlCountDataByTpye("start",e.currentLevel+1)})))))})},k.prototype.showNumber=function(){if(this.pigs){this.isShowNumber=!this.isShowNumber;for(var t=0,e=this.pigs.children;t<e.length;t++){var n=e[t];if(null!=(_=n.getComponent(p.default))&&!_.isGo){var i=n.getChildByName("1");if(null!=i){var o=i.getChildByName("indexNode");null!=o&&(o.getChildByName("bg").active=this.isShowNumber)}}}if(null!=this.tortoise)for(var r=0,s=this.tortoise.children;r<s.length;r++){var a=s[r];null!=(_=a.getComponent(S.default))&&null!=(P=a.getChildByName("indexNode"))&&(P.active=this.isShowNumber)}if(null!=this.kissFishNodes)for(var c=0,l=this.kissFishNodes.children;c<l.length;c++)null!=(_=(m=l[c]).getComponent(R.default))&&null!=(P=m.getChildByName("indexNode"))&&(P.active=this.isShowNumber);if(null!=this.crabNodes)for(var u=0,h=this.crabNodes.children;u<h.length;u++){var d=h[u];null!=(_=d.getComponent(O.default))&&null!=(P=d.getChildByName("indexNode"))&&(P.active=this.isShowNumber)}if(null!=this.frogNodes)for(var f=0,v=this.frogNodes.children;f<v.length;f++)null!=(_=(m=v[f]).getComponent(E.default))&&null!=(P=m.getChildByName("indexNode"))&&(P.active=this.isShowNumber);if(null!=this.octopusNodes)for(var g=0,y=this.octopusNodes.children;g<y.length;g++){var m,_,P;null!=(_=(m=y[g]).getComponent(T.default))&&null!=(P=m.getChildByName("indexNode"))&&(P.active=this.isShowNumber)}}},k.prototype.checkPigsArr=function(t,e){if(this.pigs)for(var n=0,i=this.pigs.children;n<i.length;n++){var o=i[n].getComponent(p.default);if(null!=o&&!o.isGo&&(o=o.myUserArr,t.myUserArr.sort().toString()!=o.sort().toString()&&o.includes(e)))return!0}return!1},k.prototype.onLoad=function(){var t=this;this.lvlConfig=window.lvlConfig,this.tipConfig=window.tipConfig,this.runPigLvlData=window.runPigLvlData,this.date=new Date,this.noViewTipFishIdx=-1,this.viedioTipBtn.active=!0,this.radiusArr=this.lvlConfig.json[1],this.runRadiusArr=this.lvlConfig.json[2],this.levelNodeArr=window.levelNodeArr;for(var e=0;e<this.levelNodeArr.length;e++)this.levelNodeMap.set(e,this.levelNodeArr[e]);this.isShowNumber=!1;var n=this.node.getChildByName("GM");null!=n&&(P.env.mode==P.EnvMode.TEST?n.active=!0:n.active=!1),null!=(n=C.userData.getCurrentLvl())&&(this.currentLevel=n%this.lvlConfig.json[0].length,this.titleNode.active=!1),this.haveFishTouching=!1,this.adsCount=0,this.currentLvlAdsCount=0,n=function(){t.resetGame(),t.levelCount=1,t.tipNode.active=!0,t.printTime("start time")};var i=this.lvlConfig.json[0][this.currentLevel],o=this.runPigLvlData.json[i];null==o?this.nextGame():(this.levelNode=this.generLevelNode(o),this.levelNode.active=!1,n())},k.prototype.loadLevel=function(){return u(this,void 0,void 0,function(){var t,e,n,i,o,r,s,a,c,l,u,d,f,v,g,y,_,C,A,w,x,F,I,k,M,D,L,B,j,U,V,H,W;return h(this,function(){if(this.showNumberMax=0,this.radius=this.radiusArr[this.currentLevel],this.runRadius=this.runRadiusArr[this.currentLevel],this.noViewTipFishIdx=-1,null!=this.levelNode)for(t=this.levelNode,m.delayCallFunc(function(){t.removeFromParent()},500),n=this,i=0,t=this.levelNode,m.delayCallFunc(function(){t.removeFromParent()},500),e=function(t){var e=n.showCircleArr[t];cc.tween(e).delay(.5).call(function(){cc.isValid(e)&&e.active&&e.a&&(e.active=!1)})},n=this,i=0;i<this.circleNodeArr.length;i++)e(i);for(o=this.lvlConfig.json[0][this.currentLevel],null!=(o=this.runPigLvlData.json[o])?(this.levelNode=this.generLevelNode(o),this.levelNode.y=this.levelY,this.levelNode.active=!0):(o=this.levelNodeMap.get(this.currentLevel),this.loadLvlPrefab(this.currentLevel+1,null),this.levelNode=cc.instantiate(o),this.node.addChild(this.levelNode)),this.layout=this.levelNode.getChildByName("layout"),this.pigs=this.levelNode.getChildByName("pigs"),m.randomInt(1,10),P.env.noAds,r=0,s=this.pigs.children;r<s.length;r++)F=s[r],u=cc.instantiate(this.indexNode),cc.find("bg/label",u).getComponent(cc.Label).string="10000",a=F.getChildByName("1"),c=a.getChildByName("Body").width/2,(l=u.getChildByName("bg")).x=l.x-c,u.name="indexNode",a.addChild(u),this.isShowNumber=m.platform.string()===b.PlatformCode.Web,u.active=this.isShowNumber,(u=F.getChildByName("Soil"))&&u.removeFromParent(),(u=cc.instantiate(this.soil)).name="Soil",F.addChild(u),u.active=!1,u.setSiblingIndex(0);for(f=d=0,v=this.circleNodeArr;f<v.length;f++)(D=v[f]).removeFromParent();for(g=0,y=this.tmpNodeArr;g<y.length;g++)(D=y[g]).removeFromParent();for(_=function(t){m.delayCallFunc(function(){t.removeFromParent()},500)},C=0,A=this.showCircleArr;C<A.length;C++)D=A[C],_(D);if(this.showCircleArr=[],this.circleArr=[],this.tmpNodeArr=[],this.circleNodeArr=[],this.circleNodesArr=[],this.layout)for(A=0;A<this.layout.childrenCount;A++)for(this.layout.children[A],C=0,w=this.layout.children[A],C=0;C<w.childrenCount;C++)_=w.children[C],this.dealTmpC(_,d,A),d++;for(x=0;x<this.pigs.childrenCount;x++)F=this.pigs.children[x],null!=(I=F.getComponent(p.default))&&I.adjustPos();if(this.clam=this.levelNode.getChildByName("clam"),this.tortoise=this.levelNode.getChildByName("tortoises"),this.kissFishNodes=this.levelNode.getChildByName("kissFishNodes"),this.crabNodes=this.levelNode.getChildByName("crabNodes"),this.octopusNodes=this.levelNode.getChildByName("octopusNodes"),this.frogNodes=this.levelNode.getChildByName("frogNodes"),this.clamUserArr=[],null!=this.clam)for(var h=0;h<this.clam.childrenCount;h++)L=this.clam.children[h],null!=(B=L.getComponent(N.default))&&(B.adjustPos(),this.clamUserArr.push(B.idx));if(this.tortoiseUserArr=[],null!=this.tortoise)for(var G=0;G<this.tortoise.childrenCount;G++)j=this.tortoise.children[G],null!=(B=j.getComponent(S.default))&&(B.adjustPos(),this.tortoiseUserArr.push(B.idx));if(this.octopusNodesUserArr=[],this.octopusNodesWaterUserArr=[],null!=this.octopusNodes)for(var z=0;z<this.octopusNodes.childrenCount;z++)U=this.octopusNodes.children[z],null!=(B=U.getComponent(T.default))&&(B.adjustPos(),this.octopusNodesUserArr.push(B.idx),B.caculateSixPoint(),(V=this.octopusNodesWaterUserArr).push.apply(V,B.waterArr));if(this.kissFishNodesUserArr=[],null!=this.kissFishNodes)for(var X=0;X<this.kissFishNodes.childrenCount;X++)W=this.kissFishNodes.children[X],null!=(B=W.getComponent(R.default))&&(B.adjustPos(),this.kissFishNodesUserArr.push(B.idx));if(this.crabNodesUserArr=[],null!=this.crabNodes)for(var Y=0;Y<this.crabNodes.childrenCount;Y++)H=this.crabNodes.children[Y],null!=(B=H.getComponent(O.default))&&(B.adjustPos(),this.crabNodesUserArr.push(B.idx));if(this.frogNodesUserArr=[],null!=this.frogNodes)for(D=0;D<this.frogNodes.childrenCount;D++){var q=this.frogNodes.children[D];null!=(B=q.getComponent(E.default))&&(B.adjustPos(),this.frogNodesUserArr.push(B.idx))}for(this.updateMap(!1),k=0,M=this.tmpNodeArr;k<M.length;k++)(D=M[k]).active=!1;return this.sortShowNumber(),[2]})})},k.prototype.playAni=function(t,e){void 0===e&&(e=!1);for(var n=function(e){if(e==i.node)return"continue";var n=e.getComponent(p.default);if(!n)return"continue";if(n.myUserArr.includes(t)){var o=n.rotatePoint();o[0],o[1],e.color=new cc.Color(255,0,0),n.animation.play("Fish_Wrong"),F.sound.play2(i.game1_error,1,!1),I.delayCallFunc(function(){n.playStandAni()},2e3)}},i=this,o=0,r=this.pigs.children;o<r.length;o++)n(r[o]);for(var s=0,a=this.clam.children;s<a.length;s++)(_=a[s].getComponent(N.default))&&_.idx==t&&_.playCollisionAni();if(null!=this.tortoise)for(var c=0,l=this.tortoise.children;c<l.length;c++)(_=l[c].getComponent(S.default))&&_.idx==t&&_.playCollisionAni();if(null!=this.crabNodes)for(var u=0,h=this.crabNodes.children;u<h.length;u++)(_=h[u].getComponent(O.default))&&_.idx==t&&_.playCollisionAni();if(null!=this.frogNodes)for(var d=0,f=this.frogNodes.children;d<f.length;d++)(_=f[d].getComponent(E.default))&&_.idx==t&&_.playCollisionAni();if(null!=this.kissFishNodes)for(var v=0,g=this.kissFishNodes.children;v<g.length;v++)(_=g[v].getComponent(R.default))&&_.idx==t&&_.playCollisionAni();if(null!=this.octopusNodes)for(var y=0,m=this.octopusNodes.children;y<m.length;y++){var _;if((_=m[y].getComponent(T.default))&&(_.idx==t||_.waterArr.includes(t))&&!_.onTouch){_.playCollisionAni();for(var P=0,b=this.level_inkNodes.children;P<b.length;P++){var C=b[P];_.waterArr.includes(parseInt(C.name))&&C.getComponent(cc.Animation).play("Ink_red")}}}},k.prototype.printLevelFish=function(){var t=this.lvlConfig.json[0][this.currentLevel];this.levelInfo.name=t,this.levelInfo.scale=this.levelNode.scale,this.levelInfo.layout={},this.levelInfo.layout.x=this.layout.x,this.levelInfo.layout.y=this.layout.y,this.levelInfo.layout.scale=this.layout.scale,this.levelInfo.layout.cols=[],this.levelInfo.layout.cols_x=[];for(var e=0,n=this.layout.children;e<n.length;e++){var i=n[e];this.levelInfo.layout.cols_x.push(Math.round(i.x)),this.levelInfo.layout.cols.push(i.childrenCount)}this.levelInfo.pigs=[],this.levelInfo.pigs_xy=[this.pigs.x,this.pigs.y];for(var o=0,r=this.pigs.children;o<r.length;o++){var s=r[o],a=[];a.push(Math.round(s.x)),a.push(Math.round(s.y)),a.push(Math.round(s.angle)),s=cc.find("1/Body",s),a.w=s.width,a.push(Math.round(s.width)),this.levelInfo.pigs.push(a)}(t={})[this.levelInfo.name]=this.levelInfo},k.prototype.generLevelNode=function(t){void 0===t&&(t=this.levelInfo),this.cat_pigArr=[];var e=new cc.Node("level");this.node.addChild(e);var n=new cc.Node("layout"),i=new cc.Node("clam"),o=new cc.Node("tortoises"),r=new cc.Node("kissFishNodes"),s=new cc.Node("crabNodes"),a=new cc.Node("octopusNodes"),c=new cc.Node("frogNodes");e.addChild(n),e.addChild(i),e.addChild(o),e.addChild(r),e.addChild(s),e.addChild(a),e.addChild(c),e.scale=t.scale;var l=n.addComponent(cc.Layout);l.spacingX=-10,l.type=cc.Layout.Type.HORIZONTAL,l.resizeMode=cc.Layout.ResizeMode.CONTAINER,n.addComponent(cc.Widget).isAlignHorizontalCenter=!0,n.y=t.layout.y,n.scale=t.layout.scale;for(var u=0;u<t.layout.cols.length;u++){var h=(y=new cc.Node("col"+(u+1))).addComponent(cc.Layout);y.width=75,h.type=cc.Layout.Type.VERTICAL,h.resizeMode=cc.Layout.ResizeMode.CONTAINER,n.addChild(y);for(var p=0;p<t.layout.cols[u];p++){var d=cc.instantiate(this.tmpC);y.addChild(d)}y.x=t.layout.cols_x[u],y.getComponent(cc.Layout).updateLayout()}n.getComponent(cc.Layout).updateLayout();var f=new cc.Node("pigs");e.addChild(f),f.x=t.pigs_xy[0],f.y=t.pigs_xy[1];for(var v=0,g=t.pigs;v<g.length;v++){var y,m=g[v];(u=cc.instantiate(this.fish)).x=m[0],u.y=m[1],u.angle=m[2],(y=cc.find("1/Body",u)).width=m[3],f.addChild(u),y.parent.getComponent(cc.Layout).updateLayout(),u.getComponent(cc.Layout).updateLayout()}if(t.clam_xy&&(i.x=t.clam_xy[0],i.y=t.clam_xy[1]),null!=t.clam)for(var _=0,P=t.clam;_<P.length;_++){var b=P[_],C=cc.instantiate(this.clamPre);C.x=b[0],C.y=b[1],C.angle=b[2],i.addChild(C)}if(t.tortoises_xy&&(o.x=t.tortoises_xy[0],o.y=t.tortoises_xy[1]),null!=t.tortoises)for(var A=0,w=t.tortoises;A<w.length;A++){var x=w[A],N=cc.instantiate(this.tortoisePre);N.x=x[0],N.y=x[1],N.angle=x[2],o.addChild(N)}if(t.kissFishNodes_xy&&(y.x=t.kissFishNodes_xy[0],y.y=t.kissFishNodes_xy[1]),null!=t.kissFishNodes)for(var S=0,T=t.kissFishNodes;S<T.length;S++){var F=T[S],I=cc.instantiate(this.kissFishPre);I.x=F[0],I.y=F[1],I.angle=F[2],I.scaleX=F[3],I.scaleY=F[4],r.addChild(I)}if(t.octopusNodes_xy&&(a.x=t.octopusNodes_xy[0],a.y=t.octopusNodes_xy[1]),null!=t.octopusNodes)for(var O=0,R=t.octopusNodes;O<R.length;O++){var E=R[O];(D=cc.instantiate(this.octopusNodesPre)).x=E[0],D.y=E[1],D.angle=E[2],a.addChild(D)}if(t.crabNodes_xy&&(s.x=t.crabNodes_xy[0],s.y=t.crabNodes_xy[1]),null!=t.crabNodes)for(var k=0,M=t.crabNodes;k<M.length;k++){var D;E=M[k],(D=cc.instantiate(this.crabNodesPre)).x=E[0],D.y=E[1],D.angle=E[2],s.addChild(D)}if(t.frogNodes_xy&&(c.x=t.frogNodes_xy[0],c.y=t.frogNodes_xy[1]),null!=t.frogNodes)for(var L=0,B=t.frogNodes;L<B.length;L++){var j=B[L],U=cc.instantiate(this.frogNodesPre);U.x=j[0],U.y=j[1],U.angle=j[2],c.addChild(U)}return e},k.prototype.levelEndAnimation=function(t){var e=this;m.delayCallFunc(function(){e.immortal_fish.node.active=!0;var i=C.userData.getTodayCountData(e.GAME_END_DAY_KEY);0==i?(f.sound.play(f.Sound.GAME_WIN),e.immortal_fish.setAnimation(0,"appear",!1),n.playAppear(),n.init("left"),o.init("right"),o.playAppear(),C.userData.setTodayCountDataAdd(e.GAME_END_DAY_KEY)):e.immortal_fish.setAnimation(0,"appear2",!1),e.immortal_fish.setEventListener(function(e,r){var s=r.data.name;cc.log("jump triggered:",s),"popup"==s&&null!=t&&(f.sound.play(f.Sound.Draw_3_APPEAR),0==i&&(n.playDisAppear(),o.playDisAppear()),t())})},this.immortal_fishDelayTime)},k.prototype.sortShowNumber=function(t,e){void 0===t&&(t=this.pigs),void 0===e&&(e=!1);var n=m.randomInt(1,10),i=t.children.slice();null!=this.tortoise&&(i=i.concat(this.tortoise.children.slice())),null!=this.crabNodes&&(i=i.concat(this.crabNodes.children.slice())),null!=this.frogNodes&&(i=i.concat(this.frogNodes.children.slice())),null!=this.kissFishNodes&&(i=i.concat(this.kissFishNodes.children.slice())),null!=this.octopusNodes&&(i=i.concat(this.octopusNodes.children.slice()));var o=1;e&&(o=-1),i=i.sort(function(t,e){var n=t.parent.convertToWorldSpaceAR(t.position),i=e.parent.convertToWorldSpaceAR(e.position);return 300*n.x-n.y*o-(300*i.x-i.y*o)});for(var r=0;r<i.length;r++){var s=i[r],a=s.getComponent(p.default),c=s.getComponent(S.default),l=s.getComponent(O.default),u=s.getComponent(R.default),h=s.getComponent(E.default),d=s.getComponent(T.default);if(null!=a){if(a.isGo)continue;var f=s.getChildByName("1").getChildByName("indexNode");"10000"==(v=cc.find("bg/label",f).getComponent(cc.Label)).string&&(v.string=this.showNumberMax%100+n,a.tipIndex=this.showNumberMax%100+1,this.showNumberMax++)}else if(null!=c)(f=s.getChildByName("indexNode")).angle=-s.angle,"1000"==(v=cc.find("indexNode/bg/label",s).getComponent(cc.Label)).string&&(v.string=this.showNumberMax%100+n,c.tipIndex=this.showNumberMax%100+1,this.showNumberMax++);else if(null!=l)(f=s.getChildByName("indexNode")).angle=-s.angle,"1000"==(v=cc.find("indexNode/bg/label",s).getComponent(cc.Label)).string&&(v.string=this.showNumberMax%100+n,l.tipIndex=this.showNumberMax%100+1,this.showNumberMax++);else if(null!=u)(f=s.getChildByName("indexNode")).angle=-s.angle,"1000"==(v=cc.find("indexNode/bg/label",s).getComponent(cc.Label)).string&&(v.string=this.showNumberMax%100+n,u.tipIndex=this.showNumberMax%100+1,this.showNumberMax++);else if(null!=u)(f=s.getChildByName("indexNode")).angle=-s.angle,"1000"==(v=cc.find("indexNode/bg/label",s).getComponent(cc.Label)).string&&(v.string=this.showNumberMax%100+n,u.tipIndex=this.showNumberMax%100+1,this.showNumberMax++);else if(null!=h)(f=s.getChildByName("indexNode")).angle=-s.angle,"1000"==(v=cc.find("indexNode/bg/label",s).getComponent(cc.Label)).string&&(v.string=this.showNumberMax%100+n,h.tipIndex=this.showNumberMax%100+1,this.showNumberMax++);else if(null!=d){var v;(f=s.getChildByName("indexNode")).angle=-s.angle,"1000"==(v=cc.find("indexNode/bg/label",s).getComponent(cc.Label)).string&&(v.string=this.showNumberMax%100+n,d.tipIndex=this.showNumberMax%100+1,this.showNumberMax++)}}},k.prototype.onSwtich=function(){for(var t=0,e=this.tmpNodeArr;t<e.length;t++)(n=e[t]).active=!n.active;for(var n,i=0,o=this.circleNodeArr;i<o.length;i++)0==(n=o[i]).opacity?n.opacity=255:n.opacity=0},k.prototype.onShowCircleNumber=function(){for(var t=0,e=this.showCircleArr;t<e.length;t++){var n=e[t].getChildByName("label");n.active=!n.active}},k.prototype.updateMap=function(t){void 0===t&&(t=!0),this.isUserArr=[],this.isUserArr=this.isUserArr.concat(this.clamUserArr),this.isUserArr=this.isUserArr.concat(this.tortoiseUserArr),this.isUserArr=this.isUserArr.concat(this.kissFishNodesUserArr),this.isUserArr=this.isUserArr.concat(this.octopusNodesUserArr),this.isUserArr=this.isUserArr.concat(this.octopusNodesWaterUserArr),this.isUserArr=this.isUserArr.concat(this.crabNodesUserArr),this.isUserArr=this.isUserArr.concat(this.frogNodesUserArr);for(var e=[],n=0;n<this.circleArr.length;n++)if(this.deletIdxMpa.has(this.circleArr[n].uuid))e.push(void 0);else{var i=this.circleArr[n],o=this.circleNodeArr[n].parent.convertToWorldSpaceAR(this.circleNodeArr[n].getPosition());e.push(o)}this.printTime("end");var r=0;for(window.pigLen=this.pigs.children.length,n=0;n<window.pigLen;n++){var s=this.pigs.children[n];if(s.active){var a=s.getComponent(p.default);if(a&&!a.isGo){a.myUserArr=[];for(var c=a.rotatePoint(),l=c[0],u=c[1],h=(a.node.x,a.node.y,a.node.parent.convertToWorldSpaceAR(a.node.getPosition())),d=a.node.parent.convertToWorldSpaceAR(new cc.Vec2(l,u)),f=Math.max(h.y,d.y),v=Math.min(h.y,d.y),g=0,y=Math.max(this.circleArr.length-400,0);y<this.circleArr.length;y++)this.deletIdxMpa.has(this.circleArr[y].uuid)||(i=this.circleArr[y],(o=e[y]).y<v&&v-o.y>100||o.y>f&&o.y-f>100||(g++,i.calculateDistanceToSegment(h.x,h.y,d.x,d.y,o.x,o.y,this.radius)<i.radius&&(this.isUserArr.push(y),a.myUserArr.push(y))));r=Math.max(r,g)}}}t&&this.updateCicleNode()},k.prototype.updateCicleNodeBySinglePig=function(t){for(var e=t.getComponent(p.default),n=0,i=e.myUserArr;n<i.length;n++){var o=i[n],r=this.isUserArr.indexOf(o);-1!=r&&this.isUserArr.splice(r,1)}for(var s=0,a=e.myUserArr;s<a.length;s++)o=a[s],this.circleNodeArr[o].color=new cc.Color(255,255,255),this.showCircleArr[o].getComponent(cc.Sprite).spriteFrame=this.emptyFrame;e.myUserArr=[];var c=(l=e.rotatePoint())[0];t=l[1];var l=e.node.parent.convertToWorldSpaceAR(e.node.getPosition());t=e.node.parent.convertToWorldSpaceAR(new cc.Vec2(c,t));var u=this.node.convertToNodeSpaceAR(l),h=this.node.convertToNodeSpaceAR(t);for(o=0;o<this.circleArr.length;o++){var d=this.circleArr[o],f=this.circleNodeArr[o].parent.convertToWorldSpaceAR(this.circleNodeArr[o].getPosition());f=this.node.convertToNodeSpaceAR(f),d.calculateDistanceToSegment(u.x,u.y,h.x,h.y,f.x,f.y,this.radius)<d.radius&&(this.isUserArr.push(o),e.myUserArr.push(o))}for(var v=0,g=this.isUserArr;v<g.length;v++)o=g[v],this.circleNodeArr[o].color=new cc.Color(255,0,0),this.showCircleArr[o].getComponent(cc.Sprite).spriteFrame=this.fullFrame},k.prototype.calcUserArr=function(t,e,n,i,o){for(var r=[],s=o.parent.convertToWorldSpaceAR(o.getPosition()),a=(i=o.parent.convertToWorldSpaceAR(new cc.Vec2(n,i)),this.node.convertToNodeSpaceAR(s)),c=this.node.convertToNodeSpaceAR(i),l=0;l<this.circleArr.length;l++){var u=this.circleArr[l],h=this.circleNodeArr[l].parent.convertToWorldSpaceAR(this.circleNodeArr[l].getPosition());h=this.node.convertToNodeSpaceAR(h),u.calculateDistanceToSegment(a.x,a.y,c.x,c.y,h.x,h.y,this.radius)<u.radius&&r.push(l)}return r},k.prototype.updateCicleNode=function(){this.resetCicleNode();for(var t=0,e=this.isUserArr;t<e.length;t++){var n=e[t];this.circleNodeArr[n].color=new cc.Color(255,0,0),this.showCircleArr[n].getComponent(cc.Sprite).spriteFrame=this.fullFrame}for(n=0;n<this.circleNodeArr.length;n++)this.showCircleArr[n].active=!0},k.prototype.resetCicleNode=function(t){void 0===t&&(t=this.showCircleArr);for(var e=0;e<this.circleNodeArr.length;e++)this.circleNodeArr[e].color=new cc.Color(255,255,255),t[e].getComponent(cc.Sprite).spriteFrame=this.emptyFrame,t[e].active=!1},k.prototype.showCircleNode=function(){for(var t=0;t<this.showCircleArr.length;t++)this.showCircleArr[t].active=!0},k.prototype.hideThis=function(){var t=this;_.PanelManager.ins.open("prefab/panel/quitGamePanel2",{continueHandler:function(){m.platform.stopVideoRecord(),t.close(),C.userData.getCurrentLvl(),A.operEvent.emit({action:"leveltitle",data:{}});var e=t.lvlConfig.json[0][t.currentLevel];C.userData.setLvlCountDataPlus("giveup",t.currentLevel+1);var n=new Date,i=(n-t.playDate)/1e3;t.playDate=n,m.platform.trackEvent("givemainlevel",{videoNum:t.currentLvlAdsCount,usetips:t.adsCount,level:t.currentLevel+1,levelname:e,cnt:C.userData.getLvlCountDataByTpye("giveup",t.currentLevel+1),over_time:i})},resetGmaeHandler:function(){t.resetGame()}})},k.prototype.helpPanel=function(){_.PanelManager.ins.open("prefab/panel/helpPanel",{})},k.prototype.deleteUserArr=function(t){this.isUserArr=this.isUserArr.filter(function(e){return!t.includes(e)});for(var e=0;e<this.circleNodeArr.length;e++)this.circleNodeArr[e].color=new cc.Color(255,255,255);for(var n=0,i=this.isUserArr;n<i.length;n++)e=i[n],this.circleNodeArr[e].color=new cc.Color(255,0,0),this.showCircleArr[e].getComponent(cc.Sprite).spriteFrame=this.fullFrame},k.prototype.resetGame=function(){var t,e=this;this.viedioTipBtn.active=!0,P.env.mode!=P.EnvMode.TEST||P.env.noAds||(t=this.lvlConfig.json[0][this.currentLevel],this.tipArr[t]=[]),this.loadLevel(),this.resetCicleNode(),this.gotoLevel2(function(){e.updateCicleNode();var t=e.node.getChildByName("newbieHand");null!=t&&t.removeFromParent()}),this.SeawaveNode.getComponent(sp.Skeleton),e.level_inkNodes=cc.instantiate(e.inkNodes),e.level_inkNodes.removeAllChildren(),e.levelNode.addChild(e.level_inkNodes),e.level_inkNodes.y=-20,e.level_inkNodes.scale=e.level_inkNodes.scale/e.levelNode.scale,e.level_inkNodes.setSiblingIndex(e.levelNode.childrenCount),e.octopusNodes.setSiblingIndex(e.levelNode.childrenCount);for(var n=0,i=e.octopusNodesWaterUserArr.filter(function(t,e,n){return n.indexOf(t)===e});n<i.length;n++){var o=i[n],r=cc.instantiate(e.inkNode);r.name=o.toString(),e.level_inkNodes.addChild(r);var s=e.circleNodeArr[o].parent.convertToWorldSpaceAR(e.circleNodeArr[o].getPosition()),a=e.level_inkNodes.convertToNodeSpaceAR(s);r.scale=e.runRadius/60,r.position=a,r.y=r.y-10}e.addInactiveTime()},k.prototype.showSuccessPanel=function(t){C.userData.setLvlData(this.currentLevel+1),C.userData.settle(this.currentLevel),this.getComponent("runPigPanel").showSuccessPanel(t)},k.prototype.nextGame=function(){return u(this,void 0,void 0,function(){var t,e=this;return h(this,function(n){switch(n.label){case 0:return this.date=new Date,this.currentLvlAdsCount=0,this.noViewTipFishIdx=-1,t=this.lvlConfig.json[0].length,this.currentLevel+1!=t?[3,1]:(w.LayerManager.ins.open("prefab/runPig/seaWaveLayer",{switchHandler:function(){m.platform.stopVideoRecord(),e.hideHandler&&e.hideHandler(),A.operEvent.emit({action:"leveltitle",data:{}}),m.platform.trackEvent("givemainlevel",{videoNum:e.currentLvlAdsCount,usetips:e.adsCount,level:e.currentLevel+1}),e.close()}},!1),[3,3]);case 1:return this.currentLevel=(this.currentLevel+1)%this.lvlConfig.json[0].length,this.levelCount++,[4,this.loadLevel()];case 2:n.sent(),this.gotoLevel2(function(){e.updateCicleNode()}),this.viedioTipBtn.active=!0,this.printTime("nextGame time"),n.label=3;case 3:return[2]}})})},k.prototype.getTipsText=function(){var t=m.randomInt(0,this.tipTextArr.length-1);return this.tipTextArr[t]},k.prototype.onTipsAd=function(t,e){if(1!=this.currentLevel&&0!=this.currentLevel){var n=this;C.userData.hint(function(){n.onTips(t,e)})}else this.onTips(t,e)},k.prototype.onTips=function(t,e){this.adsCount++,this.currentLvlAdsCount++;var n=this.lvlConfig.json[0][this.currentLevel],i=this.tipConfig.json[n];if(null==i);else{for(var o=-1,r=0;r<i.length;r++){for(var s=0,a=this.pigs.children;s<a.length;s++){var c=a[s].getComponent(p.default);if(null!=c&&!c.isGo&&(o=parseInt(i[r].split(",")[0]))==c.tipIndex){c.isTiped=!0,c.tipHeadCirleIdx=parseInt(i[r].split(",")[1]),c.startTipFishAni(),c.playTipAni(),r=i.length;break}}if(r<i.length)for(var l=0,u=this.tortoise.children;l<u.length;l++){var h=u[l].getComponent(S.default);if(null!=h&&!h.isGo&&(o=parseInt(i[r].split(",")[0]))==h.tipIndex){h.isTiped=!0,h.startTipFishAni(),h.playTipAni(),r=i.length;break}}}if("level5"==n&&10==o)for(var f=0,v=this.pigs.children;f<v.length&&"break"!==function(){var t=v[f].getComponent(d.default);return null==t||t.isGo?"continue":5==t.tipIndex?(u.delayCallFunc(function(){t.startTipFishAni2(o,90,371)},2e3),"break"):void 0}();f++);if("level3"==n&&47==o)for(var g=0,y=this.pigs.children;g<y.length&&"break"!==function(){var t=y[g].getComponent(d.default);return null==t||t.isGo?"continue":3==t.tipIndex?(u.delayCallFunc(function(){t.startTipFishAni2(o,270,90)},2e3),"break"):void 0}();g++);C.userData.getNewBieDataByName(n)&&"level2"==n&&1==this.newbiwStep&&(this.newbiwStep=2,this.newbieNext()),this.noViewTipFishIdx="noVieo"!=e?-1:o}},k.prototype.loadLvlPrefab=function(t,e){return u(this,void 0,void 0,function(){var n,i,o=this;return h(this,function(){return n=this.lvlConfig.json,this.levelNodeMap.has(t)||null==n[0][t]?null!=e&&e():(i="runPig/prefab/level/"+n[0][t],this.openPrefab(i).then(function(n){o.levelNodeMap.set(t,n),null!=e&&e()}).catch(function(){})),[2]})})},k.prototype.openPrefab=function(t){return u(this,void 0,Promise,function(){return h(this,function(){return[2,new Promise(function(e,n){m.ResUtil.loadPrefab(t).then(function(t){e(t)}).catch(function(t){n(t)})})]})})},k.prototype.printTime=function(){this.date2=new Date,this.date2,this.date,this.date=this.date2},k.prototype.hisePeizhiBtn=function(){var t=this.node.getChildByName("peizhi");t&&(t.active=!1)},k.prototype.checkEmptyCircleNode=function(){for(var t=this,e=0,n=[],i=[],o=!0;o;){for(var r=!0,s=[],a=[],c=this.bottomLineType;c<=8;c+=2){var l=this.circleNodesArr[c][this.lineIndex],u=this.checkCircleNodeEmpty(l),h=u[0],p=u[1];if(!h){r=!1,o=!1;break}s.push(l),a.push(p)}r?(0==this.bottomLineType&&this.lineIndex++,e++,this.bottomLineType=(this.bottomLineType+1)%2,n=n.concat(s),i=i.concat(a)):o=!1}if(e>0){var d=this.node.getChildByName("bg");if(cc.tween(d).by(1,{y:-35*e}).start(),this.block.active=!0,this.delteLine+=e,this.delteLine2+=e,this.deltePointCount+=n.length,this.deltePointCount>=45){var f=Math.floor(this.delteLine/2);this.addPointAndFish(this.deltePointCount),this.delteLine-=f,this.deltePointCount=0}var v=this.node.getChildByName("Pickup_Truck").getComponent(cc.Animation);v.play(),cc.tween(this.levelNode).by(1,{y:-35*e}).call(function(){t.block.active=!1;for(var e=[],o=0,r=n;o<r.length;o++){var s=r[o],a=t.showCircleArr.indexOf(s);-1!=a&&(e.push(a),t.deletIdxArr.push(t.circleArr[a].uuid),t.deletIdxMpa.add(t.circleArr[a].uuid)),s.removeFromParent()}for(var c=0,l=i;c<l.length;c++){var u=l[c];null!=u&&u.removeFromParent()}t.updateMap(!1),v.stop()}).start()}},k.prototype.checkCircleNodeEmpty=function(t){for(var e=t.parent.convertToWorldSpaceAR(t.position),n=0,i=this.clam.children;n<i.length;n++){var o=i[n],r=o.parent.convertToWorldSpaceAR(o.position);if(Math.abs(r.x-e.x)<5&&Math.abs(r.y-e.y)<5)return[!0,o]}var s=(new cc.Color).fromHEX("#F5DFB3");return[t.color.r==s.r&&t.color.g==s.g&&t.color.b==s.b,null]},k.prototype.isOnWater=function(t){var e=this.octopusNodesWaterUserArr.includes(t);if(e)for(var n=0,i=this.octopusNodes.children;n<i.length;n++){var o=i[n].getComponent(T.default);if(o.waterArr.includes(t)){o.playCollisionAni();for(var r=0,s=this.level_inkNodes.children;r<s.length;r++){var a=s[r];o.waterArr.includes(parseInt(a.name))&&a.getComponent(cc.Animation).play("Ink_red")}}}return e},k.prototype.addPointAndFish=function(t){return a(this,void 0,void 0,function(){var e,n,i,o,r,a,l,u,h,p,d,f,v,y,m,_,P,b,C;return s(this,function(){for(e=[],n=t/9,i=this.showCircleArr.length,o=0;o<this.layout.childrenCount;o++)for(r=this.layout.children[o],null!=(a=r.getComponent(cc.Layout))&&(a.enabled=!1),r.children[r.childrenCount-1],u=0,r=this.layout.children[o],null!=(a=r.getComponent(cc.Layout))&&(a.enabled=!1),l=r.children[r.childrenCount-1],u=0;u<n;u++)h=cc.instantiate(this.tmpC),r.addChild(h),h.setSiblingIndex(r.childrenCount),h.position=new cc.Vec2(l.x,l.y+75*(u+1)),this.dealTmpC(h,i,o,!0),i++,p=r.convertToWorldSpaceAR(h.getPosition()),d=this.pigs.convertToNodeSpaceAR(p),f=g.generateUUID(),v=new c.default(f,d,0==o||o==this.layout.childrenCount-1),e.push(v);if(y=this.foreverConfig.json[this.configIdx],this.currentlines+=n,this.currentlines>y[1]&&-1!=y[1]&&(this.configIdx++,y=this.foreverConfig.json[this.configIdx],this.currentlines=n),this.generClam(e,this.clam,this.pigs,y),this.clamUserArr=[],null!=this.clam)for(m=0;m<this.clam.childrenCount;m++)b=this.clam.children[m],null!=(C=b.getComponent(N.default))&&(C.adjustPos(),this.clamUserArr.push(C.idx));if(this.tortoiseUserArr=[],null!=this.tortoise)for(_=0;_<this.tortoise.childrenCount;_++)b=this.tortoise.children[_],null!=(C=b.getComponent(N.default))&&(C.adjustPos(),this.tortoiseUserArr.push(C.idx));if(this.kissFishNodesUserArr=[],null!=this.kissFishNodes)for(P=0;P<this.kissFishNodes.childrenCount;P++)b=this.kissFishNodes.children[P],null!=(C=b.getComponent(N.default))&&(C.adjustPos(),this.kissFishNodesUserArr.push(C.idx));return this.generFish(e,this.pigs,y),this.updateMap(!0),[2]})})},k.prototype.dealTmpC=function(t,e,n,i){void 0===i&&(i=!1);var o=new v.default(t.x,t.y,this.radius,this.runRadius);this.circleArr[e]=o,this.circleNodeArr[e]=t,t.opacity=0;var r=t.parent.convertToWorldSpaceAR(t.getPosition()),s=this.node.convertToNodeSpaceAR(r);if("H5"===b.PlatformCode.Web){var a=cc.instantiate(this.tmpNode);a.getChildByName("label").getComponent(g).string=e+"",a.position=s,this.node.addChild(a),this.tmpNodeArr.push(a)}var c=this.node.getChildByName("bg"),l=c.convertToNodeSpaceAR(r),u=cc.instantiate(this.circleNode);u.getChildByName("Circle_Warning").getChildByName("Circle_Warning"),u.position=l,u.scale=this.runRadius/60,c.addChild(u),u.setSiblingIndex(c.childrenCount),u.active=i;var h=u.getChildByName("label");h.getComponent(cc.Label).string=e+"",h.active=!1,this.showCircleArr[e]=u,null==this.circleNodesArr[n]&&(this.circleNodesArr[n]=[]),this.circleNodesArr[n].push(u)},k.prototype.checkHaveTipFishTortoise=function(){for(var t=!1,e=0,n=this.pigs.children;e<n.length;e++)if(null!=(r=n[e].getComponent(p.default))&&!r.isGo&&r.isTiped){t=!0;break}if(!t)for(var i=0,o=this.tortoise.children;i<o.length;i++){var r;if(null!=(r=o[i].getComponent(S.default))&&!r.isGo&&r.isTiped){t=!0;break}}return t},k.prototype.addInactiveTime=function(){var t=this;this.isShowBulleNode=!0,this.unscheduleAllCallbacks(),this.inactiveTime=0,this.schedule(function(){t.checkHaveTipFishTortoise()&&(t.inactiveTime=0),t.inactiveTime++,30==t.inactiveTime&&(t.inactiveTime=0,t.addBulleScreen(1))},1,cc.macro.REPEAT_FOREVER)},k.prototype.addBulleScreen=function(){},k.prototype.onFishJump=function(){var t=this;this.newbieJumpBtn.active=C.userData.showVideoGoPanel,this.lvlConfig.json[0][this.currentLevel],this.addBulleScreen(4),cc.instantiate(this.Fart);for(var e=null,n=null,i=0,o=this.pigs.children;i<o.length;i++){var r=o[i];null==(d=r.getComponent(p.default))||d.isGo||d.isTiped&&(e=r,n=d,d.isGo=!0,this.touchfishId==k.tipIndex&&(this.haveFishTouching=!1,this.touchfishId=-999))}if(null!=this.tortoise)for(var s=0,a=this.tortoise.children;s<a.length;s++){var c=a[s];null==(d=c.getComponent(S.default))||d.isGo||d.isTiped&&(e=c,n=d,d.isGo=!0,this.touchfishId==d.tipIndex&&(this.haveFishTouching=!1,this.touchfishId=-999))}if(null!=e){var l=e.parent.convertToWorldSpaceAR(e.getPosition());this.node.convertToNodeSpaceAR(l),cc.tween(n.node).to(.5,{scale:0}).call(function(){n.node.destroy(),t.updateMap()}).start()}else for(var u=0,h=this.kissFishNodes.children;u<h.length;u++){var d;null==(d=h[u].getComponent(R.default))||d.isGo||(30==d.tipIndex||d.tipIndex,d.isTiped&&(d.isGo=!0,d.jump()))}},k.prototype.getAllPigsArrLength=function(){for(var t=0,e=0;e<this.pigs.childrenCount;e++){var n=this.pigs.children[e].getComponent(p.default);null!=n&&(t+=n.myUserArr.length)}return t},k.prototype.octopusClose=function(){for(var t=0,e=this.octopusNodes.children;t<e.length;t++)e[t].removeComponent(T.default)},k.prototype.isGetFragment=function(){return 1==this.lvlConfig.json[2][this.currentLevel]&&!C.userData.isCollectFragmentsData(this.currentLevel)&&this.stepCount-this.level_step>=0},k.prototype.isHaveFragment=function(){return 1==this.lvlConfig.json[2][this.currentLevel]&&!C.userData.isCollectFragmentsData(this.currentLevel)},l([s({type:[cc.Prefab],displayName:"levels"})],k.prototype,"levelNodeArr",void 0),l([s(cc.Prefab)],k.prototype,"soil",void 0),l([s(cc.Prefab)],k.prototype,"talk2",void 0),l([s(cc.Prefab)],k.prototype,"tip",void 0),l([s(cc.Prefab)],k.prototype,"fish",void 0),l([s(cc.Node)],k.prototype,"tmpNode",void 0),l([s(cc.Node)],k.prototype,"tmpC",void 0),l([s(cc.Node)],k.prototype,"circleNode",void 0),l([s(cc.AnimationClip)],k.prototype,"Fish_Choose",void 0),l([s(cc.AnimationClip)],k.prototype,"Fish_Wrong",void 0),l([s(cc.AnimationClip)],k.prototype,"Fish_Tip",void 0),l([s(cc.AnimationClip)],k.prototype,"Fish_Standby1",void 0),l([s(cc.AnimationClip)],k.prototype,"Fish_Standby2",void 0),l([s(cc.AudioClip)],k.prototype,"game1_fish1",void 0),l([s(cc.AudioClip)],k.prototype,"game1_fish3",void 0),l([s(cc.AudioClip)],k.prototype,"game1_error",void 0),l([s(cc.AudioClip)],k.prototype,"game1_gettip",void 0),l([s(cc.AudioClip)],k.prototype,"bgm",void 0),l([s(cc.Node)],k.prototype,"indexNode",void 0),l([s(cc.Node)],k.prototype,"tipNode",void 0),l([s(cc.Node)],k.prototype,"SeawaveNode",void 0),l([s(cc.SpriteFrame)],k.prototype,"fullFrame",void 0),l([s(cc.SpriteFrame)],k.prototype,"emptyFrame",void 0),l([s(cc.Node)],k.prototype,"titleNode",void 0),l([s(cc.Button)],k.prototype,"newbieJumpBtn",void 0),l([s({type:[cc.String],tooltip:"tips"})],k.prototype,"tipTextArr",void 0),l([s],k.prototype,"levelY",void 0),l([s(cc.Prefab)],k.prototype,"newbieHand",void 0),l([s(cc.Node)],k.prototype,"guide1",void 0),l([s(cc.Node)],k.prototype,"guide2",void 0),l([s(cc.Node)],k.prototype,"mask",void 0),l([s(cc.Node)],k.prototype,"block",void 0),l([s(cc.Node)],k.prototype,"inkNodes",void 0),l([s(cc.Node)],k.prototype,"viedioTipBtn",void 0),l([s(cc.Vec2)],k.prototype,"guildPos2",void 0),l([s],k.prototype,"guildAngle2",void 0),l([s],k.prototype,"tipCircleScale1",void 0),l([s],k.prototype,"tipCirlShowTime1",void 0),l([s(cc.Vec2)],k.prototype,"tipCircleVec1",void 0),l([s],k.prototype,"tipCircleScale2",void 0),l([s],k.prototype,"tipCirlShowTime2",void 0),l([s(cc.Vec2)],k.prototype,"tipCircleVec2",void 0),l([s],k.prototype,"tipCircleScale3",void 0),l([s],k.prototype,"tipCirlShowTime3",void 0),l([s(cc.Vec2)],k.prototype,"tipCircleVec3",void 0),l([s],k.prototype,"tipCircleScale4",void 0),l([s],k.prototype,"tipCirlShowTime4",void 0),l([s(cc.Vec2)],k.prototype,"tipCircleVec4",void 0),l([s],k.prototype,"tipCircleScale5",void 0),l([s],k.prototype,"tipCirlShowTime5",void 0),l([s(cc.Vec2)],k.prototype,"tipCircleVec5",void 0),l([s],k.prototype,"tipCircleScale6",void 0),l([s],k.prototype,"tipCirlShowTime6",void 0),l([s(cc.Vec2)],k.prototype,"tipCircleVec6",void 0),l([s],k.prototype,"tipCirlShowTime7",void 0),l([s(cc.Prefab)],k.prototype,"clamPre",void 0),l([s(cc.Prefab)],k.prototype,"tortoisePre",void 0),l([s(cc.Prefab)],k.prototype,"crabNodesPre",void 0),l([s(cc.Prefab)],k.prototype,"octopusNodesPre",void 0),l([s(cc.Prefab)],k.prototype,"kissFishPre",void 0),l([s(cc.Prefab)],k.prototype,"frogNodesPre",void 0),l([s(cc.Prefab)],k.prototype,"inkNode",void 0),l([s(cc.Prefab)],k.prototype,"Fart",void 0),l([s(cc.Node)],k.prototype,"helpBtn",void 0),r=l([r],k),a.default=r,cc._RF.pop()},{}],"screen-fit":[function(t,e,n){"use strict";var i;cc._RF.push(e,"2e320HsVFZOLq5aawg6mXyI","screen-fit");var o=e,r=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var s,a=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(r,"__esModule",{value:!0});var c=(l=cc._decorator).ccclass;o=l.property;var l=l.menu;function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.canvas=null,t}(function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(u,s=cc.Component),u.prototype.onLoad=function(){var t=(e=cc.view.getFrameSize()).width/e.height,e=this.canvas;t<=750/1334?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1)},a([o(cc.Canvas)],u.prototype,"canvas",void 0),l=a([c,l("ext/screen-fit")],u),r.default=l,cc._RF.pop()},{}],seaWaveLayer:[function(t,e,n){"use strict";var i;cc._RF.push(e,"7cb74wDMY5Dl5kl4qxx6nbg","seaWaveLayer");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(s,"__esModule",{value:!0});var l=o("base-layer"),u=o("events");function h(){var t=null!==a&&a.apply(this,arguments)||this;return t.SeawaveNode=null,t.switchHandler=null,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(h,a=l.default),h.prototype.init=function(t){t.switchHandler&&(this.switchHandler=t.switchHandler)},h.prototype.start=function(){var t=this;this.SeawaveNode.active=!0;var e=this.SeawaveNode.getComponent(sp.Skeleton);e.setAnimation(0,"Seewave",!1);var n=!0,i=!0;e.setEventListener(function(e,n){"top"==n.data.name&&i&&(i=!1,t.switchHandler&&t.switchHandler())}),e.setCompleteListener(function(){n&&(n=!1,t.close(),u.operEvent.emit({action:"showMaiTip",data:{}}))})},c([r(cc.Node)],h.prototype,"SeawaveNode",void 0),o=c([o],h),s.default=o,cc._RF.pop()},{}],settingPanel:[function(t,e,n){"use strict";var i;cc._RF.push(e,"e89bdgtgupHGanNwBAa4xjW","settingPanel");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(s,"__esModule",{value:!0});var l=o("index"),u=o("events"),h=o("user-data"),p=o("base-panel"),d=o("switch-button"),f=o("panel-manager"),v=o("player-info");function g(){var t=null!==a&&a.apply(this,arguments)||this;return t.audioBtn=null,t.musicBtn=null,t.vibrateBtn=null,t.varsionLabel=null,t.gmNode=null,t.gmNode2=null,t.changeBgNode=null,t.m_bAudioOn=!0,t.m_bMusicOn=!0,t.m_bVibrateOn=!0,t.isPromp=!1,t.isHideBg=!1,t.continueHandler=null,t.resetGmaeHandler=null,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(g,a=p.default),g.prototype.init=function(t){null!=t&&(t.continueHandler&&(this.continueHandler=t.continueHandler),t.resetGmaeHandler&&(this.resetGmaeHandler=t.resetGmaeHandler),this.isHideBg=t.isHideBg)},g.prototype.goMain=function(){h.userData.close(),this.continueHandler&&this.continueHandler(),this.hide()},g.prototype.reset=function(){this.resetGmaeHandler&&this.resetGmaeHandler(),this.hide()},g.prototype.start=function(){h.userData.showMask();var t=h.userData.getSetting();this.m_bAudioOn=t.effectSound,this.m_bMusicOn=t.bgmSound,this.m_bVibrateOn=t.vibrate,this.updateAudioBtn(),this.updateMusicBtn(),this.updateVibrateBtn()},g.prototype.copyOpenId=function(){},g.prototype.onAudioBtnTap=function(){this.m_bAudioOn=!this.m_bAudioOn,this.updateAudioBtn(),h.userData.setSetting({effectSound:this.m_bAudioOn}),l.platform.trackEvent("switch",{item:"audio",bool:this.m_bAudioOn})},g.prototype.updateAudioBtn=function(){null!=this.audioBtn&&this.audioBtn.setState(this.m_bAudioOn)},g.prototype.onMusicBtnTap=function(){this.m_bMusicOn=!this.m_bMusicOn,this.updateMusicBtn(),h.userData.setSetting({bgmSound:this.m_bMusicOn}),l.platform.trackEvent("switch",{item:"music",bool:this.m_bMusicOn})},g.prototype.updateMusicBtn=function(){null!=this.musicBtn&&this.musicBtn.setState(this.m_bMusicOn)},g.prototype.onVibrateBtnTap=function(){this.m_bVibrateOn=!this.m_bVibrateOn,this.updateVibrateBtn(),h.userData.setSetting({vibrate:this.m_bVibrateOn}),l.platform.trackEvent("switch",{item:"vibrate",bool:this.m_bVibrateOn})},g.prototype.updateVibrateBtn=function(){null!=this.vibrateBtn&&this.vibrateBtn.setState(this.m_bVibrateOn)},g.prototype.hideThis=function(){u.operEvent.emit({action:u.default.startWarTime,data:{}}),this.hide()},g.prototype.clearLayer=function(){this.hide(),v.playerInfo.resetData()},g.prototype.restart=function(){this.hide(),v.playerInfo.getGameType()===v.gameType.nomal?v.playerInfo.restartData():(v.playerInfo.getGameType(),v.gameType.war),u.operEvent.emit({action:u.default.restartCellLayer,data:{cellDelayTime:0}})},g.prototype.toLoading=function(){h.userData.saveWarData(),cc.director.loadScene("main",function(){u.operEvent.clear()})},g.prototype.promp=function(){this.hide(),v.playerInfo.setShowPromp(!0)},g.prototype.level=function(t,e){e=Number(e),h.userData.setLvl(e),v.playerInfo.restartData(),this.hide()},g.prototype.miniGame=function(){f.PanelManager.ins.open("prefab/panel/miniGamePanel",null)},g.prototype.showGm=function(){},g.prototype.miniGameUnlock=function(){v.playerInfo.setUnlockMiniGame(!0)},g.prototype.miniGameTip=function(){v.playerInfo.setShowMiniTips(!0)},g.prototype.onDisable=function(){h.userData.hideMask()},c([r(d.default)],g.prototype,"audioBtn",void 0),c([r(d.default)],g.prototype,"musicBtn",void 0),c([r(d.default)],g.prototype,"vibrateBtn",void 0),c([r(cc.Node)],g.prototype,"gmNode",void 0),c([r(cc.Node)],g.prototype,"gmNode2",void 0),c([r(cc.Node)],g.prototype,"changeBgNode",void 0),o=c([o],g),s.default=o,cc._RF.pop()},{}],sound:[function(t,e,n){"use strict";cc._RF.push(e,"1dfd7/QcLFMzLP9nNs6gHkC","sound");var i,o=t,r=n,s=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},a=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.sound=r.Sound=void 0;var c=o("const"),l=o("events"),u=o("user-data"),h=o("index");function p(){var t=this;this.isSharing=!1,this.isHiding=!1,this.m_specificBgmClip=null,this.delayKey=0,l.userEvent.on(function(e){null!=e&&"setting"===e.kind&&t.onBGMSwitchChange()}),l.platformEvent.on(function(t){t.onShow?cc.audioEngine.resumeAll():t.onHide&&cc.audioEngine.pauseAll()}),l.adEvent.on(function(e){t.isSharing=e==c.AdEvent.SHARE||e==c.AdEvent.VIDEO,t.onSoundChange()}),this.clips={}}(o=i=r.Sound||(r.Sound={})).CLICK="sound/click",o.BGM="sound/game1_sea",o.WIN="sound/game1_win",p.prototype.onSoundChange=function(){var t=this;clearTimeout(this.delayKey),this.delayKey=setTimeout(function(){clearTimeout(t.delayKey),t.delayKey=0,t.isSharing||t.isHiding?t.stopAll():t.resumeAll()},100)},p.prototype.stopAllEffects=function(){cc.audioEngine.stopAllEffects()},p.prototype.resumeAll=function(){cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects(),this.onBGMSwitchChange()},p.prototype.stopAll=function(){cc.audioEngine.stopMusic(),cc.audioEngine.stopAllEffects()},p.prototype.play=function(t,e){return void 0===e&&(e=1),s(this,void 0,void 0,function(){var n;return a(this,function(i){switch(i.label){case 0:return!1===u.userData.getSetting().effectSound||null==t?[2]:(e=Math.max(1,Math.min(0,e)),t instanceof cc.AudioClip?(n=t,[3,4]):[3,1]);case 1:return null==this.clips[t]?[3,2]:(n=this.clips[t],[3,4]);case 2:return[4,new Promise(function(e){cc.resources.load(t,cc.AudioClip,function(t,n){e(t?null:n)})})];case 3:n=i.sent(),this.clips[t]=n,i.label=4;case 4:return n?(cc.audioEngine.playEffect(n,!1),cc.audioEngine.setEffectsVolume(e),[2,n.duration]):[2]}})})},p.prototype.playBundle=function(t,e){var n=this;null!=(t=cc.assetManager.getBundle(t))&&t.load(e,cc.AudioClip,function(t,e){null==t&&null!=e&&n.play(e)})},p.prototype.play2=function(t,e,n){var i;if(void 0===e&&(e=1),void 0===n&&(n=!1),!1!==u.userData.getSetting().effectSound&&null!=t&&(e=Math.max(1,Math.min(0,e)),i=t instanceof cc.AudioClip?t:i))return n=cc.audioEngine.playEffect(i,n),cc.audioEngine.setEffectsVolume(e),n},p.prototype.playBGM=function(){return s(this,void 0,void 0,function(){var t=this;return a(this,function(){return!1!==u.userData.getSetting().bgmSound&&(this.bgmID=0,h.ResUtil.loadRes(i.BGM,cc.AudioClip).then(function(e){null!=e&&(t.bgmID=cc.audioEngine.playMusic(e,!0),cc.audioEngine.setMusicVolume(1))}).catch(function(t){cc.error("play bgm error: ",t),h.platform.trackEvent("error",{type:"load_level_config",message:""})})),[2]})})},p.prototype.stopBGM=function(){return s(this,void 0,void 0,function(){return a(this,function(){return!1!==u.userData.getSetting().bgmSound&&(0!==this.bgmID&&(cc.audioEngine.stopMusic(),this.bgmID=0),this.m_specificBgmClip=null),[2]})})},p.prototype.playSpecificBGM=function(t){return s(this,void 0,void 0,function(){return a(this,function(){return this.m_specificBgmClip=t,!1!==u.userData.getSetting().bgmSound&&(this.bgmID=cc.audioEngine.playMusic(t,!0),cc.audioEngine.setMusicVolume(1)),[2]})})},p.prototype.onBGMSwitchChange=function(){var t=cc.audioEngine.getState(this.bgmID)!=cc.audioEngine.AudioState.ERROR;u.userData.getSetting().bgmSound?t?cc.audioEngine.resumeMusic():null!=this.m_specificBgmClip?this.playSpecificBGM(this.m_specificBgmClip):this.playBGM():t&&cc.audioEngine.stopMusic()},o=p,r.sound=new o,cc._RF.pop()},{}],"switch-button":[function(t,e,n){"use strict";var i;cc._RF.push(e,"4cd9crDoXdOKZjoFe7YxYvn","switch-button");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(s,"__esModule",{value:!0});var l=o("index");function u(){var t=null!==a&&a.apply(this,arguments)||this;return t.bg=null,t.offSign=null,t.onSign=null,t.offBg=null,t.onBg=null,t.m_bOpen=!0,t}o=(r=cc._decorator).ccclass,r=r.property,function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(u,a=cc.Component),u.prototype.start=function(){this.updateState()},u.prototype.getState=function(){return this.m_bOpen},u.prototype.setState=function(t){this.m_bOpen=t,this.updateState()},u.prototype.updateState=function(){null!=this.bg&&(this.bg.spriteFrame=this.m_bOpen?this.onBg:this.offBg),l.showNode(this.onSign,this.m_bOpen),l.showNode(this.offSign,!this.m_bOpen)},c([r(cc.Sprite)],u.prototype,"bg",void 0),c([r(cc.Node)],u.prototype,"offSign",void 0),c([r(cc.Node)],u.prototype,"onSign",void 0),c([r(cc.SpriteFrame)],u.prototype,"offBg",void 0),c([r(cc.SpriteFrame)],u.prototype,"onBg",void 0),o=c([o],u),s.default=o,cc._RF.pop()},{}],time:[function(t,e,n){"use strict";cc._RF.push(e,"56b5cN6aIRPb5ZB1yx+3tHz","time");var i=t,o=e,r=n;function s(){this.DaySeconds=86400,this.weekDay=-1,this._cachedZoneOffset=null,this.dayChangeT=-1,this.initd=!1}function a(t,e){return t=new Date(1e3*t),e=new Date(1e3*e),t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()}function c(t){return t<10?"0"+t:t+""}function l(t){return(t=new Date(1e3*t)).getFullYear()+"/"+c(t.getMonth()+1)+"/"+c(t.getDate())}function u(t){return c((t=new Date(1e3*t)).getHours())+":"+c(t.getMinutes())+":"+c(t.getSeconds())}Object.defineProperty(r,"__esModule",{value:!0}),r.formatTimeString=r.time=r.timeEvent=r.getFullDisplayDateTime=r.getFullDisplayTime=r.getFullDisplayDate=r.addZero=r.isToday=r.isSameDay=void 0,o=i("typed-event"),s.prototype.sync=function(t){var e;if(null==t)return this.serverStartT=Date.now(),this.clientStartT=Date.now(),this.weekDay=-1,void(this.dayChangeT=-1);this.serverStartT=1e3*t.serverTime,this.clientStartT=Date.now(),this.weekDay=null!==(e=t.weekDay)&&void 0!==e?e:-1,this.dayChangeT=null!==(t=t.dayChangeT)&&void 0!==t?t:-1},Object.defineProperty(s.prototype,"serverTime",{get:function(){return Math.floor((this.serverStartT+Date.now()-this.clientStartT)/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"timeZoneOffset",{get:function(){var t;return null==this._cachedZoneOffset&&(t=new Date,t=Math.round(t.getTimezoneOffset()/6),this._cachedZoneOffset=-t/10),this._cachedZoneOffset},enumerable:!1,configurable:!0}),s.prototype.startGlobalTimer=function(t){var e=this;t.schedule(function(t){var n=r.time.serverTime,i=n>e.dayChangeT&&e.dayChangeT>0;i&&(e.dayChangeT+=86400),r.timeEvent.emit({now:n,dt:t,dayChange:i})},1,cc.macro.REPEAT_FOREVER)},i=s,r.isSameDay=a,r.isToday=function(t){return a(r.time.serverTime,t)},r.addZero=c,r.getFullDisplayDate=l,r.getFullDisplayTime=u,r.getFullDisplayDateTime=function(t){return l(t)+" "+u(t)},r.timeEvent=new o.TypedEvent,r.time=new i,r.formatTimeString=function(t,e){if(t<=0)return e?"00:00:00":"00:00";var n=t%60,i=(t=(t-n)/60)%60,o=(t-i)/60;return t="",(o>0||e)&&(t+=(o=o<10?"0"+o:o)+":"),(t+=(i=i<10?"0"+i:i)+":")+(n<10?"0"+n:n)},cc._RF.pop()},{}],toast:[function(t,e,n){"use strict";cc._RF.push(e,"44018qeIjdFH74mopha/gbU","toast");var i=t,o=n,r=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},s=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(o,"__esModule",{value:!0}),o.showToast=void 0;var a=i("resources");o.showToast=function(t,e){return void 0===e&&(e=3e3),r(this,void 0,void 0,function(){var n,i,o,r,c;return s(this,function(s){switch(s.label){case 0:return null==t||""==t?[2]:(n=cc.director.getScene().getComponentInChildren(cc.Canvas),(o=n.node.getChildByName("Toast"))&&o.destroy(),[4,a.loadLocalRes("Texture/common/Text_BG",cc.SpriteFrame)]);case 1:return r=s.sent(),(i=new cc.Node("Toast")).opacity=0,(c=new cc.Node("LabelNode")).addComponent(cc.Label).string=t,(o=i.addComponent(cc.Layout)).resizeMode=cc.Layout.ResizeMode.CONTAINER,o.paddingLeft=30,o.paddingRight=30,o.paddingTop=25,o.paddingBottom=20,(o=i.addComponent(cc.Sprite)).type=cc.Sprite.Type.SLICED,o.spriteFrame=r,i.addChild(c),n.node.addChild(i),r=cc.callFunc(function(){cc.tween(i).to(.3,{opacity:255}).start()}),c=cc.callFunc(function(){var t=setTimeout(function(){i.destroy(),clearTimeout(t)},e)},this),c=cc.sequence(r,c),i.runAction(c),[2]}})})},cc._RF.pop()},{}],tortoiseComp:[function(t,e,n){"use strict";var i;cc._RF.push(e,"403aeoOsytD8bigeLx6YvNJ","tortoiseComp");var o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("runPig"),a=t("index"),c=t("initor"),l=t("sound"),u=t("user-data"),h=t("env"),p=t("vibrate"),d=(t("panel-manager"),cc.Vec2),f=t("events"),v=cc._decorator,g=v.ccclass,y=v.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchBox=null,e._runPig=null,e.idx=-1,e.tipfishId=-1,e.isGo=!1,e.isTiped=!1,e.tipAni=!1,e.setIntervalID=-1,e.tipIndex=-1,e.skeleton=null,e.tipFish=null,e.startIdle=!0,e}var n;return o(e,t),n=e,e.prototype.adjustPos=function(){null==this._runPig&&(this._runPig=this.node.parent.parent.parent.getComponent(s.default));for(var t=this._runPig.showCircleArr,e=1/0,n=this.node.position,i=0;i<t.length;i++)if(null!=t[i]&&null!=t[i].parent){var o=t[i].parent.convertToWorldSpaceAR(t[i].getPosition()),r=this.node.parent.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(r.x-this.node.x,2)+Math.pow(r.y-this.node.y,2));a<e&&(e=a,n=r,this.idx=i)}this.node.position=n},e.prototype.onLoad=function(){var t=this;this.skeleton=this.node.getComponent(sp.Skeleton);var e=c.randomInt(0,40)/10;c.delayCallFunc(function(){t.startIdle&&t.playIdleAni()},1e3*e)},e.prototype.onTouchEnd=function(){var t=this;if(f.operEvent.emit({action:"close_Circle_Choose",data:{}}),this._runPig.inactiveTime=0,!this._runPig.haveFishTouching&&!this.isGo){if(this._runPig.isOnWater(this.idx))return this.playChooseAni(),void c.delayCallFunc(function(){t.playIdleAni()},1e3);this.playChooseAni(),this.checkGo()}},e.prototype.playSPAni=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=null),this.skeleton=this.node.getComponent(sp.Skeleton),null!=this.skeleton){this.skeleton.setAnimation(0,t,e);var i=!0;null!=n&&this.skeleton.setCompleteListener(function(){i&&(i=!1,n())})}},e.prototype.playIdleAni=function(){this.isTiped?this.playTipAni():this.playSPAni("Turtle_Idle",!0)},e.prototype.playChooseAni=function(){var t=this;this.playSPAni("Turtle_choose",!1),c.delayCallFunc(function(){"Turtle_move"!=t.skeleton.animation&&t.playIdleAni()},2e3)},e.prototype.playFlyAni=function(){this.playSPAni("Turtle_fly",!0)},e.prototype.playPopupAni=function(t){void 0===t&&(t=null),this.playSPAni("Turtle_popup",!1,t)},e.prototype.playMoveAni=function(){this.playSPAni("Turtle_move",!0)},e.prototype.playTipAni=function(){this.playSPAni("Turtle_tip",!0)},e.prototype.playCollisionAni=function(){var t=this;this.playSPAni("Turtle_collision",!1),c.delayCallFunc(function(){"Turtle_move"!=t.skeleton.animation&&t.playIdleAni()},2e3),l.sound.play2(this._runPig.game1_error,1,!1)},e.prototype.registerTouch=function(){this.touchBox.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.unregisterTouch=function(){this.touchBox.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onDisable=function(){this.unregisterTouch()},e.prototype.onEnable=function(){this.registerTouch()},e.prototype.checkGo=function(t){var e=this;void 0===t&&(t=!0);for(var n=(k=this.rotatePoint())[0],i=k[1],o=this.node.x,r=this.node.y,s=this.calculateNewPoit2(o,r,n,i),d=s[0],f=s[1],v=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),g=this.node.parent.convertToWorldSpaceAR(new cc.Vec2(d,f)),y=this._runPig.node.convertToNodeSpaceAR(v),m=this._runPig.node.convertToNodeSpaceAR(g),_=this._runPig.circleArr,P=this._runPig.circleNodeArr,b=[],C=!0,A=0;A<_.length;A++){var w=_[A];if(!this._runPig.deletIdxMpa.has(_[A].uuid)){var x=P[A].parent.convertToWorldSpaceAR(P[A].getPosition()),N=this._runPig.node.convertToNodeSpaceAR(x);(W=w.calculateDistanceToSegment(y.x,y.y,m.x,m.y,N.x,N.y,this._runPig.radius))<w.runRadius&&this._runPig.isUserArr.includes(A)&&A!=this.idx&&(C=!1,b.push([A,x]))}}if(C){if(null!=this.tipFish){this.tipFish.removeFromParent(),this.tipAni=!1;for(var S=0,T=this.node.parent.children;S<T.length;S++){var F=T[S];"tipFish"==F.name&&F.removeFromParent()}}var I=this._runPig.isUserArr.indexOf(this.idx);-1!=I&&this._runPig.isUserArr.splice(I,1);var O=this._runPig.lvlConfig.json[0][this._runPig.currentLevel];this._runPig.runFishCount++,this._runPig.plusLevelStep(),this.isTiped&&("P1LV2Study"!=O||this._runPig.noViewTipFishIdx),h.env.mode!=h.EnvMode.TEST||h.env.noAds||(null==this._runPig.tipArr[O]&&(this._runPig.tipArr[O]=[]),this._runPig.tipArr[O].push(this.tipIndex+",1000")),this.isGo=!0;var R=l.sound.play2(this._runPig.game1_fish3,1,!0);p.vibrate.play(p.VibrateNewType.SHORT),c.delayCallFunc(function(){cc.audioEngine.stopEffect(R)},1e3);var E=this._runPig.tortoiseUserArr.indexOf(this.idx);if(-1!=E&&this._runPig.tortoiseUserArr.splice(E,1),this._runPig.getAllPigsArrLength()+this._runPig.tortoiseUserArr.length+this._runPig.kissFishNodesUserArr.length==0){this._runPig.octopusClose(),u.userData.setLvlCountDataPlus("end",this._runPig.currentLevel+1),this._runPig.isGetFragment()?this._runPig.getFragmentAnimation():this._runPig.isHaveFragment()&&this._runPig.fragmentDisappearAnimation(),c.delayCallFunc(function(){p.vibrate.play(p.VibrateNewType.LONG)},400),h.env.mode==h.EnvMode.TEST&&h.env.noAds;var k=e._runPig.lvlConfig.json[0][e._runPig.currentLevel];i=((n=new Date)-e._runPig.playDate)/1e3,e._runPig.playDate=n,o=0,u.userData.isCollectFragmentsData(e._runPig.currentLevel)&&(o=1),a.delayCallFunc(function(){a.platform.trackEvent("endmainLevel",{videoNum:e._runPig.currentLvlAdsCount,usetips:e._runPig.adsCount,level:e._runPig.currentLevel+1,levelname:k,cnt:u.userData.getLvlCountDataByTpye("end",e._runPig.currentLevel+1),over_time:i}),e._runPig.showSuccessPanel(function(){e._runPig.nextGame()})},2e3)}this._runPig.updateMap(),this.skeleton.setAnimation(0,"Turtle_move",!0);var M=this.node.getChildByName("Soil");M.active=!0,M.getComponent(cc.ParticleSystem).resetSystem();var D=this.node.convertToWorldSpaceAR(M.getPosition()),L=this.node.parent.convertToNodeSpaceAR(D);M.removeFromParent(),M.position=L,this.node.parent.addChild(M),M.setSiblingIndex(this.node.getSiblingIndex()-1),cc.tween(this.node).delay(.1).to(4,{position:cc.v2(d,f)}).call(function(){e.node.removeFromParent()}).start(),cc.tween(M).delay(.1).to(4,{position:cc.v2(d,f)}).call(function(){e.node.removeFromParent()}).start()}else{for(var B=1/0,j=-1,U=P[this.idx].parent.convertToWorldSpaceAR(P[this.idx].getPosition()),V=0,H=b;V<H.length;V++){var W,G=H[V],z=G[0],X=G[1];B>(W=Math.sqrt(Math.pow(X.x-U.x,2)+Math.pow(X.y-U.y,2)))&&(B=W,j=z)}t&&this._runPig.playAni(j)}},e.prototype.rotatePoint=function(t){void 0===t&&(t=this.node.angle);var e=this.node.x,n=this.node.y,i=t*Math.PI/180;return[500*Math.cos(i)+e,500*Math.sin(i)+n]},e.prototype.calculateNewPoit2=function(t,e,n,i){var o=this.calculateRotationAngle(new cc.Vec2(t,e),new cc.Vec2(n,i));return[2500*Math.cos(o*Math.PI/180)+n,2500*Math.sin(o*Math.PI/180)+i]},e.prototype.calculateRotationAngle=function(t,e){var n=e.x-t.x,i=e.y-t.y;return 180*Math.atan2(i,n)/Math.PI},e.prototype.startTipFishAni=function(){this.tipAni=!0,this.tipfishId=c.randomInt(1,999999);for(var t=0,e=this.node.parent.children;t<e.length;t++){var n=e[t];"tipFish"==n.name&&n.removeFromParent()}this.tipAniFunc(this.tipfishId)},e.prototype.tipAniFunc=function(t){var e=this;if(cc.isValid(this.node)&&this.node.activeInHierarchy&&this.isTiped&&this.tipAni&&this.tipfishId==t){this.tipFish=cc.instantiate(this.node),this.tipFish.pauseSystemEvents(!0),this.tipFish.opacity=0;var i=this.tipFish.getComponent(n);i.isGo=!0,i.startIdle=!1,this.node.parent.addChild(this.tipFish),i.playMoveAni();var o=this.node.parent.getChildByName("tipNode"+this.tipIndex);null!=o?this.node.setSiblingIndex(o.getSiblingIndex()-1):this.node.setSiblingIndex(this.node.parent.childrenCount),this.tipFish.name="tipFish";var r=this.node.x,s=this.node.y,a=this.node.width*this.node.scale-20,l=this.tipFish.angle*Math.PI/180,u=a*Math.cos(l)+r,h=a*Math.sin(l)+s,p=this.tipFish.x,d=this.tipFish.y,f=this.calculateNewPoit2(p,d,u,h),v=f[0],g=f[1],y=this.tipFish;cc.tween(this.tipFish).delay(.1).parallel(cc.tween().to(.3,{opacity:100}),cc.tween().to(4,{position:cc.v2(v,g)})).call(function(){y.removeFromParent()}).start(),c.delayCallFunc(function(){null!=e.tipFish&&cc.isValid(e.tipFish)&&e.tipAniFunc(t)},2e3)}},e.prototype.jump=function(){var t=this;this.isGo=!0,-1!=this.setIntervalID&&(clearInterval(this.setIntervalID),this.setIntervalID=-1),null!=this.tipFish&&(this.tipFish.removeFromParent(),this.tipAni=!1),this._runPig.lvlConfig.json[0][this._runPig.currentLevel],this.playPopupAni(function(){t.afterJump()})},e.prototype.afterJump=function(){var t=this,e=this.rotatePoint(),n=e[0],i=e[1],o=this.node.x,r=this.node.y,s=this.calculateNewPoit2(o,r,n,i),f=s[0],v=s[1];this.node.setSiblingIndex(this.node.parent.childrenCount),this.playFlyAni(),this._runPig.runFishCount++;var g=this._runPig.isUserArr.indexOf(this.idx);-1!=g&&this._runPig.isUserArr.splice(g,1);var y=this._runPig.tortoiseUserArr.indexOf(this.idx);-1!=y&&this._runPig.tortoiseUserArr.splice(y,1),this._runPig.updateMap(),this.unregisterTouch();var m=l.sound.play2(this._runPig.game1_rungo,1,!1);p.vibrate.play(p.VibrateNewType.SHORT),cc.audioEngine.stopEffect(m),this._runPig.lvlConfig.json[0][this._runPig.currentLevel],this.palyJumpFishAni(),this._runPig.getAllPigsArrLength()+this._runPig.tortoiseUserArr.length+this._runPig.kissFishNodesUserArr.length==0&&(this._runPig.octopusClose(),u.userData.setLvlCountDataPlus("end",this._runPig.currentLevel+1),this._runPig.isGetFragment()?this._runPig.getFragmentAnimation():this._runPig.isHaveFragment()&&this._runPig.fragmentDisappearAnimation(),c.delayCallFunc(function(){p.vibrate.play(p.VibrateNewType.LONG)},400),h.env.mode==h.EnvMode.TEST&&h.env.noAds,n=t._runPig.lvlConfig.json[0][t._runPig.currentLevel],o=((i=new Date)-t._runPig.playDate)/1e3,t._runPig.playDate=i,r=0,u.userData.isCollectFragmentsData(t._runPig.currentLevel)&&(r=1),a.delayCallFunc(function(){a.platform.trackEvent("endmainLevel",{videoNum:t._runPig.currentLvlAdsCount,usetips:t._runPig.adsCount,level:t._runPig.currentLevel+1,levelname:n,cnt:u.userData.getLvlCountDataByTpye("end",t._runPig.currentLevel+1),over_time:o}),t._runPig.showSuccessPanel(function(){t._runPig.nextGame()})},2e3)),this._runPig.updateMap();var _=this.node.convertToWorldSpaceAR(new d(1350,450)),P=this.node.parent.convertToNodeSpaceAR(_),b=this.runBezierAction(this.node.position,P,new d(f,v));this.node.runAction(b)},e.prototype.palyJumpFishAni=function(){var t=this,e=this._runPig.node.getChildByName("viedioJumpFishState");null!=this._runPig.foreverAdsCount&&null!=e&&(-1!=this._runPig.setIntervalIDForever&&(clearInterval(this._runPig.setIntervalIDForever),this._runPig.setIntervalIDForever=-1),this._runPig.setIntervalIDForever=setInterval(function(){cc.isValid(t._runPig.node)&&t._runPig.node.activeInHierarchy&&(t._runPig.foreverAdsCount>=t._runPig.ADmaxCount?t._runPig.foreverResetBtn.getComponent(cc.Button).interactable&&t._runPig.foreverResetBtn.getComponent(cc.Animation).play("Btn_popUp"):null!=e&&e.getComponent(cc.Animation)&&e.getComponent(cc.Animation).play())},1e3*this._runPig.foreverJumpTipTime))},e.prototype.runBezierAction=function(t,e,n){var i=this,o=[t,e,n],r=cc.bezierTo(.4,o),s=cc.spawn(r,cc.scaleTo(2,3),cc.rotateBy(2,-60));return cc.sequence(s.easing(cc.easeOut(1)),cc.callFunc(function(){i.node.removeFromParent()}))},r([y(cc.Node)],e.prototype,"touchBox",void 0),n=r([g],e)}(cc.Component);n.default=m,cc._RF.pop()},{env:"env",events:"events",index:"index",initor:"initor","panel-manager":"panel-manager",runPig:"runPig",sound:"sound","user-data":"user-data",vibrate:"vibrate"}],"typed-event":[function(t,e,n){"use strict";var i;cc._RF.push(e,"d9ff4mMpHZG8rLYhi37yJoQ","typed-event");var o=n;function r(){var t=this;this.listeners=[],this.listenersOnce=[],this.on=function(e){return t.listeners.push(e),function(){return t.off(e)}},this.once=function(e){return t.listenersOnce.push(e),function(){return t.off(e)}},this.off=function(e){var n=t.listeners.indexOf(e);-1<n&&t.listeners.splice(n,1),-1<(n=t.listenersOnce.indexOf(e))&&t.listenersOnce.splice(n,1)},this.emit=function(e){t.listeners.forEach(function(t){return t(e)}),t.listenersOnce.forEach(function(t){return t(e)}),t.listenersOnce=[]},this.pipe=function(e){return t.on(function(t){return e.emit(t)})}}Object.defineProperty(o,"__esModule",{value:!0}),o.TypedEvent=void 0,r.prototype.clear=function(){this.listeners=[],this.listenersOnce=[]},i=r,o.TypedEvent=i,cc._RF.pop()},{}],"user-data":[function(t,e,n){"use strict";cc._RF.push(e,"3c16ct8qWpPS6LbsWFiABlf","user-data");var i=t,o=n,r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.userData=o.UserData=void 0;var s=i("index"),a=(i("env"),i("events")),c=(i("platform-const"),i("time")),l={effectSound:!0,bgmSound:!0,vibrate:!0};function u(){this.basic={uid:0,userId:"123",openId:"test2",isNew:!1,envConf:{},wx_uuid:"",subscribeCnt:{}},this._game="helpllama",this.TotalLevel=1,this.setting={effectSound:!0,bgmSound:!0,vibrate:!0},this.levelCount=null,this.curGameLevel=null,this.newbieData=null,this.network={networkType:"none"},this.launchOption={scene:0,query:{}},this.flushTimeoutKeys={},this.enterAt=Date.now(),this.loginAt=null,this.showVideoGoPanel=!0,this._callbacks={}}u.prototype.onLogin=function(t){this.loadSetting(),c.time.sync(t),this.sync(t),this.loginAt=Date.now();var e=this.basic;e.recordFlag=null!==(t=e.recordFlag)&&void 0!==t?t:{},a.platformEvent.on(this.onPlatformEvent.bind(this))},u.prototype.loadSetting=function(){var t=this,e=Object.keys(this.setting);this.setting=s.platform.getStorage("setting")||l,e.forEach(function(e){null==t.setting[e]&&(t.setting[e]=l[e])})},u.prototype.setSetting=function(t,e){void 0===e&&(e=!0),this.setting=r(r({},this.setting),t),a.userEvent.emit({userData:this,kind:"setting"}),e&&this.delayFlush(this.setting,"setting")},u.prototype.getSetting=function(){return this.setting},Object.defineProperty(u.prototype,"fakeUID",{get:function(){return 10005+2*this.basic.uid},enumerable:!1,configurable:!0}),u.prototype.sync=function(t){this.basic=s.mergeDeep(this.basic,t),a.userEvent.emit({userData:this,kind:"local"})},u.prototype.setUserId=function(t){this.basic.userId=t},u.prototype.getUserId=function(){return this.basic.userId},u.prototype.getUid=function(){return this.basic.uid},u.prototype.setOpenId=function(t){this.basic.openId=t},u.prototype.getOpenId=function(){return this.basic.openId},u.prototype.setName=function(t){this.basic.name=t},u.prototype.getName=function(){return this.basic.name},u.prototype.setHeadImg=function(t){this.basic.headImg=t},u.prototype.getHeadImg=function(){return this.basic.headImg},u.prototype.setIsAuth=function(t){this.basic.isAuth=t},u.prototype.getIsAuth=function(){return this.basic.isAuth},u.prototype.setLvl=function(t){this.basic.lvl=t},u.prototype.getLvl=function(){return this.basic.lvl},u.prototype.setProp=function(t){this.basic.prop=t},u.prototype.getProp=function(){return this.basic.prop},u.prototype.getHideMini=function(){return!(!this.basic.envConf||!this.basic.envConf.hideMini)},u.prototype.getDealTest=function(){return this.basic.envConf&&this.basic.envConf.dealTest?this.basic.envConf.dealTest:0},u.prototype.getLaunchParam=function(t,e){return null==this.launchOption?e:null==this.launchOption[t]&&null!=this.launchOption.query&&null!=this.launchOption.query[t]?this.launchOption.query[t]:e},u.prototype.delayFlush=function(t,e,n){var i=this;void 0===n&&(n=0);var o=this.flushTimeoutKeys[e];o?0===n&&(clearTimeout(o),this.flushTimeoutKeys[e]=null,s.platform.setStorage(e,t)):0!==n?this.flushTimeoutKeys[e]=setTimeout(function(){i.flushTimeoutKeys[e]=null,s.platform.setStorage(e,t)},1e3*n):s.platform.setStorage(e,t)},u.prototype.onPlatformEvent=function(t){null!=t&&(t.onShow||t.onHide)},u.prototype.setLvlCountDataPlus=function(t,e){var n,i;-1!=e&&(null==(i=null==(i=(n=this.getLvlCountData())[t])?[]:i)[e]&&(i[e]=0),i[e]++,n[t]=i,this.levelCount=r({},n),this.delayFlush(this.levelCount,"levelCount",0))},u.prototype.getLvlCountData=function(){return this.levelCount=s.platform.getStorage("levelCount")||{},this.levelCount},u.prototype.getLvlCountDataByTpye=function(t,e){return null==(t=this.getLvlCountData()[t])||null==t[e]?0:t[e]},u.prototype.setLvlData=function(t){this.curGameLevel=t,this.delayFlush(this.curGameLevel,"llama-level",0)},u.prototype.getCurrentLvl=function(){return null==this.curGameLevel&&(this.curGameLevel=s.platform.getStorage("llama-level")||0),this.curGameLevel},u.prototype.setNewBieData=function(t,e){var n={};n[t]=e,e=this.getNewBieData(),this.newbieData=r(r({},e),n)},u.prototype.getNewBieData=function(){return this.newbieData=s.platform.getStorage("newBieData")||{},this.newbieData},u.prototype.getNewBieDataByName=function(t){var e=this.getCurrentLvl();if("level1"==t){if(e+1>1)return!1}else if("level2"==t&&e+1>2)return!1;return null==(e=this.getNewBieData())[t]||e[t]},u.prototype.isCollectFragmentsData=function(t){var e=[],n=Math.floor(t/16),i=t%16;return null!=e[n]&&(Math.pow(2,i)&e[n])>=1},u.prototype.initdone=function(){parent.postMessage({game:this._game,action:"initdone",data:{}},"*")},u.prototype.close=function(){parent.postMessage({game:this._game,action:"close",data:{}},"*")},u.prototype.hideMask=function(){parent.postMessage({game:this._game,action:"hideMask",data:{}},"*")},u.prototype.showMask=function(){parent.postMessage({game:this._game,action:"showMask",data:{}},"*")},u.prototype.settle=function(t){parent.postMessage({game:this._game,action:"settle",data:{level:t}},"*")},u.prototype.hint=function(t){var e=this.getUuid();this._callbacks[e]=t,parent.postMessage({game:this._game,action:"hint",data:{uuid:e}},"*")},u.prototype.callback=function(t,e){this._callbacks[t]&&this._callbacks[t](e),delete this._callbacks[t]},u.prototype.getUuid=function(){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",e=[],n=0;n<18;n++)e.push(t[Math.floor(Math.random()*t.length)]);return e.join("")},i=u,o.UserData=i,o.userData=new i,cc._RF.pop()},{}],vibrate:[function(t,e,n){"use strict";cc._RF.push(e,"a68c7qSc3pOJKOGfMunA9g0","vibrate");var i,o=t,r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.vibrate=r.VibrateNewType=void 0;var s=o("index"),a=o("platform-const"),c=o("user-data");function l(){}(o=i=r.VibrateNewType||(r.VibrateNewType={}))[o.SHORT=0]="SHORT",o[o.LONG=1]="LONG",o[o.DOUBLE=2]="DOUBLE",o[o.DOUBLE_SHORT=3]="DOUBLE_SHORT",l.prototype.play=function(t){var e;c.userData.getSetting().vibrate&&(t==i.SHORT?s.platform.vibrate(a.VibrateType.SHORT):t==i.LONG?s.platform.vibrate(a.VibrateType.LONG):t==i.DOUBLE?(s.platform.vibrate(a.VibrateType.LONG),(e=cc.director.getScene().getChildByName("Canvas"))&&cc.tween(e).delay(.4).call(function(){s.platform.vibrate(a.VibrateType.LONG)}).start()):t==i.DOUBLE_SHORT&&(s.platform.vibrate(a.VibrateType.SHORT),(e=cc.director.getScene().getChildByName("Canvas"))&&cc.tween(e).delay(.2).call(function(){s.platform.vibrate(a.VibrateType.SHORT)}).start()))},o=l,r.vibrate=new o,cc._RF.pop()},{}],"video-button":[function(t,e,n){"use strict";var i;cc._RF.push(e,"e4829q2N/dOm7yCMugmtqda","video-button");var o=t,r=e,s=n;i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var a,c=function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(s,"__esModule",{value:!0});var l=o("index"),u=o("common"),h=o("platform-const"),p=(f=cc._decorator).ccclass,d=f.property;r=f.requireComponent,o=f.disallowMultiple;var f=f.menu;function v(){var t=null!==a&&a.apply(this,arguments)||this;return t.videoSource="",t.onWatchEndEvent=null,t.curItem="",t.beforeWatchCheckHandler=null,t}(function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(v,a=cc.Component),v.prototype.onLoad=function(){this.node.on("click",this.onClick,this)},v.prototype.setCurItem=function(t){this.curItem=t},v.prototype.onClick=function(t){var e,n=this;t&&!t.interactable||null==this.onWatchEndEvent||null!=this.beforeWatchCheckHandler&&!this.beforeWatchCheckHandler()||(e=u.tempDisableButton(this.node,1),this.curItem&&"string"==typeof this.curItem&&this.curItem.length>0&&this.curItem,l.platform.doWatchAD({videoSource:"main_tips",videoDuration:0,sequenceInfo:null,item:"main"}).then(function(){e(),n.onWatchEndEvent&&cc.Component.EventHandler.emitEvents([n.onWatchEndEvent],t)}).catch(function(){e(),h.VideoFailCode.NO_AD}))},v.prototype.setBeforeWatchCheckHandler=function(t){this.beforeWatchCheckHandler=t},c([d(cc.String)],v.prototype,"videoSource",void 0),c([d(cc.Component.EventHandler)],v.prototype,"onWatchEndEvent",void 0),c([d(cc.String)],v.prototype,"curItem",void 0),f=c([p,r(cc.Button),o,f("button/VideoButton")],v),s.default=f,cc._RF.pop()},{}],web:[function(t,e,n){"use strict";cc._RF.push(e,"e1cd8NqhY1B5biFrNBa3EP9","web");var i=t,o=n,r=function(t,e,n,i){return new(n=n||Promise)(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((i=i.apply(t,e||[])).next())})},s=function(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==("undefined"==typeof Symbol?"undefined":typeof Symbol)&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},a=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i};Object.defineProperty(o,"__esModule",{value:!0}),o.WebPlatform=void 0;var c=i("user-data"),l=i("platform-const"),u=i("events"),h=i("panel-manager");function p(){}p.prototype.string=function(){return l.PlatformCode.Web},p.prototype.initSDK=function(){cc.log("WebPlatform does not support sdk");var t=new URLSearchParams(location.search),e={};t.forEach(function(t,n){e[n]=t}),c.userData.syncLaunchOption({query:e}),this.initByteDanceListener()},p.prototype.initByteDanceListener=function(){cc.game.on(cc.game.EVENT_HIDE,function(){u.platformEvent.emit({onHide:!0})}),cc.game.on(cc.game.EVENT_SHOW,function(){u.platformEvent.emit({onShow:!0,isSharing:this.isSharing})})},p.prototype.isSwitchedInitd=function(){return!0},p.prototype.login=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2,null]})})},p.prototype.getStorage=function(t){return null==(t=cc.sys.localStorage.getItem(t))||""==t?null:JSON.parse(t)},p.prototype.setStorage=function(t,e){cc.sys.localStorage.setItem(t,JSON.stringify(e)),e||this.trackEvent("error",{type:"setStorage",message:"value error:"+e,item:t})},p.prototype.clearStorage=function(){cc.sys.localStorage.clear()},p.prototype.removeStorage=function(t){cc.sys.localStorage.removeItem(t)},p.prototype.trackLogin=function(){},p.prototype.trackUserSet=function(){},p.prototype.trackUserSetOnce=function(){},p.prototype.trackEvent=function(){},p.prototype.getSeq=function(){return{type:Math.random()<.5?l.STDSeqType.VIDEO:l.STDSeqType.SHARE,modelId:"",shareGuid:"",forceResult:""}},p.prototype.consumeSeq=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2]})})},p.prototype.doWatchAD=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2]})})},p.prototype.doShare=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2]})})},p.prototype.getSystemData=function(){return l.DefaultSystemInfo},p.prototype.getSwitches=function(){return l.DefaultSDKSwitch},p.prototype.vibrate=function(){},p.prototype.preloadVideo=function(){return!0},p.prototype.showModal=function(t){return r(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return[4,h.PanelManager.ins.open("prefab/common/modal",t)];case 1:return[2,e.sent().values]}})})},p.prototype.refreshGame=function(){location.reload()},p.prototype.showLoading=function(){},p.prototype.hideLoading=function(){},p.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.log.apply(console,a([l.LogTag,t],e))},p.prototype.getMenuBounding=function(){return null==this.menuBounding&&(this.menuBounding=new cc.Rect(650,0,100,50)),this.menuBounding},p.prototype.createShareImage=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2,""]})})},p.prototype.preloadInterstitialAD=function(){},p.prototype.showInterstitialAD=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2]})})},p.prototype.canShowBanner=function(){return!1},p.prototype.getBannerSize=function(){return new cc.Size(0,0)},p.prototype.showBanner=function(){cc.log("WebPlatform does not support banner")},p.prototype.hideBanner=function(){cc.log("WebPlatform does not support banner")},p.prototype.getSubscribeCnt=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2,0]})})},p.prototype.subscribe=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r(this,void 0,Promise,function(){var n,i;return s(this,function(){return n=a([t],e),i={},n.forEach(function(t){i[t]=!0}),[2,i]})})},p.prototype.startVideoRecord=function(){},p.prototype.pauseVideoRecord=function(){},p.prototype.resumeVideoRecord=function(){},p.prototype.stopVideoRecord=function(){},p.prototype.hasVideoRecord=function(){return!1},p.prototype.shareVideoRecord=function(){},p.prototype.uploadAdEvent=function(){},p.prototype.uploadAdEvent_Addict=function(){},p.prototype.addShortcut=function(){},p.prototype.PostMessage=function(){},p.prototype.SetUserCloudStorage=function(){},p.prototype.GetOpenDataContext=function(){},p.prototype.share=function(){return r(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(t){t(!0)})]})})},p.prototype.getUserProfile=function(){},i=p,o.WebPlatform=i,cc._RF.pop()},{}]},{},["CryptoJS","ListView","base-layer","base-panel","common","const","env","events","index","initor","layer-manager","mainFish","modal","panel-manager","platform-const","platform","resources","router","screen-fit","sound","time","typed-event","vibrate","web","player-info","user-data","Circle","DrawCircle","SlideRotate","circleNodeComp","clamComp","crabNodeComp","frogComp","guideHand","kissFishComp","love_anim","octopusComp","runPig","runPigPanel","seaWaveLayer","tortoiseComp","SuccessPanel","chooseLevelPanel","helpPanel","settingPanel","switch-button","toast","video-button","loading","main"]);